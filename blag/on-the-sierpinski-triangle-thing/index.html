<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 4.25.8"/><meta name="theme-color" content="#663399"/><style data-href="/styles.1233a6cf8f631b5a2cd7.css" data-identity="gatsby-global-css">code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#000;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;hyphens:none;line-height:1.5;tab-size:4;text-align:left;text-shadow:0 1px #fff;white-space:pre;word-break:normal;word-spacing:normal}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{background:#b3d4fc;text-shadow:none}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{background:hsla(0,0%,100%,.5);color:#9a6e3a}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}:root{--title-max-width:70%;--blur-radius:12px;--blur-radius--subtle:3px;--border-radius:1em}header{margin-bottom:1.45rem;padding:0 2rem;text-align:left}header.plaid{align-items:center;display:flex;justify-content:center}.plaid{background-color:#e9d4b9;background-image:repeating-linear-gradient(45deg,transparent 5px,rgba(11,36,45,.5) 0,rgba(11,36,45,.5) 10px,hsla(5,53%,63%,0) 0,hsla(5,53%,63%,0) 35px,hsla(5,53%,63%,.5) 0,hsla(5,53%,63%,.5) 40px,rgba(11,36,45,.5) 0,rgba(11,36,45,.5) 50px,rgba(11,36,45,0) 0,rgba(11,36,45,0) 60px,hsla(5,53%,63%,.5) 0,hsla(5,53%,63%,.5) 70px,rgba(247,179,85,.5) 0,rgba(247,179,85,.5) 80px,rgba(247,179,85,0) 0,rgba(247,179,85,0) 90px,hsla(5,53%,63%,.5) 0,hsla(5,53%,63%,.5) 110px,hsla(5,53%,63%,0) 0,hsla(5,53%,63%,0) 120px,rgba(11,36,45,.5) 0,rgba(11,36,45,.5) 140px),repeating-linear-gradient(135deg,transparent 5px,rgba(11,36,45,.5) 0,rgba(11,36,45,.5) 10px,hsla(5,53%,63%,0) 0,hsla(5,53%,63%,0) 35px,hsla(5,53%,63%,.5) 0,hsla(5,53%,63%,.5) 40px,rgba(11,36,45,.5) 0,rgba(11,36,45,.5) 50px,rgba(11,36,45,0) 0,rgba(11,36,45,0) 60px,hsla(5,53%,63%,.5) 0,hsla(5,53%,63%,.5) 70px,rgba(247,179,85,.5) 0,rgba(247,179,85,.5) 80px,rgba(247,179,85,0) 0,rgba(247,179,85,0) 90px,hsla(5,53%,63%,.5) 0,hsla(5,53%,63%,.5) 110px,hsla(5,53%,63%,0) 0,hsla(5,53%,63%,0) 140px,rgba(11,36,45,.5) 0,rgba(11,36,45,.5) 160px);color:hsla(0,0%,94%,.85)}header h1{font-size:3.14159em;font-weight:400;height:100%;letter-spacing:7px}.header-content{height:100%;margin:2rem 0;max-width:var(--title-max-width);padding:0 1.0875rem;width:100%}.plaid>.header-content{-webkit-backdrop-filter:blur(var(--blur-radius));backdrop-filter:blur(var(--blur-radius));border-radius:var(--border-radius);box-shadow:0 0 2em gray;padding:1.45rem 1.0875rem}footer{display:flex;justify-content:center}.footer-content{-webkit-backdrop-filter:blur(var(--blur-radius--subtle));backdrop-filter:blur(var(--blur-radius--subtle));border-radius:var(--border-radius);box-shadow:0 0 2em gray;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;margin:1.45rem 1.0875rem;max-width:var(--title-max-width);padding:1em;text-align:center}.icon-bar{display:flex;font-size:2em;justify-content:space-around;margin-bottom:.25rem}.icon-bar>a{color:hsla(0,0%,94%,.85)}.icon-bar>a:hover{color:#246}.shh{height:1px;left:-10000px;overflow:hidden;position:absolute;top:auto;width:1px}html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;font-family:Muli,sans-serif}body{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wgUFxgxChuixQAAAEpJREFUGNNtjzEOwFAIQrHjv/9VcaWD2lpSF83TCAQPdiVEraKgTShBi1AFhlADaiyMZ9lnoZYb9av7yS/Il/w+dVk35tYtXHj8G+Flt1tNaV/oAAAAAElFTkSuQmCC);margin:0}article,aside,details,figcaption,figure,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{-webkit-text-decoration-skip:objects;background-color:transparent}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{box-sizing:border-box;font:112.5%/1.45em georgia,serif;overflow-y:scroll}*,:after,:before{box-sizing:inherit}body{word-wrap:break-word;-ms-font-feature-settings:"kern","liga","clig","calt";font-feature-settings:"kern","liga","clig","calt";color:rgba(0,0,0,.8);font-family:georgia,serif;font-kerning:normal;font-weight:400}img{margin:0 0 1.45rem;max-width:100%;padding:0}h1{font-size:2.25rem}h1,h2{color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;line-height:1.1;margin:0 0 1.45rem;padding:0;text-rendering:optimizeLegibility}h2{font-size:1.62671rem}h3{font-size:1.38316rem}h3,h4{color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;line-height:1.1;margin:0 0 1.45rem;padding:0;text-rendering:optimizeLegibility}h4{font-size:1rem}h5{font-size:.85028rem}h5,h6{color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;line-height:1.1;margin:0 0 1.45rem;padding:0;text-rendering:optimizeLegibility}h6{font-size:.78405rem}hgroup{margin:0 0 1.45rem;padding:0}ol,ul{list-style-image:none;list-style-position:outside;margin:0 0 1.45rem 1.45rem;padding:0}dd,dl,figure,p{margin:0 0 1.45rem;padding:0}pre{word-wrap:normal;background:rgba(0,0,0,.04);border-radius:3px;font-size:.85rem;line-height:1.42;margin:0 0 1.45rem;overflow:auto;padding:1.45rem}table{border-collapse:collapse;font-size:1rem;line-height:1.45rem;width:100%}fieldset,table{margin:0 0 1.45rem;padding:0}blockquote{background:#e9e9d0;border-radius:3px;font-style:italic;margin:0 1.45rem 1.45rem;padding:11px}form,iframe,noscript{margin:0 0 1.45rem;padding:0}hr{background:rgba(0,0,0,.2);border:none;height:1px;margin:0 0 calc(1.45rem - 1px);padding:0}address{margin:0 0 1.45rem;padding:0}b,dt,strong,th{font-weight:700}li{margin-bottom:.725rem}ol li,ul li{padding-left:0}li>ol,li>ul{margin-bottom:.725rem;margin-left:1.45rem;margin-top:.725rem}blockquote :last-child,li :last-child,p :last-child{margin-bottom:0}li>p{margin-bottom:.725rem}code,kbd,samp{font-size:.85rem;line-height:1.45rem}abbr,abbr[title],acronym{border-bottom:1px dotted rgba(0,0,0,.5);cursor:help}abbr[title]{text-decoration:none}td,th,thead{text-align:left}td,th{font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";border-bottom:1px solid rgba(0,0,0,.12);padding:.725rem .96667rem calc(.725rem - 1px)}td:first-child,th:first-child{padding-left:0}td:last-child,th:last-child{padding-right:0}code,tt{background-color:rgba(0,0,0,.04);border-radius:3px;font-family:SFMono-Regular,Consolas,Roboto Mono,Droid Sans Mono,Liberation Mono,Menlo,Courier,monospace;padding:.2em 0}pre code{background:none;line-height:1.42}code:after,code:before,tt:after,tt:before{content:" ";letter-spacing:-.2em}pre code:after,pre code:before,pre tt:after,pre tt:before{content:""}@media only screen and (max-width:480px){html{font-size:100%}}.container{margin:0 auto;max-width:70%;padding:0 1.0875rem 1.45rem;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}@media only screen and (max-width:480px){.container{max-width:95%}}.token.operator{background:none}code[class*=language-],pre[class*=language-]{font-size:.8em}.post-link{font-size:.9em;margin:0 0 .5em 1em}.post-link:last-child{margin-bottom:1.3em}.post-link-date{color:#aaa;font-size:1.2em;margin-left:.62em;opacity:.6;vertical-align:sub}.triangle{align-items:center;display:flex;flex-direction:column;margin:3em 0 0}.triangle.big-bottom{margin-bottom:2em}.triangle .resizer{opacity:0;opacity:.2;transition:opacity .5s ease}.touch-device .resizer,.triangle:hover .resizer{opacity:1}input[type=range]{-webkit-appearance:none;margin:10px 0;width:100%}input[type=range]:focus{outline:none}input[type=range]::-webkit-slider-runnable-track{animate:.2s;background:hsla(42,28%,54%,.26);border:1px solid rgba(34,68,102,.1);border-radius:5px;box-shadow:0 0 0 #000;cursor:pointer;height:8px;width:100%}input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;background:#fff;border:1px solid rgba(34,68,102,.5);border-radius:15px;box-shadow:0 0 0 #000031;cursor:pointer;height:20px;margin-top:-7px;width:20px}input[type=range]:focus::-webkit-slider-runnable-track{background:hsla(42,28%,54%,.26)}input[type=range]::-moz-range-track{animate:.2s;background:hsla(42,28%,54%,.26);border:1px solid rgba(34,68,102,.1);border-radius:5px;box-shadow:0 0 0 #000;cursor:pointer;height:8px;width:100%}input[type=range]::-moz-range-thumb{background:#fff;border:1px solid rgba(34,68,102,.5);border-radius:15px;box-shadow:0 0 0 #000031;cursor:pointer;height:20px;width:20px}input[type=range]::-ms-track{animate:.2s;background:transparent;border-color:transparent;color:transparent;cursor:pointer;height:8px;width:100%}input[type=range]::-ms-fill-lower,input[type=range]::-ms-fill-upper{background:hsla(42,28%,54%,.26);border:0 solid #010101;border-radius:2px;box-shadow:0 0 0 #000}input[type=range]::-ms-thumb{background:#fff;border:1px solid rgba(34,68,102,.5);border-radius:15px;box-shadow:0 0 0 #000031;cursor:pointer;height:20px;margin-top:1px;width:20px}input[type=range]:focus::-ms-fill-lower,input[type=range]:focus::-ms-fill-upper{background:hsla(42,28%,54%,.26)}body{color:#246;font-family:Muli,sans-serif}h2{color:#888;font-size:2em;font-weight:400;margin:.5em 0}.subtitle:before{color:#ddd;content:"〉"}@media only screen and (max-width:480px){h2{font-size:1.6em}.subtitle{text-align:center}}h3{font-size:1.2em;font-weight:400;margin-bottom:.3em}a{color:#024}.blog-post-container{font-family:Century Schoolbook,serif;margin:auto;padding:0 10%}.blog-post-date{color:#dd9}pre{padding:.5rem}@media only screen and (max-width:480px){header h1{font-size:2.5em}header h1,header h3{max-width:90%}.blog-post-content h2{font-size:1.3em}}</style><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="icon" href="/favicon-32x32.png?v=e06ff3ac86a0c187840479eaa6cda49e" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=e06ff3ac86a0c187840479eaa6cda49e"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=e06ff3ac86a0c187840479eaa6cda49e"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=e06ff3ac86a0c187840479eaa6cda49e"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=e06ff3ac86a0c187840479eaa6cda49e"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=e06ff3ac86a0c187840479eaa6cda49e"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=e06ff3ac86a0c187840479eaa6cda49e"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=e06ff3ac86a0c187840479eaa6cda49e"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=e06ff3ac86a0c187840479eaa6cda49e"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><header class="plaid"><div class="header-content"><h1>On that fractal triforce thing there</h1><h3 class="blog-post-date">Wed May 01 2024</h3></div></header><div class="blog-post-container"><div class="blog-post"><div class="blog-post-content"><div class="triangle"></div>
<p>Play around with it a little—it&#x27;s kind of cool, right? I can never decide if I prefer the
sparsely- and densely-populated version.</p>
<p>It&#x27;s also sentimental for me. Let&#x27;s go back in time a little: in 2013, I was earning an
extremely meager living running an after-school art program at a local elementary school.
My original dream of a tenure-track professorship in the humanities had foundered on the
sharp realities of the great recession and the increasingly exploitative academic job
market for teachers of every subject that lacked a corresponding industry to provide
negotiating leverage. I had no clue what might be a sustainable long-term career, but I
knew that status quo wasn&#x27;t it; and though I love children, after spending so many of my
waking hours dealing with 10-year-olds and their  10-year-old thoughts, I could feel the
sharp edges of my brain beginning to dull [^1]. I needed to find something I could do with
my brain that would be</p>
<ol>
<li>difficult enough to be interesting, and</li>
<li>remunerative;</li>
</ol>
<p>and by and by my search lead me to enroll in CS101 at a local community college. I didn&#x27;t enroll with the thought of becoming a programmer per se—I just thought it would help if I ended up doing any kind of work crunching numbers. But I loved it, I was good at it, and it really did transform my life. But this isn&#x27;t about all that: this is about an Extremely Cool demo the teacher ran one day in class.</p>
<h2 id="the-setup" style="position:relative"><a href="#the-setup" aria-label="the setup permalink" class="anchor before"><div><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></div></a>The setup</h2>
<p>The teacher walked us through a very simple C++ program. It imported some graphics library
headers, the details of which were glossed over (it was a 101 course, after all), and then
defined a very simple initial state:</p>
<ol>
<li>a small cartesian grid</li>
<li>an array of three points on that grid corresponding to the vertices of a triangle, each defined as a two-element array of <code>float</code>s</li>
<li>another point near the middle of the other three, assigned to a variable like <code>currentPoint</code></li>
</ol>
<p>If we were to stop here and only render the initial state, it would look something like this:</p>
<div class="triangle big-bottom"></div>
<p>Not very exciting yet, I admit.</p>
<h2 id="complex-behaviors-can-emerge-from-simple-rules-or-lets-hang-some-mathy-flesh-on-those-bones" style="position:relative"><a href="#complex-behaviors-can-emerge-from-simple-rules-or-lets-hang-some-mathy-flesh-on-those-bones" aria-label="complex behaviors can emerge from simple rules or lets hang some mathy flesh on those bones permalink" class="anchor before"><div><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></div></a>Complex behaviors can emerge from simple rules, or: let&#x27;s hang some mathy flesh on those bones</h2>
<p>To expand on this rather spartan, boring starting point, there was a single <code>for</code> loop, which did the following steps a few thousand times:</p>
<ol>
<li>select a random element from the array of vertices</li>
<li>calculate the coordinates of the point halfway between <code>currentPoint</code> and that vertex</li>
<li>reassign <code>currentPoint</code> to that new point</li>
<li>draw the new <code>currentPoint</code></li>
</ol>
<p>Very simple stuff, maybe 15 lines of code total. A well-read observer may recognize this
as a simple variant of <a href="https://en.wikipedia.org/wiki/Chaos_game">the chaos game</a>
algorithm; at the time, I didn&#x27;t recognize shit. But I am the child of a math teacher and
an older millenial who has been playing Zelda games since the delirious days of Clinton vs
Dole vs Perot, short pants, and gold NES cartridges: the teacher compiled the script, ran
the binary, and it sparked joy:</p>
<div class="triangle big-bottom"></div>
<h2 id="but-is-it-web-scale" style="position:relative"><a href="#but-is-it-web-scale" aria-label="but is it web scale permalink" class="anchor before"><div><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></div></a>But is it Web Scale?</h2>
<p>So, we have the core algorithm for drawing a cool little fractal triforce. Now to stick in in a website!</p>
<p>I made a few artistic choices:</p>
<ol>
<li>inverting the triangle makes it look like it&#x27;s pointing down at the content below in a nice way</li>
<li>naively adding points fills in the triangle with monotonically increasing density, the visual effect of which has sharply diminishing returns; pushing the points into a FIFO queue with a max size preserves the negative space it needs to look sparse, dynamic, and alive</li>
<li>I wanted users to be able to  interactively adjust the number of dots in the visualization: it leans into the dynamic nature of the web as a medium; it allows folks to experience both the frenetic movement and staticky geometric ambiguity of a sparsely-populated queue of points and the fractal beauty of a denser one; and it shows potential employers that I am reasonably competent at connecting user inputs to dynamic logic, which, I mean, ain&#x27;t nothing.</li>
<li>The gold color (<code>#aa9668</code>, for those of you who are curious but don&#x27;t actually want to pin down an ephemeral svg <code>&lt;circle&gt;</code> in your browser&#x27;s devtools) goes nicely with the rest of the site</li>
</ol>
<p>The last order of business, then, was to actually render those dots. This site is built on
top of a react-based static site generator; while there is a lot to like about react, it&#x27;s
not a great choice for making performant little mathy visualizations. I decided to use d3
for that. However, d3 and react both want to control the rendering of your html. How to
make them play nicely together? Like this:</p>
<pre><code class="language-js">export default function D3Wrapper({ d3RenderFn, className }) {
  // d3 needs an actual DOM node to do its thing on, so let&#x27;s give it one
  const el = useRef(null)

  // Render the d3 visualization. If the d3 visualization is already in the DOM, though,
  // do not recreate it; this avoids duplicated element shenanigans with hot module
  // reloading during development.
  useEffect(() =&gt; {
    if (!window.d3Embeds) {
      window.d3Embeds = new Map()
    }

    if (!window.d3Embeds.get(d3RenderFn)) {
      d3RenderFn(el.current)
      window.d3Embeds.set(d3RenderFn, true)
    }
  }, [d3RenderFn])

  return &lt;div className={className} ref={el} /&gt;
}
</code></pre>
<p>And really, that&#x27;s it. A cute little bit of web-based art that makes me happy.</p>
<p>[^1]: I should note here that this is not a fundamental fact of dealing with kids: parents and school teachers have the chance (the obligation, even) to engage more deeply with their kids, and tracking those longer-term educational goals to the kids&#x27; intellectual and emotional development provides as deep an intellectual challenge as you care to make it. Hanging out for two hours doodling on butcher paper and helping with the stultifying abolination that is second-grade homework [^2], though? I needed more.</p>
<p>[^2]: Up until <em>at least</em> the start of adolescence, children&#x27;s intellectual and social development requires free, exploratory play, not rote drilling of skills; and their emotional and executive regulation is not strong enough to get any long-term benefit from the discipline of finishing their daily assignments. But by all means, if you want to force parents to force their kids into boring, tedious chorework, keep it coming!</p></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blag/on-the-sierpinski-triangle-thing";window.___webpackCompilationHash="073220d27b67f2336112";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-d779ae985058eabbbc5d.js"]};/*]]>*/</script><script src="/app-d779ae985058eabbbc5d.js" async=""></script><script src="/1bfc9850-31a83d3e9b2d1d5a7a85.js" async=""></script><script src="/framework-94a7d1bc1fae8977e201.js" async=""></script><script src="/webpack-runtime-ad31a7b13803da6aeee4.js" async=""></script></body></html>