(self.webpackChunkblag=self.webpackChunkblag||[]).push([[524],{3350:function(e,t){"use strict";t.__esModule=!0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=function(e){var t=e.location,n=t.search,r=t.hash,a=t.href,o=t.origin,l=t.protocol,u=t.host,c=t.hostname,s=t.port,f=e.location.pathname;!f&&a&&i&&(f=new URL(a).pathname);return{pathname:encodeURI(decodeURI(f)),search:n,hash:r,href:a,origin:o,protocol:l,host:u,hostname:c,port:s,state:e.history.state,key:e.history.state&&e.history.state.key||"initial"}},a=function(e,t){var a=[],o=r(e),i=!1,l=function(){};return{get location(){return o},get transitioning(){return i},_onTransitionComplete:function(){i=!1,l()},listen:function(t){a.push(t);var n=function(){o=r(e),t({location:o,action:"POP"})};return e.addEventListener("popstate",n),function(){e.removeEventListener("popstate",n),a=a.filter((function(e){return e!==t}))}},navigate:function(t){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=u.state,s=u.replace,f=void 0!==s&&s;if("number"==typeof t)e.history.go(t);else{c=n({},c,{key:Date.now()+""});try{i||f?e.history.replaceState(c,null,t):e.history.pushState(c,null,t)}catch(d){e.location[f?"replace":"assign"](t)}}o=r(e),i=!0;var h=new Promise((function(e){return l=e}));return a.forEach((function(e){return e({location:o,action:"PUSH"})})),h}}},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=e.indexOf("?"),n={pathname:t>-1?e.substr(0,t):e,search:t>-1?e.substr(t):""},r=0,a=[n],o=[null];return{get location(){return a[r]},addEventListener:function(e,t){},removeEventListener:function(e,t){},history:{get entries(){return a},get index(){return r},get state(){return o[r]},pushState:function(e,t,n){var i=n.split("?"),l=i[0],u=i[1],c=void 0===u?"":u;r++,a.push({pathname:l,search:c.length?"?"+c:c}),o.push(e)},replaceState:function(e,t,n){var i=n.split("?"),l=i[0],u=i[1],c=void 0===u?"":u;a[r]={pathname:l,search:c},o[r]=e},go:function(e){var t=r+e;t<0||t>o.length-1||(r=t)}}}},i=!("undefined"==typeof window||!window.document||!window.document.createElement),l=a(i?window:o()),u=l.navigate;t.globalHistory=l,t.navigate=u,t.createHistory=a,t.createMemorySource=o},8371:function(e,t,n){"use strict";t.__esModule=!0,t.shallowCompare=t.validateRedirect=t.insertParams=t.resolve=t.match=t.pick=t.startsWith=void 0;var r,a=n(311),o=(r=a)&&r.__esModule?r:{default:r};var i=function(e,t){return e.substr(0,t.length)===t},l=function(e,t){for(var n=void 0,r=void 0,a=t.split("?")[0],i=d(a),l=""===i[0],c=h(e),f=0,p=c.length;f<p;f++){var g=!1,v=c[f].route;if(v.default)r={route:v,params:{},uri:t};else{for(var y=d(v.path),b={},w=Math.max(i.length,y.length),_=0;_<w;_++){var E=y[_],x=i[_];if(s(E)){b[E.slice(1)||"*"]=i.slice(_).map(decodeURIComponent).join("/");break}if(void 0===x){g=!0;break}var k=u.exec(E);if(k&&!l){-1===m.indexOf(k[1])||(0,o.default)(!1);var M=decodeURIComponent(x);b[k[1]]=M}else if(E!==x){g=!0;break}}if(!g){n={route:v,params:b,uri:"/"+i.slice(0,_).join("/")};break}}}return n||r||null},u=/^:(.+)/,c=function(e){return u.test(e)},s=function(e){return e&&"*"===e[0]},f=function(e,t){return{route:e,score:e.default?0:d(e.path).reduce((function(e,t){return e+=4,!function(e){return""===e}(t)?c(t)?e+=2:s(t)?e-=5:e+=3:e+=1,e}),0),index:t}},h=function(e){return e.map(f).sort((function(e,t){return e.score<t.score?1:e.score>t.score?-1:e.index-t.index}))},d=function(e){return e.replace(/(^\/+|\/+$)/g,"").split("/")},p=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e+((n=n.filter((function(e){return e&&e.length>0})))&&n.length>0?"?"+n.join("&"):"")},m=["uri","path"];t.startsWith=i,t.pick=l,t.match=function(e,t){return l([{path:e}],t)},t.resolve=function(e,t){if(i(e,"/"))return e;var n=e.split("?"),r=n[0],a=n[1],o=t.split("?")[0],l=d(r),u=d(o);if(""===l[0])return p(o,a);if(!i(l[0],".")){var c=u.concat(l).join("/");return p(("/"===o?"":"/")+c,a)}for(var s=u.concat(l),f=[],h=0,m=s.length;h<m;h++){var g=s[h];".."===g?f.pop():"."!==g&&f.push(g)}return p("/"+f.join("/"),a)},t.insertParams=function(e,t){var n=e.split("?"),r=n[0],a=n[1],o=void 0===a?"":a,i="/"+d(r).map((function(e){var n=u.exec(e);return n?t[n[1]]:e})).join("/"),l=t.location,c=(l=void 0===l?{}:l).search,s=(void 0===c?"":c).split("?")[1]||"";return i=p(i,o,s)},t.validateRedirect=function(e,t){var n=function(e){return c(e)};return d(e).filter(n).sort().join("/")===d(t).filter(n).sort().join("/")},t.shallowCompare=function(e,t){var n=Object.keys(e);return n.length===Object.keys(t).length&&n.every((function(n){return t.hasOwnProperty(n)&&e[n]===t[n]}))}},9253:function(e,t,n){"use strict";n.r(t),n.d(t,{FormatSpecifier:function(){return Mu},active:function(){return ra},arc:function(){return L_},area:function(){return F_},areaRadial:function(){return J_},ascending:function(){return a},autoType:function(){return Ui},axisBottom:function(){return ue},axisLeft:function(){return ce},axisRight:function(){return le},axisTop:function(){return ie},bisect:function(){return c},bisectLeft:function(){return u},bisectRight:function(){return l},bisector:function(){return o},blob:function(){return Il},brush:function(){return Pa},brushSelection:function(){return Ta},brushX:function(){return Aa},brushY:function(){return Ca},buffer:function(){return Ol},chord:function(){return za},clientPoint:function(){return Hn},cluster:function(){return Vd},color:function(){return $t},contourDensity:function(){return ci},contours:function(){return ri},create:function(){return f_},creator:function(){return ut},cross:function(){return h},csv:function(){return Dl},csvFormat:function(){return Pi},csvFormatBody:function(){return Ni},csvFormatRow:function(){return Ri},csvFormatRows:function(){return Ii},csvFormatValue:function(){return Oi},csvParse:function(){return Ai},csvParseRows:function(){return Ci},cubehelix:function(){return Yo},curveBasis:function(){return NE},curveBasisClosed:function(){return RE},curveBasisOpen:function(){return HE},curveBundle:function(){return jE},curveCardinal:function(){return BE},curveCardinalClosed:function(){return FE},curveCardinalOpen:function(){return VE},curveCatmullRom:function(){return YE},curveCatmullRomClosed:function(){return QE},curveCatmullRomOpen:function(){return JE},curveLinear:function(){return z_},curveLinearClosed:function(){return KE},curveMonotoneX:function(){return lx},curveMonotoneY:function(){return ux},curveNatural:function(){return fx},curveStep:function(){return dx},curveStepAfter:function(){return mx},curveStepBefore:function(){return px},customEvent:function(){return bt},descending:function(){return d},deviation:function(){return g},dispatch:function(){return me},drag:function(){return gi},dragDisable:function(){return Pt},dragEnable:function(){return Nt},dsv:function(){return zl},dsvFormat:function(){return Si},easeBack:function(){return Sl},easeBackIn:function(){return kl},easeBackInOut:function(){return Sl},easeBackOut:function(){return Ml},easeBounce:function(){return _l},easeBounceIn:function(){return wl},easeBounceInOut:function(){return El},easeBounceOut:function(){return _l},easeCircle:function(){return cl},easeCircleIn:function(){return ll},easeCircleInOut:function(){return cl},easeCircleOut:function(){return ul},easeCubic:function(){return Kr},easeCubicIn:function(){return Jr},easeCubicInOut:function(){return Kr},easeCubicOut:function(){return Zr},easeElastic:function(){return Cl},easeElasticIn:function(){return Al},easeElasticInOut:function(){return Pl},easeElasticOut:function(){return Cl},easeExp:function(){return il},easeExpIn:function(){return al},easeExpInOut:function(){return il},easeExpOut:function(){return ol},easeLinear:function(){return Gi},easePoly:function(){return Ji},easePolyIn:function(){return Qi},easePolyInOut:function(){return Ji},easePolyOut:function(){return $i},easeQuad:function(){return Xi},easeQuadIn:function(){return Wi},easeQuadInOut:function(){return Xi},easeQuadOut:function(){return Yi},easeSin:function(){return nl},easeSinIn:function(){return el},easeSinInOut:function(){return nl},easeSinOut:function(){return tl},entries:function(){return go},event:function(){return pt},extent:function(){return v},forceCenter:function(){return Xl},forceCollide:function(){return lu},forceLink:function(){return su},forceManyBody:function(){return gu},forceRadial:function(){return vu},forceSimulation:function(){return mu},forceX:function(){return yu},forceY:function(){return bu},format:function(){return Pu},formatDefaultLocale:function(){return Hu},formatLocale:function(){return Ou},formatPrefix:function(){return Nu},formatSpecifier:function(){return ku},geoAlbers:function(){return od},geoAlbersUsa:function(){return id},geoArea:function(){return Nc},geoAzimuthalEqualArea:function(){return sd},geoAzimuthalEqualAreaRaw:function(){return cd},geoAzimuthalEquidistant:function(){return hd},geoAzimuthalEquidistantRaw:function(){return fd},geoBounds:function(){return xs},geoCentroid:function(){return Hs},geoCircle:function(){return Ws},geoClipAntimeridian:function(){return af},geoClipCircle:function(){return of},geoClipExtent:function(){return sf},geoClipRectangle:function(){return cf},geoConicConformal:function(){return yd},geoConicConformalRaw:function(){return vd},geoConicEqualArea:function(){return ad},geoConicEqualAreaRaw:function(){return rd},geoConicEquidistant:function(){return Ed},geoConicEquidistantRaw:function(){return _d},geoContains:function(){return Nf},geoDistance:function(){return Ef},geoEqualEarth:function(){return Cd},geoEqualEarthRaw:function(){return Ad},geoEquirectangular:function(){return wd},geoEquirectangularRaw:function(){return bd},geoGnomonic:function(){return Nd},geoGnomonicRaw:function(){return Pd},geoGraticule:function(){return Of},geoGraticule10:function(){return Hf},geoIdentity:function(){return Id},geoInterpolate:function(){return Lf},geoLength:function(){return bf},geoMercator:function(){return pd},geoMercatorRaw:function(){return dd},geoNaturalEarth1:function(){return Od},geoNaturalEarth1Raw:function(){return Rd},geoOrthographic:function(){return Ld},geoOrthographicRaw:function(){return Hd},geoPath:function(){return Dh},geoProjection:function(){return ed},geoProjectionMutator:function(){return td},geoRotation:function(){return Us},geoStereographic:function(){return zd},geoStereographicRaw:function(){return jd},geoStream:function(){return yc},geoTransform:function(){return Bh},geoTransverseMercator:function(){return Bd},geoTransverseMercatorRaw:function(){return Dd},gray:function(){return To},hcl:function(){return Lo},hierarchy:function(){return Wd},histogram:function(){return N},hsl:function(){return un},html:function(){return Wl},image:function(){return ql},interpolate:function(){return Rn},interpolateArray:function(){return Mn},interpolateBasis:function(){return hn},interpolateBasisClosed:function(){return dn},interpolateBlues:function(){return zw},interpolateBrBG:function(){return $b},interpolateBuGn:function(){return pw},interpolateBuPu:function(){return gw},interpolateCividis:function(){return Qw},interpolateCool:function(){return Zw},interpolateCubehelix:function(){return lm},interpolateCubehelixDefault:function(){return $w},interpolateCubehelixLong:function(){return um},interpolateDate:function(){return Tn},interpolateDiscrete:function(){return Vp},interpolateGnBu:function(){return yw},interpolateGreens:function(){return Bw},interpolateGreys:function(){return Fw},interpolateHcl:function(){return am},interpolateHclLong:function(){return om},interpolateHsl:function(){return em},interpolateHslLong:function(){return tm},interpolateHue:function(){return Gp},interpolateInferno:function(){return c_},interpolateLab:function(){return nm},interpolateMagma:function(){return u_},interpolateNumber:function(){return An},interpolateNumberArray:function(){return xn},interpolateObject:function(){return Cn},interpolateOrRd:function(){return ww},interpolateOranges:function(){return Xw},interpolatePRGn:function(){return Zb},interpolatePiYG:function(){return ew},interpolatePlasma:function(){return s_},interpolatePuBu:function(){return kw},interpolatePuBuGn:function(){return Ew},interpolatePuOr:function(){return nw},interpolatePuRd:function(){return Sw},interpolatePurples:function(){return Vw},interpolateRainbow:function(){return e_},interpolateRdBu:function(){return aw},interpolateRdGy:function(){return iw},interpolateRdPu:function(){return Aw},interpolateRdYlBu:function(){return uw},interpolateRdYlGn:function(){return sw},interpolateReds:function(){return Ww},interpolateRgb:function(){return bn},interpolateRgbBasis:function(){return _n},interpolateRgbBasisClosed:function(){return En},interpolateRound:function(){return Wp},interpolateSinebow:function(){return a_},interpolateSpectral:function(){return hw},interpolateString:function(){return In},interpolateTransformCss:function(){return Sr},interpolateTransformSvg:function(){return Tr},interpolateTurbo:function(){return o_},interpolateViridis:function(){return l_},interpolateWarm:function(){return Jw},interpolateYlGn:function(){return Iw},interpolateYlGnBu:function(){return Pw},interpolateYlOrBr:function(){return Ow},interpolateYlOrRd:function(){return Lw},interpolateZoom:function(){return Zp},interrupt:function(){return vr},interval:function(){return Lx},isoFormat:function(){return Rx},isoParse:function(){return Hx},json:function(){return Ul},keys:function(){return po},lab:function(){return Ao},lch:function(){return Ho},line:function(){return q_},lineRadial:function(){return $_},linkHorizontal:function(){return iE},linkRadial:function(){return uE},linkVertical:function(){return lE},local:function(){return d_},map:function(){return ro},matcher:function(){return we},max:function(){return H},mean:function(){return L},median:function(){return j},merge:function(){return z},min:function(){return D},mouse:function(){return jn},namespace:function(){return Ce},namespaces:function(){return Ae},nest:function(){return ao},now:function(){return Qn},pack:function(){return gp},packEnclose:function(){return Zd},packSiblings:function(){return fp},pairs:function(){return s},partition:function(){return Ep},path:function(){return Ya},permute:function(){return B},pie:function(){return G_},piecewise:function(){return cm},pointRadial:function(){return Z_},polygonArea:function(){return fm},polygonCentroid:function(){return hm},polygonContains:function(){return vm},polygonHull:function(){return gm},polygonLength:function(){return ym},precisionFixed:function(){return Lu},precisionPrefix:function(){return ju},precisionRound:function(){return zu},quadtree:function(){return tu},quantile:function(){return I},quantize:function(){return sm},radialArea:function(){return J_},radialLine:function(){return $_},randomBates:function(){return km},randomExponential:function(){return Mm},randomIrwinHall:function(){return xm},randomLogNormal:function(){return Em},randomNormal:function(){return _m},randomUniform:function(){return wm},range:function(){return x},rgb:function(){return en},ribbon:function(){return Ka},scaleBand:function(){return Rm},scaleDiverging:function(){return Ib},scaleDivergingLog:function(){return Rb},scaleDivergingPow:function(){return Hb},scaleDivergingSqrt:function(){return Lb},scaleDivergingSymlog:function(){return Ob},scaleIdentity:function(){return Qm},scaleImplicit:function(){return Nm},scaleLinear:function(){return Xm},scaleLog:function(){return ag},scaleOrdinal:function(){return Im},scalePoint:function(){return Hm},scalePow:function(){return dg},scaleQuantile:function(){return mg},scaleQuantize:function(){return gg},scaleSequential:function(){return Mb},scaleSequentialLog:function(){return Sb},scaleSequentialPow:function(){return Ab},scaleSequentialQuantile:function(){return Pb},scaleSequentialSqrt:function(){return Cb},scaleSequentialSymlog:function(){return Tb},scaleSqrt:function(){return pg},scaleSymlog:function(){return ug},scaleThreshold:function(){return vg},scaleTime:function(){return hb},scaleUtc:function(){return Eb},scan:function(){return q},schemeAccent:function(){return Db},schemeBlues:function(){return jw},schemeBrBG:function(){return Qb},schemeBuGn:function(){return dw},schemeBuPu:function(){return mw},schemeCategory10:function(){return zb},schemeDark2:function(){return Bb},schemeGnBu:function(){return vw},schemeGreens:function(){return Dw},schemeGreys:function(){return qw},schemeOrRd:function(){return bw},schemeOranges:function(){return Yw},schemePRGn:function(){return Jb},schemePaired:function(){return qb},schemePastel1:function(){return Fb},schemePastel2:function(){return Ub},schemePiYG:function(){return Kb},schemePuBu:function(){return xw},schemePuBuGn:function(){return _w},schemePuOr:function(){return tw},schemePuRd:function(){return Mw},schemePurples:function(){return Uw},schemeRdBu:function(){return rw},schemeRdGy:function(){return ow},schemeRdPu:function(){return Tw},schemeRdYlBu:function(){return lw},schemeRdYlGn:function(){return cw},schemeReds:function(){return Gw},schemeSet1:function(){return Vb},schemeSet2:function(){return Gb},schemeSet3:function(){return Wb},schemeSpectral:function(){return fw},schemeTableau10:function(){return Yb},schemeYlGn:function(){return Nw},schemeYlGnBu:function(){return Cw},schemeYlOrBr:function(){return Rw},schemeYlOrRd:function(){return Hw},select:function(){return Tt},selectAll:function(){return m_},selection:function(){return St},selector:function(){return ve},selectorAll:function(){return be},set:function(){return ho},shuffle:function(){return F},stack:function(){return bx},stackOffsetDiverging:function(){return _x},stackOffsetExpand:function(){return wx},stackOffsetNone:function(){return gx},stackOffsetSilhouette:function(){return Ex},stackOffsetWiggle:function(){return xx},stackOrderAppearance:function(){return kx},stackOrderAscending:function(){return Sx},stackOrderDescending:function(){return Ax},stackOrderInsideOut:function(){return Cx},stackOrderNone:function(){return vx},stackOrderReverse:function(){return Px},stratify:function(){return Ap},style:function(){return Be},sum:function(){return U},svg:function(){return Yl},symbol:function(){return TE},symbolCircle:function(){return cE},symbolCross:function(){return sE},symbolDiamond:function(){return dE},symbolSquare:function(){return yE},symbolStar:function(){return vE},symbolTriangle:function(){return wE},symbolWye:function(){return ME},symbols:function(){return SE},text:function(){return Ll},thresholdFreedmanDiaconis:function(){return R},thresholdScott:function(){return O},thresholdSturges:function(){return P},tickFormat:function(){return Wm},tickIncrement:function(){return A},tickStep:function(){return C},ticks:function(){return T},timeDay:function(){return Xg},timeDays:function(){return Qg},timeFormat:function(){return Ov},timeFormatDefaultLocale:function(){return tb},timeFormatLocale:function(){return Iv},timeFriday:function(){return zg},timeFridays:function(){return Gg},timeHour:function(){return Jg},timeHours:function(){return Zg},timeInterval:function(){return wg},timeMillisecond:function(){return iv},timeMilliseconds:function(){return lv},timeMinute:function(){return ev},timeMinutes:function(){return tv},timeMonday:function(){return Og},timeMondays:function(){return qg},timeMonth:function(){return Mg},timeMonths:function(){return Sg},timeParse:function(){return Hv},timeSaturday:function(){return Dg},timeSaturdays:function(){return Wg},timeSecond:function(){return rv},timeSeconds:function(){return av},timeSunday:function(){return Rg},timeSundays:function(){return Bg},timeThursday:function(){return jg},timeThursdays:function(){return Vg},timeTuesday:function(){return Hg},timeTuesdays:function(){return Fg},timeWednesday:function(){return Lg},timeWednesdays:function(){return Ug},timeWeek:function(){return Rg},timeWeeks:function(){return Bg},timeYear:function(){return Eg},timeYears:function(){return xg},timeout:function(){return rr},timer:function(){return Zn},timerFlush:function(){return Kn},touch:function(){return Ln},touches:function(){return g_},transition:function(){return Xr},transpose:function(){return V},tree:function(){return Hp},treemap:function(){return Bp},treemapBinary:function(){return qp},treemapDice:function(){return _p},treemapResquarify:function(){return Up},treemapSlice:function(){return Lp},treemapSliceDice:function(){return Fp},treemapSquarify:function(){return Dp},tsv:function(){return Bl},tsvFormat:function(){return zi},tsvFormatBody:function(){return Di},tsvFormatRow:function(){return qi},tsvFormatRows:function(){return Bi},tsvFormatValue:function(){return Fi},tsvParse:function(){return Li},tsvParseRows:function(){return ji},utcDay:function(){return kv},utcDays:function(){return Mv},utcFormat:function(){return Lv},utcFriday:function(){return pv},utcFridays:function(){return _v},utcHour:function(){return vb},utcHours:function(){return yb},utcMillisecond:function(){return iv},utcMilliseconds:function(){return lv},utcMinute:function(){return wb},utcMinutes:function(){return _b},utcMonday:function(){return sv},utcMondays:function(){return vv},utcMonth:function(){return pb},utcMonths:function(){return mb},utcParse:function(){return jv},utcSaturday:function(){return mv},utcSaturdays:function(){return Ev},utcSecond:function(){return rv},utcSeconds:function(){return av},utcSunday:function(){return cv},utcSundays:function(){return gv},utcThursday:function(){return dv},utcThursdays:function(){return wv},utcTuesday:function(){return fv},utcTuesdays:function(){return yv},utcWednesday:function(){return hv},utcWednesdays:function(){return bv},utcWeek:function(){return cv},utcWeeks:function(){return gv},utcYear:function(){return Tv},utcYears:function(){return Av},values:function(){return mo},variance:function(){return m},version:function(){return r},voronoi:function(){return Ek},window:function(){return Le},xml:function(){return Gl},zip:function(){return W},zoom:function(){return Lk},zoomIdentity:function(){return Sk},zoomTransform:function(){return Tk}});var r="5.16.0";function a(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function o(e){var t;return 1===e.length&&(t=e,e=function(e,n){return a(t(e),n)}),{left:function(t,n,r,a){for(null==r&&(r=0),null==a&&(a=t.length);r<a;){var o=r+a>>>1;e(t[o],n)<0?r=o+1:a=o}return r},right:function(t,n,r,a){for(null==r&&(r=0),null==a&&(a=t.length);r<a;){var o=r+a>>>1;e(t[o],n)>0?a=o:r=o+1}return r}}}var i=o(a),l=i.right,u=i.left,c=l;function s(e,t){null==t&&(t=f);for(var n=0,r=e.length-1,a=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(a,a=e[++n]);return o}function f(e,t){return[e,t]}function h(e,t,n){var r,a,o,i,l=e.length,u=t.length,c=new Array(l*u);for(null==n&&(n=f),r=o=0;r<l;++r)for(i=e[r],a=0;a<u;++a,++o)c[o]=n(i,t[a]);return c}function d(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function p(e){return null===e?NaN:+e}function m(e,t){var n,r,a=e.length,o=0,i=-1,l=0,u=0;if(null==t)for(;++i<a;)isNaN(n=p(e[i]))||(u+=(r=n-l)*(n-(l+=r/++o)));else for(;++i<a;)isNaN(n=p(t(e[i],i,e)))||(u+=(r=n-l)*(n-(l+=r/++o)));if(o>1)return u/(o-1)}function g(e,t){var n=m(e,t);return n?Math.sqrt(n):n}function v(e,t){var n,r,a,o=e.length,i=-1;if(null==t){for(;++i<o;)if(null!=(n=e[i])&&n>=n)for(r=a=n;++i<o;)null!=(n=e[i])&&(r>n&&(r=n),a<n&&(a=n))}else for(;++i<o;)if(null!=(n=t(e[i],i,e))&&n>=n)for(r=a=n;++i<o;)null!=(n=t(e[i],i,e))&&(r>n&&(r=n),a<n&&(a=n));return[r,a]}var y=Array.prototype,b=y.slice,w=y.map;function _(e){return function(){return e}}function E(e){return e}function x(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var r=-1,a=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(a);++r<a;)o[r]=e+r*n;return o}var k=Math.sqrt(50),M=Math.sqrt(10),S=Math.sqrt(2);function T(e,t,n){var r,a,o,i,l=-1;if(n=+n,(e=+e)===(t=+t)&&n>0)return[e];if((r=t<e)&&(a=e,e=t,t=a),0===(i=A(e,t,n))||!isFinite(i))return[];if(i>0)for(e=Math.ceil(e/i),t=Math.floor(t/i),o=new Array(a=Math.ceil(t-e+1));++l<a;)o[l]=(e+l)*i;else for(e=Math.floor(e*i),t=Math.ceil(t*i),o=new Array(a=Math.ceil(e-t+1));++l<a;)o[l]=(e-l)/i;return r&&o.reverse(),o}function A(e,t,n){var r=(t-e)/Math.max(0,n),a=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,a);return a>=0?(o>=k?10:o>=M?5:o>=S?2:1)*Math.pow(10,a):-Math.pow(10,-a)/(o>=k?10:o>=M?5:o>=S?2:1)}function C(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),a=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/a;return o>=k?a*=10:o>=M?a*=5:o>=S&&(a*=2),t<e?-a:a}function P(e){return Math.ceil(Math.log(e.length)/Math.LN2)+1}function N(){var e=E,t=v,n=P;function r(r){var a,o,i=r.length,l=new Array(i);for(a=0;a<i;++a)l[a]=e(r[a],a,r);var u=t(l),s=u[0],f=u[1],h=n(l,s,f);Array.isArray(h)||(h=C(s,f,h),h=x(Math.ceil(s/h)*h,f,h));for(var d=h.length;h[0]<=s;)h.shift(),--d;for(;h[d-1]>f;)h.pop(),--d;var p,m=new Array(d+1);for(a=0;a<=d;++a)(p=m[a]=[]).x0=a>0?h[a-1]:s,p.x1=a<d?h[a]:f;for(a=0;a<i;++a)s<=(o=l[a])&&o<=f&&m[c(h,o,0,d)].push(r[a]);return m}return r.value=function(t){return arguments.length?(e="function"==typeof t?t:_(t),r):e},r.domain=function(e){return arguments.length?(t="function"==typeof e?e:_([e[0],e[1]]),r):t},r.thresholds=function(e){return arguments.length?(n="function"==typeof e?e:Array.isArray(e)?_(b.call(e)):_(e),r):n},r}function I(e,t,n){if(null==n&&(n=p),r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,a=(r-1)*t,o=Math.floor(a),i=+n(e[o],o,e);return i+(+n(e[o+1],o+1,e)-i)*(a-o)}}function R(e,t,n){return e=w.call(e,p).sort(a),Math.ceil((n-t)/(2*(I(e,.75)-I(e,.25))*Math.pow(e.length,-1/3)))}function O(e,t,n){return Math.ceil((n-t)/(3.5*g(e)*Math.pow(e.length,-1/3)))}function H(e,t){var n,r,a=e.length,o=-1;if(null==t){for(;++o<a;)if(null!=(n=e[o])&&n>=n)for(r=n;++o<a;)null!=(n=e[o])&&n>r&&(r=n)}else for(;++o<a;)if(null!=(n=t(e[o],o,e))&&n>=n)for(r=n;++o<a;)null!=(n=t(e[o],o,e))&&n>r&&(r=n);return r}function L(e,t){var n,r=e.length,a=r,o=-1,i=0;if(null==t)for(;++o<r;)isNaN(n=p(e[o]))?--a:i+=n;else for(;++o<r;)isNaN(n=p(t(e[o],o,e)))?--a:i+=n;if(a)return i/a}function j(e,t){var n,r=e.length,o=-1,i=[];if(null==t)for(;++o<r;)isNaN(n=p(e[o]))||i.push(n);else for(;++o<r;)isNaN(n=p(t(e[o],o,e)))||i.push(n);return I(i.sort(a),.5)}function z(e){for(var t,n,r,a=e.length,o=-1,i=0;++o<a;)i+=e[o].length;for(n=new Array(i);--a>=0;)for(t=(r=e[a]).length;--t>=0;)n[--i]=r[t];return n}function D(e,t){var n,r,a=e.length,o=-1;if(null==t){for(;++o<a;)if(null!=(n=e[o])&&n>=n)for(r=n;++o<a;)null!=(n=e[o])&&r>n&&(r=n)}else for(;++o<a;)if(null!=(n=t(e[o],o,e))&&n>=n)for(r=n;++o<a;)null!=(n=t(e[o],o,e))&&r>n&&(r=n);return r}function B(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r}function q(e,t){if(n=e.length){var n,r,o=0,i=0,l=e[i];for(null==t&&(t=a);++o<n;)(t(r=e[o],l)<0||0!==t(l,l))&&(l=r,i=o);return 0===t(l,l)?i:void 0}}function F(e,t,n){for(var r,a,o=(null==n?e.length:n)-(t=null==t?0:+t);o;)a=Math.random()*o--|0,r=e[o+t],e[o+t]=e[a+t],e[a+t]=r;return e}function U(e,t){var n,r=e.length,a=-1,o=0;if(null==t)for(;++a<r;)(n=+e[a])&&(o+=n);else for(;++a<r;)(n=+t(e[a],a,e))&&(o+=n);return o}function V(e){if(!(a=e.length))return[];for(var t=-1,n=D(e,G),r=new Array(n);++t<n;)for(var a,o=-1,i=r[t]=new Array(a);++o<a;)i[o]=e[o][t];return r}function G(e){return e.length}function W(){return V(arguments)}var Y=Array.prototype.slice;function X(e){return e}var Q=1,$=2,J=3,Z=4,K=1e-6;function ee(e){return"translate("+(e+.5)+",0)"}function te(e){return"translate(0,"+(e+.5)+")"}function ne(e){return function(t){return+e(t)}}function re(e){var t=Math.max(0,e.bandwidth()-1)/2;return e.round()&&(t=Math.round(t)),function(n){return+e(n)+t}}function ae(){return!this.__axis}function oe(e,t){var n=[],r=null,a=null,o=6,i=6,l=3,u=e===Q||e===Z?-1:1,c=e===Z||e===$?"x":"y",s=e===Q||e===J?ee:te;function f(f){var h=null==r?t.ticks?t.ticks.apply(t,n):t.domain():r,d=null==a?t.tickFormat?t.tickFormat.apply(t,n):X:a,p=Math.max(o,0)+l,m=t.range(),g=+m[0]+.5,v=+m[m.length-1]+.5,y=(t.bandwidth?re:ne)(t.copy()),b=f.selection?f.selection():f,w=b.selectAll(".domain").data([null]),_=b.selectAll(".tick").data(h,t).order(),E=_.exit(),x=_.enter().append("g").attr("class","tick"),k=_.select("line"),M=_.select("text");w=w.merge(w.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),_=_.merge(x),k=k.merge(x.append("line").attr("stroke","currentColor").attr(c+"2",u*o)),M=M.merge(x.append("text").attr("fill","currentColor").attr(c,u*p).attr("dy",e===Q?"0em":e===J?"0.71em":"0.32em")),f!==b&&(w=w.transition(f),_=_.transition(f),k=k.transition(f),M=M.transition(f),E=E.transition(f).attr("opacity",K).attr("transform",(function(e){return isFinite(e=y(e))?s(e):this.getAttribute("transform")})),x.attr("opacity",K).attr("transform",(function(e){var t=this.parentNode.__axis;return s(t&&isFinite(t=t(e))?t:y(e))}))),E.remove(),w.attr("d",e===Z||e==$?i?"M"+u*i+","+g+"H0.5V"+v+"H"+u*i:"M0.5,"+g+"V"+v:i?"M"+g+","+u*i+"V0.5H"+v+"V"+u*i:"M"+g+",0.5H"+v),_.attr("opacity",1).attr("transform",(function(e){return s(y(e))})),k.attr(c+"2",u*o),M.attr(c,u*p).text(d),b.filter(ae).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===$?"start":e===Z?"end":"middle"),b.each((function(){this.__axis=y}))}return f.scale=function(e){return arguments.length?(t=e,f):t},f.ticks=function(){return n=Y.call(arguments),f},f.tickArguments=function(e){return arguments.length?(n=null==e?[]:Y.call(e),f):n.slice()},f.tickValues=function(e){return arguments.length?(r=null==e?null:Y.call(e),f):r&&r.slice()},f.tickFormat=function(e){return arguments.length?(a=e,f):a},f.tickSize=function(e){return arguments.length?(o=i=+e,f):o},f.tickSizeInner=function(e){return arguments.length?(o=+e,f):o},f.tickSizeOuter=function(e){return arguments.length?(i=+e,f):i},f.tickPadding=function(e){return arguments.length?(l=+e,f):l},f}function ie(e){return oe(Q,e)}function le(e){return oe($,e)}function ue(e){return oe(J,e)}function ce(e){return oe(Z,e)}var se={value:function(){}};function fe(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new he(r)}function he(e){this._=e}function de(e,t){for(var n,r=0,a=e.length;r<a;++r)if((n=e[r]).name===t)return n.value}function pe(e,t,n){for(var r=0,a=e.length;r<a;++r)if(e[r].name===t){e[r]=se,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}he.prototype=fe.prototype={constructor:he,on:function(e,t){var n,r,a=this._,o=(r=a,(e+"").trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}}))),i=-1,l=o.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++i<l;)if(n=(e=o[i]).type)a[n]=pe(a[n],e.name,t);else if(null==t)for(n in a)a[n]=pe(a[n],e.name,null);return this}for(;++i<l;)if((n=(e=o[i]).type)&&(n=de(a[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new he(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,a=new Array(n),o=0;o<n;++o)a[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,n=(r=this._[e]).length;o<n;++o)r[o].value.apply(t,a)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],a=0,o=r.length;a<o;++a)r[a].value.apply(t,n)}};var me=fe;function ge(){}function ve(e){return null==e?ge:function(){return this.querySelector(e)}}function ye(){return[]}function be(e){return null==e?ye:function(){return this.querySelectorAll(e)}}function we(e){return function(){return this.matches(e)}}function _e(e){return new Array(e.length)}function Ee(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Ee.prototype={constructor:Ee,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var xe="$";function ke(e,t,n,r,a,o){for(var i,l=0,u=t.length,c=o.length;l<c;++l)(i=t[l])?(i.__data__=o[l],r[l]=i):n[l]=new Ee(e,o[l]);for(;l<u;++l)(i=t[l])&&(a[l]=i)}function Me(e,t,n,r,a,o,i){var l,u,c,s={},f=t.length,h=o.length,d=new Array(f);for(l=0;l<f;++l)(u=t[l])&&(d[l]=c=xe+i.call(u,u.__data__,l,t),c in s?a[l]=u:s[c]=u);for(l=0;l<h;++l)(u=s[c=xe+i.call(e,o[l],l,o)])?(r[l]=u,u.__data__=o[l],s[c]=null):n[l]=new Ee(e,o[l]);for(l=0;l<f;++l)(u=t[l])&&s[d[l]]===u&&(a[l]=u)}function Se(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}var Te="http://www.w3.org/1999/xhtml",Ae={svg:"http://www.w3.org/2000/svg",xhtml:Te,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ce(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),Ae.hasOwnProperty(t)?{space:Ae[t],local:e}:e}function Pe(e){return function(){this.removeAttribute(e)}}function Ne(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ie(e,t){return function(){this.setAttribute(e,t)}}function Re(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Oe(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function He(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Le(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function je(e){return function(){this.style.removeProperty(e)}}function ze(e,t,n){return function(){this.style.setProperty(e,t,n)}}function De(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Be(e,t){return e.style.getPropertyValue(t)||Le(e).getComputedStyle(e,null).getPropertyValue(t)}function qe(e){return function(){delete this[e]}}function Fe(e,t){return function(){this[e]=t}}function Ue(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function Ve(e){return e.trim().split(/^|\s+/)}function Ge(e){return e.classList||new We(e)}function We(e){this._node=e,this._names=Ve(e.getAttribute("class")||"")}function Ye(e,t){for(var n=Ge(e),r=-1,a=t.length;++r<a;)n.add(t[r])}function Xe(e,t){for(var n=Ge(e),r=-1,a=t.length;++r<a;)n.remove(t[r])}function Qe(e){return function(){Ye(this,e)}}function $e(e){return function(){Xe(this,e)}}function Je(e,t){return function(){(t.apply(this,arguments)?Ye:Xe)(this,e)}}function Ze(){this.textContent=""}function Ke(e){return function(){this.textContent=e}}function et(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function tt(){this.innerHTML=""}function nt(e){return function(){this.innerHTML=e}}function rt(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function at(){this.nextSibling&&this.parentNode.appendChild(this)}function ot(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function it(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Te&&t.documentElement.namespaceURI===Te?t.createElement(e):t.createElementNS(n,e)}}function lt(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ut(e){var t=Ce(e);return(t.local?lt:it)(t)}function ct(){return null}function st(){var e=this.parentNode;e&&e.removeChild(this)}function ft(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ht(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}We.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var dt={},pt=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(dt={mouseenter:"mouseover",mouseleave:"mouseout"}));function mt(e,t,n){return e=gt(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function gt(e,t,n){return function(r){var a=pt;pt=r;try{e.call(this,this.__data__,t,n)}finally{pt=a}}}function vt(e){return function(){var t=this.__on;if(t){for(var n,r=0,a=-1,o=t.length;r<o;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++a]=n:this.removeEventListener(n.type,n.listener,n.capture);++a?t.length=a:delete this.__on}}}function yt(e,t,n){var r=dt.hasOwnProperty(e.type)?mt:gt;return function(a,o,i){var l,u=this.__on,c=r(t,o,i);if(u)for(var s=0,f=u.length;s<f;++s)if((l=u[s]).type===e.type&&l.name===e.name)return this.removeEventListener(l.type,l.listener,l.capture),this.addEventListener(l.type,l.listener=c,l.capture=n),void(l.value=t);this.addEventListener(e.type,c,n),l={type:e.type,name:e.name,value:t,listener:c,capture:n},u?u.push(l):this.__on=[l]}}function bt(e,t,n,r){var a=pt;e.sourceEvent=pt,pt=e;try{return t.apply(n,r)}finally{pt=a}}function wt(e,t,n){var r=Le(e),a=r.CustomEvent;"function"==typeof a?a=new a(t,n):(a=r.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function _t(e,t){return function(){return wt(this,e,t)}}function Et(e,t){return function(){return wt(this,e,t.apply(this,arguments))}}var xt=[null];function kt(e,t){this._groups=e,this._parents=t}function Mt(){return new kt([[document.documentElement]],xt)}kt.prototype=Mt.prototype={constructor:kt,select:function(e){"function"!=typeof e&&(e=ve(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var o,i,l=t[a],u=l.length,c=r[a]=new Array(u),s=0;s<u;++s)(o=l[s])&&(i=e.call(o,o.__data__,s,l))&&("__data__"in o&&(i.__data__=o.__data__),c[s]=i);return new kt(r,this._parents)},selectAll:function(e){"function"!=typeof e&&(e=be(e));for(var t=this._groups,n=t.length,r=[],a=[],o=0;o<n;++o)for(var i,l=t[o],u=l.length,c=0;c<u;++c)(i=l[c])&&(r.push(e.call(i,i.__data__,c,l)),a.push(i));return new kt(r,a)},filter:function(e){"function"!=typeof e&&(e=we(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var o,i=t[a],l=i.length,u=r[a]=[],c=0;c<l;++c)(o=i[c])&&e.call(o,o.__data__,c,i)&&u.push(o);return new kt(r,this._parents)},data:function(e,t){if(!e)return d=new Array(this.size()),c=-1,this.each((function(e){d[++c]=e})),d;var n=t?Me:ke,r=this._parents,a=this._groups;"function"!=typeof e&&(e=function(e){return function(){return e}}(e));for(var o=a.length,i=new Array(o),l=new Array(o),u=new Array(o),c=0;c<o;++c){var s=r[c],f=a[c],h=f.length,d=e.call(s,s&&s.__data__,c,r),p=d.length,m=l[c]=new Array(p),g=i[c]=new Array(p);n(s,f,m,g,u[c]=new Array(h),d,t);for(var v,y,b=0,w=0;b<p;++b)if(v=m[b]){for(b>=w&&(w=b+1);!(y=g[w])&&++w<p;);v._next=y||null}}return(i=new kt(i,r))._enter=l,i._exit=u,i},enter:function(){return new kt(this._enter||this._groups.map(_e),this._parents)},exit:function(){return new kt(this._exit||this._groups.map(_e),this._parents)},join:function(e,t,n){var r=this.enter(),a=this,o=this.exit();return r="function"==typeof e?e(r):r.append(e+""),null!=t&&(a=t(a)),null==n?o.remove():n(o),r&&a?r.merge(a).order():a},merge:function(e){for(var t=this._groups,n=e._groups,r=t.length,a=n.length,o=Math.min(r,a),i=new Array(r),l=0;l<o;++l)for(var u,c=t[l],s=n[l],f=c.length,h=i[l]=new Array(f),d=0;d<f;++d)(u=c[d]||s[d])&&(h[d]=u);for(;l<r;++l)i[l]=t[l];return new kt(i,this._parents)},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,a=e[t],o=a.length-1,i=a[o];--o>=0;)(r=a[o])&&(i&&4^r.compareDocumentPosition(i)&&i.parentNode.insertBefore(r,i),i=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=Se);for(var n=this._groups,r=n.length,a=new Array(r),o=0;o<r;++o){for(var i,l=n[o],u=l.length,c=a[o]=new Array(u),s=0;s<u;++s)(i=l[s])&&(c[s]=i);c.sort(t)}return new kt(a,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){var e=new Array(this.size()),t=-1;return this.each((function(){e[++t]=this})),e},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],a=0,o=r.length;a<o;++a){var i=r[a];if(i)return i}return null},size:function(){var e=0;return this.each((function(){++e})),e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var a,o=t[n],i=0,l=o.length;i<l;++i)(a=o[i])&&e.call(a,a.__data__,i,o);return this},attr:function(e,t){var n=Ce(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?Ne:Pe:"function"==typeof t?n.local?He:Oe:n.local?Re:Ie)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?je:"function"==typeof t?De:ze)(e,t,null==n?"":n)):Be(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?qe:"function"==typeof t?Ue:Fe)(e,t)):this.node()[e]},classed:function(e,t){var n=Ve(e+"");if(arguments.length<2){for(var r=Ge(this.node()),a=-1,o=n.length;++a<o;)if(!r.contains(n[a]))return!1;return!0}return this.each(("function"==typeof t?Je:t?Qe:$e)(n,t))},text:function(e){return arguments.length?this.each(null==e?Ze:("function"==typeof e?et:Ke)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?tt:("function"==typeof e?rt:nt)(e)):this.node().innerHTML},raise:function(){return this.each(at)},lower:function(){return this.each(ot)},append:function(e){var t="function"==typeof e?e:ut(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:ut(e),r=null==t?ct:"function"==typeof t?t:ve(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(st)},clone:function(e){return this.select(e?ht:ft)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,a,o=function(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}(e+""),i=o.length;if(!(arguments.length<2)){for(l=t?yt:vt,null==n&&(n=!1),r=0;r<i;++r)this.each(l(o[r],t,n));return this}var l=this.node().__on;if(l)for(var u,c=0,s=l.length;c<s;++c)for(r=0,u=l[c];r<i;++r)if((a=o[r]).type===u.type&&a.name===u.name)return u.value},dispatch:function(e,t){return this.each(("function"==typeof t?Et:_t)(e,t))}};var St=Mt;function Tt(e){return"string"==typeof e?new kt([[document.querySelector(e)]],[document.documentElement]):new kt([[e]],xt)}function At(){pt.stopImmediatePropagation()}function Ct(){pt.preventDefault(),pt.stopImmediatePropagation()}function Pt(e){var t=e.document.documentElement,n=Tt(e).on("dragstart.drag",Ct,!0);"onselectstart"in t?n.on("selectstart.drag",Ct,!0):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Nt(e,t){var n=e.document.documentElement,r=Tt(e).on("dragstart.drag",null);t&&(r.on("click.drag",Ct,!0),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function It(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Rt(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ot(){}var Ht=.7,Lt=1/Ht,jt="\\s*([+-]?\\d+)\\s*",zt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Dt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Bt=/^#([0-9a-f]{3,8})$/,qt=new RegExp("^rgb\\("+[jt,jt,jt]+"\\)$"),Ft=new RegExp("^rgb\\("+[Dt,Dt,Dt]+"\\)$"),Ut=new RegExp("^rgba\\("+[jt,jt,jt,zt]+"\\)$"),Vt=new RegExp("^rgba\\("+[Dt,Dt,Dt,zt]+"\\)$"),Gt=new RegExp("^hsl\\("+[zt,Dt,Dt]+"\\)$"),Wt=new RegExp("^hsla\\("+[zt,Dt,Dt,zt]+"\\)$"),Yt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Xt(){return this.rgb().formatHex()}function Qt(){return this.rgb().formatRgb()}function $t(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Bt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Jt(t):3===n?new tn(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Zt(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Zt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=qt.exec(e))?new tn(t[1],t[2],t[3],1):(t=Ft.exec(e))?new tn(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Ut.exec(e))?Zt(t[1],t[2],t[3],t[4]):(t=Vt.exec(e))?Zt(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Gt.exec(e))?on(t[1],t[2]/100,t[3]/100,1):(t=Wt.exec(e))?on(t[1],t[2]/100,t[3]/100,t[4]):Yt.hasOwnProperty(e)?Jt(Yt[e]):"transparent"===e?new tn(NaN,NaN,NaN,0):null}function Jt(e){return new tn(e>>16&255,e>>8&255,255&e,1)}function Zt(e,t,n,r){return r<=0&&(e=t=n=NaN),new tn(e,t,n,r)}function Kt(e){return e instanceof Ot||(e=$t(e)),e?new tn((e=e.rgb()).r,e.g,e.b,e.opacity):new tn}function en(e,t,n,r){return 1===arguments.length?Kt(e):new tn(e,t,n,null==r?1:r)}function tn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function nn(){return"#"+an(this.r)+an(this.g)+an(this.b)}function rn(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function an(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function on(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new cn(e,t,n,r)}function ln(e){if(e instanceof cn)return new cn(e.h,e.s,e.l,e.opacity);if(e instanceof Ot||(e=$t(e)),!e)return new cn;if(e instanceof cn)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),o=Math.max(t,n,r),i=NaN,l=o-a,u=(o+a)/2;return l?(i=t===o?(n-r)/l+6*(n<r):n===o?(r-t)/l+2:(t-n)/l+4,l/=u<.5?o+a:2-o-a,i*=60):l=u>0&&u<1?0:i,new cn(i,l,u,e.opacity)}function un(e,t,n,r){return 1===arguments.length?ln(e):new cn(e,t,n,null==r?1:r)}function cn(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function sn(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function fn(e,t,n,r,a){var o=e*e,i=o*e;return((1-3*e+3*o-i)*t+(4-6*o+3*i)*n+(1+3*e+3*o-3*i)*r+i*a)/6}function hn(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),a=e[r],o=e[r+1],i=r>0?e[r-1]:2*a-o,l=r<t-1?e[r+2]:2*o-a;return fn((n-r/t)*t,i,a,o,l)}}function dn(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),a=e[(r+t-1)%t],o=e[r%t],i=e[(r+1)%t],l=e[(r+2)%t];return fn((n-r/t)*t,a,o,i,l)}}function pn(e){return function(){return e}}function mn(e,t){return function(n){return e+n*t}}function gn(e,t){var n=t-e;return n?mn(e,n>180||n<-180?n-360*Math.round(n/360):n):pn(isNaN(e)?t:e)}function vn(e){return 1==(e=+e)?yn:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):pn(isNaN(t)?n:t)}}function yn(e,t){var n=t-e;return n?mn(e,n):pn(isNaN(e)?t:e)}It(Ot,$t,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Xt,formatHex:Xt,formatHsl:function(){return ln(this).formatHsl()},formatRgb:Qt,toString:Qt}),It(tn,en,Rt(Ot,{brighter:function(e){return e=null==e?Lt:Math.pow(Lt,e),new tn(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?Ht:Math.pow(Ht,e),new tn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:nn,formatHex:nn,formatRgb:rn,toString:rn})),It(cn,un,Rt(Ot,{brighter:function(e){return e=null==e?Lt:Math.pow(Lt,e),new cn(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?Ht:Math.pow(Ht,e),new cn(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new tn(sn(e>=240?e-240:e+120,a,r),sn(e,a,r),sn(e<120?e+240:e-120,a,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var bn=function e(t){var n=vn(t);function r(e,t){var r=n((e=en(e)).r,(t=en(t)).r),a=n(e.g,t.g),o=n(e.b,t.b),i=yn(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=a(t),e.b=o(t),e.opacity=i(t),e+""}}return r.gamma=e,r}(1);function wn(e){return function(t){var n,r,a=t.length,o=new Array(a),i=new Array(a),l=new Array(a);for(n=0;n<a;++n)r=en(t[n]),o[n]=r.r||0,i[n]=r.g||0,l[n]=r.b||0;return o=e(o),i=e(i),l=e(l),r.opacity=1,function(e){return r.r=o(e),r.g=i(e),r.b=l(e),r+""}}}var _n=wn(hn),En=wn(dn);function xn(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,a=t.slice();return function(o){for(n=0;n<r;++n)a[n]=e[n]*(1-o)+t[n]*o;return a}}function kn(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Mn(e,t){return(kn(t)?xn:Sn)(e,t)}function Sn(e,t){var n,r=t?t.length:0,a=e?Math.min(r,e.length):0,o=new Array(a),i=new Array(r);for(n=0;n<a;++n)o[n]=Rn(e[n],t[n]);for(;n<r;++n)i[n]=t[n];return function(e){for(n=0;n<a;++n)i[n]=o[n](e);return i}}function Tn(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function An(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Cn(e,t){var n,r={},a={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=Rn(e[n],t[n]):a[n]=t[n];return function(e){for(n in r)a[n]=r[n](e);return a}}var Pn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Nn=new RegExp(Pn.source,"g");function In(e,t){var n,r,a,o=Pn.lastIndex=Nn.lastIndex=0,i=-1,l=[],u=[];for(e+="",t+="";(n=Pn.exec(e))&&(r=Nn.exec(t));)(a=r.index)>o&&(a=t.slice(o,a),l[i]?l[i]+=a:l[++i]=a),(n=n[0])===(r=r[0])?l[i]?l[i]+=r:l[++i]=r:(l[++i]=null,u.push({i:i,x:An(n,r)})),o=Nn.lastIndex;return o<t.length&&(a=t.slice(o),l[i]?l[i]+=a:l[++i]=a),l.length<2?u[0]?function(e){return function(t){return e(t)+""}}(u[0].x):function(e){return function(){return e}}(t):(t=u.length,function(e){for(var n,r=0;r<t;++r)l[(n=u[r]).i]=n.x(e);return l.join("")})}function Rn(e,t){var n,r=typeof t;return null==t||"boolean"===r?pn(t):("number"===r?An:"string"===r?(n=$t(t))?(t=n,bn):In:t instanceof $t?bn:t instanceof Date?Tn:kn(t)?xn:Array.isArray(t)?Sn:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?Cn:An)(e,t)}function On(){for(var e,t=pt;e=t.sourceEvent;)t=e;return t}function Hn(e,t){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}var a=e.getBoundingClientRect();return[t.clientX-a.left-e.clientLeft,t.clientY-a.top-e.clientTop]}function Ln(e,t,n){arguments.length<3&&(n=t,t=On().changedTouches);for(var r,a=0,o=t?t.length:0;a<o;++a)if((r=t[a]).identifier===n)return Hn(e,r);return null}function jn(e){var t=On();return t.changedTouches&&(t=t.changedTouches[0]),Hn(e,t)}var zn,Dn,Bn=0,qn=0,Fn=0,Un=1e3,Vn=0,Gn=0,Wn=0,Yn="object"==typeof performance&&performance.now?performance:Date,Xn="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Qn(){return Gn||(Xn($n),Gn=Yn.now()+Wn)}function $n(){Gn=0}function Jn(){this._call=this._time=this._next=null}function Zn(e,t,n){var r=new Jn;return r.restart(e,t,n),r}function Kn(){Qn(),++Bn;for(var e,t=zn;t;)(e=Gn-t._time)>=0&&t._call.call(null,e),t=t._next;--Bn}function er(){Gn=(Vn=Yn.now())+Wn,Bn=qn=0;try{Kn()}finally{Bn=0,function(){var e,t,n=zn,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:zn=t);Dn=e,nr(r)}(),Gn=0}}function tr(){var e=Yn.now(),t=e-Vn;t>Un&&(Wn-=t,Vn=e)}function nr(e){Bn||(qn&&(qn=clearTimeout(qn)),e-Gn>24?(e<1/0&&(qn=setTimeout(er,e-Yn.now()-Wn)),Fn&&(Fn=clearInterval(Fn))):(Fn||(Vn=Yn.now(),Fn=setInterval(tr,Un)),Bn=1,Xn(er)))}function rr(e,t,n){var r=new Jn;return t=null==t?0:+t,r.restart((function(n){r.stop(),e(n+t)}),t,n),r}Jn.prototype=Zn.prototype={constructor:Jn,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?Qn():+n)+(null==t?0:+t),this._next||Dn===this||(Dn?Dn._next=this:zn=this,Dn=this),this._call=e,this._time=n,nr()},stop:function(){this._call&&(this._call=null,this._time=1/0,nr())}};var ar=me("start","end","cancel","interrupt"),or=[],ir=0,lr=1,ur=2,cr=3,sr=4,fr=5,hr=6;function dr(e,t,n,r,a,o){var i=e.__transition;if(i){if(n in i)return}else e.__transition={};!function(e,t,n){var r,a=e.__transition;function o(e){n.state=lr,n.timer.restart(i,n.delay,n.time),n.delay<=e&&i(e-n.delay)}function i(o){var c,s,f,h;if(n.state!==lr)return u();for(c in a)if((h=a[c]).name===n.name){if(h.state===cr)return rr(i);h.state===sr?(h.state=hr,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete a[c]):+c<t&&(h.state=hr,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete a[c])}if(rr((function(){n.state===cr&&(n.state=sr,n.timer.restart(l,n.delay,n.time),l(o))})),n.state=ur,n.on.call("start",e,e.__data__,n.index,n.group),n.state===ur){for(n.state=cr,r=new Array(f=n.tween.length),c=0,s=-1;c<f;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++s]=h);r.length=s+1}}function l(t){for(var a=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(u),n.state=fr,1),o=-1,i=r.length;++o<i;)r[o].call(e,a);n.state===fr&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){for(var r in n.state=hr,n.timer.stop(),delete a[t],a)return;delete e.__transition}a[t]=n,n.timer=Zn(o,0,n.time)}(e,n,{name:t,index:r,group:a,on:ar,tween:or,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:ir})}function pr(e,t){var n=gr(e,t);if(n.state>ir)throw new Error("too late; already scheduled");return n}function mr(e,t){var n=gr(e,t);if(n.state>cr)throw new Error("too late; already running");return n}function gr(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function vr(e,t){var n,r,a,o=e.__transition,i=!0;if(o){for(a in t=null==t?null:t+"",o)(n=o[a]).name===t?(r=n.state>ur&&n.state<fr,n.state=hr,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete o[a]):i=!1;i&&delete e.__transition}}var yr,br,wr,_r,Er=180/Math.PI,xr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function kr(e,t,n,r,a,o){var i,l,u;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,u/=l),e*r<t*n&&(e=-e,t=-t,u=-u,i=-i),{translateX:a,translateY:o,rotate:Math.atan2(t,e)*Er,skewX:Math.atan(u)*Er,scaleX:i,scaleY:l}}function Mr(e,t,n,r){function a(e){return e.length?e.pop()+" ":""}return function(o,i){var l=[],u=[];return o=e(o),i=e(i),function(e,r,a,o,i,l){if(e!==a||r!==o){var u=i.push("translate(",null,t,null,n);l.push({i:u-4,x:An(e,a)},{i:u-2,x:An(r,o)})}else(a||o)&&i.push("translate("+a+t+o+n)}(o.translateX,o.translateY,i.translateX,i.translateY,l,u),function(e,t,n,o){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),o.push({i:n.push(a(n)+"rotate(",null,r)-2,x:An(e,t)})):t&&n.push(a(n)+"rotate("+t+r)}(o.rotate,i.rotate,l,u),function(e,t,n,o){e!==t?o.push({i:n.push(a(n)+"skewX(",null,r)-2,x:An(e,t)}):t&&n.push(a(n)+"skewX("+t+r)}(o.skewX,i.skewX,l,u),function(e,t,n,r,o,i){if(e!==n||t!==r){var l=o.push(a(o)+"scale(",null,",",null,")");i.push({i:l-4,x:An(e,n)},{i:l-2,x:An(t,r)})}else 1===n&&1===r||o.push(a(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,i.scaleX,i.scaleY,l,u),o=i=null,function(e){for(var t,n=-1,r=u.length;++n<r;)l[(t=u[n]).i]=t.x(e);return l.join("")}}}var Sr=Mr((function(e){return"none"===e?xr:(yr||(yr=document.createElement("DIV"),br=document.documentElement,wr=document.defaultView),yr.style.transform=e,e=wr.getComputedStyle(br.appendChild(yr),null).getPropertyValue("transform"),br.removeChild(yr),kr(+(e=e.slice(7,-1).split(","))[0],+e[1],+e[2],+e[3],+e[4],+e[5]))}),"px, ","px)","deg)"),Tr=Mr((function(e){return null==e?xr:(_r||(_r=document.createElementNS("http://www.w3.org/2000/svg","g")),_r.setAttribute("transform",e),(e=_r.transform.baseVal.consolidate())?kr((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):xr)}),", ",")",")");function Ar(e,t){var n,r;return function(){var a=mr(this,e),o=a.tween;if(o!==n)for(var i=0,l=(r=n=o).length;i<l;++i)if(r[i].name===t){(r=r.slice()).splice(i,1);break}a.tween=r}}function Cr(e,t,n){var r,a;if("function"!=typeof n)throw new Error;return function(){var o=mr(this,e),i=o.tween;if(i!==r){a=(r=i).slice();for(var l={name:t,value:n},u=0,c=a.length;u<c;++u)if(a[u].name===t){a[u]=l;break}u===c&&a.push(l)}o.tween=a}}function Pr(e,t,n){var r=e._id;return e.each((function(){var e=mr(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return gr(e,r).value[t]}}function Nr(e,t){var n;return("number"==typeof t?An:t instanceof $t?bn:(n=$t(t))?(t=n,bn):In)(e,t)}function Ir(e){return function(){this.removeAttribute(e)}}function Rr(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Or(e,t,n){var r,a,o=n+"";return function(){var i=this.getAttribute(e);return i===o?null:i===r?a:a=t(r=i,n)}}function Hr(e,t,n){var r,a,o=n+"";return function(){var i=this.getAttributeNS(e.space,e.local);return i===o?null:i===r?a:a=t(r=i,n)}}function Lr(e,t,n){var r,a,o;return function(){var i,l,u=n(this);if(null!=u)return(i=this.getAttribute(e))===(l=u+"")?null:i===r&&l===a?o:(a=l,o=t(r=i,u));this.removeAttribute(e)}}function jr(e,t,n){var r,a,o;return function(){var i,l,u=n(this);if(null!=u)return(i=this.getAttributeNS(e.space,e.local))===(l=u+"")?null:i===r&&l===a?o:(a=l,o=t(r=i,u));this.removeAttributeNS(e.space,e.local)}}function zr(e,t){var n,r;function a(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,a)),n}return a._value=t,a}function Dr(e,t){var n,r;function a(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,a)),n}return a._value=t,a}function Br(e,t){return function(){pr(this,e).delay=+t.apply(this,arguments)}}function qr(e,t){return t=+t,function(){pr(this,e).delay=t}}function Fr(e,t){return function(){mr(this,e).duration=+t.apply(this,arguments)}}function Ur(e,t){return t=+t,function(){mr(this,e).duration=t}}var Vr=St.prototype.constructor;function Gr(e){return function(){this.style.removeProperty(e)}}var Wr=0;function Yr(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Xr(e){return St().transition(e)}function Qr(){return++Wr}var $r=St.prototype;function Jr(e){return e*e*e}function Zr(e){return--e*e*e+1}function Kr(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}Yr.prototype=Xr.prototype={constructor:Yr,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=ve(e));for(var r=this._groups,a=r.length,o=new Array(a),i=0;i<a;++i)for(var l,u,c=r[i],s=c.length,f=o[i]=new Array(s),h=0;h<s;++h)(l=c[h])&&(u=e.call(l,l.__data__,h,c))&&("__data__"in l&&(u.__data__=l.__data__),f[h]=u,dr(f[h],t,n,h,f,gr(l,n)));return new Yr(o,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=be(e));for(var r=this._groups,a=r.length,o=[],i=[],l=0;l<a;++l)for(var u,c=r[l],s=c.length,f=0;f<s;++f)if(u=c[f]){for(var h,d=e.call(u,u.__data__,f,c),p=gr(u,n),m=0,g=d.length;m<g;++m)(h=d[m])&&dr(h,t,n,m,d,p);o.push(d),i.push(u)}return new Yr(o,i,t,n)},filter:function(e){"function"!=typeof e&&(e=we(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var o,i=t[a],l=i.length,u=r[a]=[],c=0;c<l;++c)(o=i[c])&&e.call(o,o.__data__,c,i)&&u.push(o);return new Yr(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,a=n.length,o=Math.min(r,a),i=new Array(r),l=0;l<o;++l)for(var u,c=t[l],s=n[l],f=c.length,h=i[l]=new Array(f),d=0;d<f;++d)(u=c[d]||s[d])&&(h[d]=u);for(;l<r;++l)i[l]=t[l];return new Yr(i,this._parents,this._name,this._id)},selection:function(){return new Vr(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=Qr(),r=this._groups,a=r.length,o=0;o<a;++o)for(var i,l=r[o],u=l.length,c=0;c<u;++c)if(i=l[c]){var s=gr(i,t);dr(i,e,n,c,l,{time:s.time+s.delay+s.duration,delay:0,duration:s.duration,ease:s.ease})}return new Yr(r,this._parents,e,n)},call:$r.call,nodes:$r.nodes,node:$r.node,size:$r.size,empty:$r.empty,each:$r.each,on:function(e,t){var n=this._id;return arguments.length<2?gr(this.node(),n).on.on(e):this.each(function(e,t,n){var r,a,o=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?pr:mr;return function(){var i=o(this,e),l=i.on;l!==r&&(a=(r=l).copy()).on(t,n),i.on=a}}(n,e,t))},attr:function(e,t){var n=Ce(e),r="transform"===n?Tr:Nr;return this.attrTween(e,"function"==typeof t?(n.local?jr:Lr)(n,r,Pr(this,"attr."+e,t)):null==t?(n.local?Rr:Ir)(n):(n.local?Hr:Or)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var r=Ce(e);return this.tween(n,(r.local?zr:Dr)(r,t))},style:function(e,t,n){var r="transform"==(e+="")?Sr:Nr;return null==t?this.styleTween(e,function(e,t){var n,r,a;return function(){var o=Be(this,e),i=(this.style.removeProperty(e),Be(this,e));return o===i?null:o===n&&i===r?a:a=t(n=o,r=i)}}(e,r)).on("end.style."+e,Gr(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var r,a,o;return function(){var i=Be(this,e),l=n(this),u=l+"";return null==l&&(this.style.removeProperty(e),u=l=Be(this,e)),i===u?null:i===r&&u===a?o:(a=u,o=t(r=i,l))}}(e,r,Pr(this,"style."+e,t))).each(function(e,t){var n,r,a,o,i="style."+t,l="end."+i;return function(){var u=mr(this,e),c=u.on,s=null==u.value[i]?o||(o=Gr(t)):void 0;c===n&&a===s||(r=(n=c).copy()).on(l,a=s),u.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,a,o=n+"";return function(){var i=Be(this,e);return i===o?null:i===r?a:a=t(r=i,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,function(e,t,n){var r,a;function o(){var o=t.apply(this,arguments);return o!==a&&(r=(a=o)&&function(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}(e,o,n)),r}return o._value=t,o}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(Pr(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,function(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&function(e){return function(t){this.textContent=e.call(this,t)}}(r)),t}return r._value=e,r}(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,a=gr(this.node(),n).tween,o=0,i=a.length;o<i;++o)if((r=a[o]).name===e)return r.value;return null}return this.each((null==t?Ar:Cr)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Br:qr)(t,e)):gr(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Fr:Ur)(t,e)):gr(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){mr(this,e).ease=t}}(t,e)):gr(this.node(),t).ease},end:function(){var e,t,n=this,r=n._id,a=n.size();return new Promise((function(o,i){var l={value:i},u={value:function(){0==--a&&o()}};n.each((function(){var n=mr(this,r),a=n.on;a!==e&&((t=(e=a).copy())._.cancel.push(l),t._.interrupt.push(l),t._.end.push(u)),n.on=t}))}))}};var ea={time:null,delay:0,duration:250,ease:Kr};function ta(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))return ea.time=Qn(),ea;return n}St.prototype.interrupt=function(e){return this.each((function(){vr(this,e)}))},St.prototype.transition=function(e){var t,n;e instanceof Yr?(t=e._id,e=e._name):(t=Qr(),(n=ea).time=Qn(),e=null==e?null:e+"");for(var r=this._groups,a=r.length,o=0;o<a;++o)for(var i,l=r[o],u=l.length,c=0;c<u;++c)(i=l[c])&&dr(i,e,t,c,l,n||ta(i,t));return new Yr(r,this._parents,e,t)};var na=[null];function ra(e,t){var n,r,a=e.__transition;if(a)for(r in t=null==t?null:t+"",a)if((n=a[r]).state>lr&&n.name===t)return new Yr([[e]],na,t,+r);return null}function aa(e){return function(){return e}}function oa(e,t,n){this.target=e,this.type=t,this.selection=n}function ia(){pt.stopImmediatePropagation()}function la(){pt.preventDefault(),pt.stopImmediatePropagation()}var ua={name:"drag"},ca={name:"space"},sa={name:"handle"},fa={name:"center"};function ha(e){return[+e[0],+e[1]]}function da(e){return[ha(e[0]),ha(e[1])]}var pa={name:"x",handles:["w","e"].map(Ea),input:function(e,t){return null==e?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},ma={name:"y",handles:["n","s"].map(Ea),input:function(e,t){return null==e?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},ga={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Ea),input:function(e){return null==e?null:da(e)},output:function(e){return e}},va={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},ya={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},ba={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},wa={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},_a={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Ea(e){return{type:e}}function xa(){return!pt.ctrlKey&&!pt.button}function ka(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function Ma(){return navigator.maxTouchPoints||"ontouchstart"in this}function Sa(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function Ta(e){var t=e.__brush;return t?t.dim.output(t.selection):null}function Aa(){return Na(pa)}function Ca(){return Na(ma)}function Pa(){return Na(ga)}function Na(e){var t,n=ka,r=xa,a=Ma,o=!0,i=me("start","brush","end"),l=6;function u(t){var n=t.property("__brush",m).selectAll(".overlay").data([Ea("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",va.overlay).merge(n).each((function(){var e=Sa(this).extent;Tt(this).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1])})),t.selectAll(".selection").data([Ea("selection")]).enter().append("rect").attr("class","selection").attr("cursor",va.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=t.selectAll(".handle").data(e.handles,(function(e){return e.type}));r.exit().remove(),r.enter().append("rect").attr("class",(function(e){return"handle handle--"+e.type})).attr("cursor",(function(e){return va[e.type]})),t.each(c).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",h).filter(a).on("touchstart.brush",h).on("touchmove.brush",d).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function c(){var e=Tt(this),t=Sa(this).selection;t?(e.selectAll(".selection").style("display",null).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1]),e.selectAll(".handle").style("display",null).attr("x",(function(e){return"e"===e.type[e.type.length-1]?t[1][0]-l/2:t[0][0]-l/2})).attr("y",(function(e){return"s"===e.type[0]?t[1][1]-l/2:t[0][1]-l/2})).attr("width",(function(e){return"n"===e.type||"s"===e.type?t[1][0]-t[0][0]+l:l})).attr("height",(function(e){return"e"===e.type||"w"===e.type?t[1][1]-t[0][1]+l:l}))):e.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function s(e,t,n){var r=e.__brush.emitter;return!r||n&&r.clean?new f(e,t,n):r}function f(e,t,n){this.that=e,this.args=t,this.state=e.__brush,this.active=0,this.clean=n}function h(){if((!t||pt.touches)&&r.apply(this,arguments)){var n,a,i,l,u,f,h,d,p,m,g,v,y=this,b=pt.target.__data__.type,w="selection"===(o&&pt.metaKey?b="overlay":b)?ua:o&&pt.altKey?fa:sa,_=e===ma?null:wa[b],E=e===pa?null:_a[b],x=Sa(y),k=x.extent,M=x.selection,S=k[0][0],T=k[0][1],A=k[1][0],C=k[1][1],P=0,N=0,I=_&&E&&o&&pt.shiftKey,R=pt.touches?(v=pt.changedTouches[0].identifier,function(e){return Ln(e,pt.touches,v)}):jn,O=R(y),H=O,L=s(y,arguments,!0).beforestart();"overlay"===b?(M&&(p=!0),x.selection=M=[[n=e===ma?S:O[0],i=e===pa?T:O[1]],[u=e===ma?A:n,h=e===pa?C:i]]):(n=M[0][0],i=M[0][1],u=M[1][0],h=M[1][1]),a=n,l=i,f=u,d=h;var j=Tt(y).attr("pointer-events","none"),z=j.selectAll(".overlay").attr("cursor",va[b]);if(pt.touches)L.moved=B,L.ended=F;else{var D=Tt(pt.view).on("mousemove.brush",B,!0).on("mouseup.brush",F,!0);o&&D.on("keydown.brush",(function(){switch(pt.keyCode){case 16:I=_&&E;break;case 18:w===sa&&(_&&(u=f-P*_,n=a+P*_),E&&(h=d-N*E,i=l+N*E),w=fa,q());break;case 32:w!==sa&&w!==fa||(_<0?u=f-P:_>0&&(n=a-P),E<0?h=d-N:E>0&&(i=l-N),w=ca,z.attr("cursor",va.selection),q());break;default:return}la()}),!0).on("keyup.brush",(function(){switch(pt.keyCode){case 16:I&&(m=g=I=!1,q());break;case 18:w===fa&&(_<0?u=f:_>0&&(n=a),E<0?h=d:E>0&&(i=l),w=sa,q());break;case 32:w===ca&&(pt.altKey?(_&&(u=f-P*_,n=a+P*_),E&&(h=d-N*E,i=l+N*E),w=fa):(_<0?u=f:_>0&&(n=a),E<0?h=d:E>0&&(i=l),w=sa),z.attr("cursor",va[b]),q());break;default:return}la()}),!0),Pt(pt.view)}ia(),vr(y),c.call(y),L.start()}function B(){var e=R(y);!I||m||g||(Math.abs(e[0]-H[0])>Math.abs(e[1]-H[1])?g=!0:m=!0),H=e,p=!0,la(),q()}function q(){var e;switch(P=H[0]-O[0],N=H[1]-O[1],w){case ca:case ua:_&&(P=Math.max(S-n,Math.min(A-u,P)),a=n+P,f=u+P),E&&(N=Math.max(T-i,Math.min(C-h,N)),l=i+N,d=h+N);break;case sa:_<0?(P=Math.max(S-n,Math.min(A-n,P)),a=n+P,f=u):_>0&&(P=Math.max(S-u,Math.min(A-u,P)),a=n,f=u+P),E<0?(N=Math.max(T-i,Math.min(C-i,N)),l=i+N,d=h):E>0&&(N=Math.max(T-h,Math.min(C-h,N)),l=i,d=h+N);break;case fa:_&&(a=Math.max(S,Math.min(A,n-P*_)),f=Math.max(S,Math.min(A,u+P*_))),E&&(l=Math.max(T,Math.min(C,i-N*E)),d=Math.max(T,Math.min(C,h+N*E)))}f<a&&(_*=-1,e=n,n=u,u=e,e=a,a=f,f=e,b in ya&&z.attr("cursor",va[b=ya[b]])),d<l&&(E*=-1,e=i,i=h,h=e,e=l,l=d,d=e,b in ba&&z.attr("cursor",va[b=ba[b]])),x.selection&&(M=x.selection),m&&(a=M[0][0],f=M[1][0]),g&&(l=M[0][1],d=M[1][1]),M[0][0]===a&&M[0][1]===l&&M[1][0]===f&&M[1][1]===d||(x.selection=[[a,l],[f,d]],c.call(y),L.brush())}function F(){if(ia(),pt.touches){if(pt.touches.length)return;t&&clearTimeout(t),t=setTimeout((function(){t=null}),500)}else Nt(pt.view,p),D.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);j.attr("pointer-events","all"),z.attr("cursor",va.overlay),x.selection&&(M=x.selection),function(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}(M)&&(x.selection=null,c.call(y)),L.end()}}function d(){s(this,arguments).moved()}function p(){s(this,arguments).ended()}function m(){var t=this.__brush||{selection:null};return t.extent=da(n.apply(this,arguments)),t.dim=e,t}return u.move=function(t,n){t.selection?t.on("start.brush",(function(){s(this,arguments).beforestart().start()})).on("interrupt.brush end.brush",(function(){s(this,arguments).end()})).tween("brush",(function(){var t=this,r=t.__brush,a=s(t,arguments),o=r.selection,i=e.input("function"==typeof n?n.apply(this,arguments):n,r.extent),l=Rn(o,i);function u(e){r.selection=1===e&&null===i?null:l(e),c.call(t),a.brush()}return null!==o&&null!==i?u:u(1)})):t.each((function(){var t=this,r=arguments,a=t.__brush,o=e.input("function"==typeof n?n.apply(t,r):n,a.extent),i=s(t,r).beforestart();vr(t),a.selection=null===o?null:o,c.call(t),i.start().brush().end()}))},u.clear=function(e){u.move(e,null)},f.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting?(this.starting=!1,this.emit("start")):this.emit("brush"),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(t){bt(new oa(u,t,e.output(this.state.selection)),i.apply,i,[t,this.that,this.args])}},u.extent=function(e){return arguments.length?(n="function"==typeof e?e:aa(da(e)),u):n},u.filter=function(e){return arguments.length?(r="function"==typeof e?e:aa(!!e),u):r},u.touchable=function(e){return arguments.length?(a="function"==typeof e?e:aa(!!e),u):a},u.handleSize=function(e){return arguments.length?(l=+e,u):l},u.keyModifiers=function(e){return arguments.length?(o=!!e,u):o},u.on=function(){var e=i.on.apply(i,arguments);return e===i?u:e},u}var Ia=Math.cos,Ra=Math.sin,Oa=Math.PI,Ha=Oa/2,La=2*Oa,ja=Math.max;function za(){var e=0,t=null,n=null,r=null;function a(a){var o,i,l,u,c,s,f=a.length,h=[],d=x(f),p=[],m=[],g=m.groups=new Array(f),v=new Array(f*f);for(o=0,c=-1;++c<f;){for(i=0,s=-1;++s<f;)i+=a[c][s];h.push(i),p.push(x(f)),o+=i}for(t&&d.sort((function(e,n){return t(h[e],h[n])})),n&&p.forEach((function(e,t){e.sort((function(e,r){return n(a[t][e],a[t][r])}))})),u=(o=ja(0,La-e*f)/o)?e:La/f,i=0,c=-1;++c<f;){for(l=i,s=-1;++s<f;){var y=d[c],b=p[y][s],w=a[y][b],_=i,E=i+=w*o;v[b*f+y]={index:y,subindex:b,startAngle:_,endAngle:E,value:w}}g[y]={index:y,startAngle:l,endAngle:i,value:h[y]},i+=u}for(c=-1;++c<f;)for(s=c-1;++s<f;){var k=v[s*f+c],M=v[c*f+s];(k.value||M.value)&&m.push(k.value<M.value?{source:M,target:k}:{source:k,target:M})}return r?m.sort(r):m}return a.padAngle=function(t){return arguments.length?(e=ja(0,t),a):e},a.sortGroups=function(e){return arguments.length?(t=e,a):t},a.sortSubgroups=function(e){return arguments.length?(n=e,a):n},a.sortChords=function(e){return arguments.length?(null==e?r=null:(t=e,r=function(e,n){return t(e.source.value+e.target.value,n.source.value+n.target.value)})._=e,a):r&&r._;var t},a}var Da=Array.prototype.slice;function Ba(e){return function(){return e}}var qa=Math.PI,Fa=2*qa,Ua=1e-6,Va=Fa-Ua;function Ga(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Wa(){return new Ga}Ga.prototype=Wa.prototype={constructor:Ga,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,a,o){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+a)+","+(this._y1=+o)},arcTo:function(e,t,n,r,a){e=+e,t=+t,n=+n,r=+r,a=+a;var o=this._x1,i=this._y1,l=n-e,u=r-t,c=o-e,s=i-t,f=c*c+s*s;if(a<0)throw new Error("negative radius: "+a);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(f>Ua)if(Math.abs(s*l-u*c)>Ua&&a){var h=n-o,d=r-i,p=l*l+u*u,m=h*h+d*d,g=Math.sqrt(p),v=Math.sqrt(f),y=a*Math.tan((qa-Math.acos((p+f-m)/(2*g*v)))/2),b=y/v,w=y/g;Math.abs(b-1)>Ua&&(this._+="L"+(e+b*c)+","+(t+b*s)),this._+="A"+a+","+a+",0,0,"+ +(s*h>c*d)+","+(this._x1=e+w*l)+","+(this._y1=t+w*u)}else this._+="L"+(this._x1=e)+","+(this._y1=t);else;},arc:function(e,t,n,r,a,o){e=+e,t=+t,o=!!o;var i=(n=+n)*Math.cos(r),l=n*Math.sin(r),u=e+i,c=t+l,s=1^o,f=o?r-a:a-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+c:(Math.abs(this._x1-u)>Ua||Math.abs(this._y1-c)>Ua)&&(this._+="L"+u+","+c),n&&(f<0&&(f=f%Fa+Fa),f>Va?this._+="A"+n+","+n+",0,1,"+s+","+(e-i)+","+(t-l)+"A"+n+","+n+",0,1,"+s+","+(this._x1=u)+","+(this._y1=c):f>Ua&&(this._+="A"+n+","+n+",0,"+ +(f>=qa)+","+s+","+(this._x1=e+n*Math.cos(a))+","+(this._y1=t+n*Math.sin(a))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var Ya=Wa;function Xa(e){return e.source}function Qa(e){return e.target}function $a(e){return e.radius}function Ja(e){return e.startAngle}function Za(e){return e.endAngle}function Ka(){var e=Xa,t=Qa,n=$a,r=Ja,a=Za,o=null;function i(){var i,l=Da.call(arguments),u=e.apply(this,l),c=t.apply(this,l),s=+n.apply(this,(l[0]=u,l)),f=r.apply(this,l)-Ha,h=a.apply(this,l)-Ha,d=s*Ia(f),p=s*Ra(f),m=+n.apply(this,(l[0]=c,l)),g=r.apply(this,l)-Ha,v=a.apply(this,l)-Ha;if(o||(o=i=Ya()),o.moveTo(d,p),o.arc(0,0,s,f,h),f===g&&h===v||(o.quadraticCurveTo(0,0,m*Ia(g),m*Ra(g)),o.arc(0,0,m,g,v)),o.quadraticCurveTo(0,0,d,p),o.closePath(),i)return o=null,i+""||null}return i.radius=function(e){return arguments.length?(n="function"==typeof e?e:Ba(+e),i):n},i.startAngle=function(e){return arguments.length?(r="function"==typeof e?e:Ba(+e),i):r},i.endAngle=function(e){return arguments.length?(a="function"==typeof e?e:Ba(+e),i):a},i.source=function(t){return arguments.length?(e=t,i):e},i.target=function(e){return arguments.length?(t=e,i):t},i.context=function(e){return arguments.length?(o=null==e?null:e,i):o},i}var eo="$";function to(){}function no(e,t){var n=new to;if(e instanceof to)e.each((function(e,t){n.set(t,e)}));else if(Array.isArray(e)){var r,a=-1,o=e.length;if(null==t)for(;++a<o;)n.set(a,e[a]);else for(;++a<o;)n.set(t(r=e[a],a,e),r)}else if(e)for(var i in e)n.set(i,e[i]);return n}to.prototype=no.prototype={constructor:to,has:function(e){return eo+e in this},get:function(e){return this[eo+e]},set:function(e,t){return this[eo+e]=t,this},remove:function(e){var t=eo+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===eo&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===eo&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===eo&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===eo&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===eo&&++e;return e},empty:function(){for(var e in this)if(e[0]===eo)return!1;return!0},each:function(e){for(var t in this)t[0]===eo&&e(this[t],t.slice(1),this)}};var ro=no;function ao(){var e,t,n,r=[],a=[];function o(n,a,i,l){if(a>=r.length)return null!=e&&n.sort(e),null!=t?t(n):n;for(var u,c,s,f=-1,h=n.length,d=r[a++],p=ro(),m=i();++f<h;)(s=p.get(u=d(c=n[f])+""))?s.push(c):p.set(u,[c]);return p.each((function(e,t){l(m,t,o(e,a,i,l))})),m}function i(e,n){if(++n>r.length)return e;var o,l=a[n-1];return null!=t&&n>=r.length?o=e.entries():(o=[],e.each((function(e,t){o.push({key:t,values:i(e,n)})}))),null!=l?o.sort((function(e,t){return l(e.key,t.key)})):o}return n={object:function(e){return o(e,0,oo,io)},map:function(e){return o(e,0,lo,uo)},entries:function(e){return i(o(e,0,lo,uo),0)},key:function(e){return r.push(e),n},sortKeys:function(e){return a[r.length-1]=e,n},sortValues:function(t){return e=t,n},rollup:function(e){return t=e,n}}}function oo(){return{}}function io(e,t,n){e[t]=n}function lo(){return ro()}function uo(e,t,n){e.set(t,n)}function co(){}var so=ro.prototype;function fo(e,t){var n=new co;if(e instanceof co)e.each((function(e){n.add(e)}));else if(e){var r=-1,a=e.length;if(null==t)for(;++r<a;)n.add(e[r]);else for(;++r<a;)n.add(t(e[r],r,e))}return n}co.prototype=fo.prototype={constructor:co,has:so.has,add:function(e){return this[eo+(e+="")]=e,this},remove:so.remove,clear:so.clear,values:so.keys,size:so.size,empty:so.empty,each:so.each};var ho=fo;function po(e){var t=[];for(var n in e)t.push(n);return t}function mo(e){var t=[];for(var n in e)t.push(e[n]);return t}function go(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t}var vo=Math.PI/180,yo=180/Math.PI,bo=.96422,wo=1,_o=.82521,Eo=4/29,xo=6/29,ko=3*xo*xo,Mo=xo*xo*xo;function So(e){if(e instanceof Co)return new Co(e.l,e.a,e.b,e.opacity);if(e instanceof jo)return zo(e);e instanceof tn||(e=Kt(e));var t,n,r=Ro(e.r),a=Ro(e.g),o=Ro(e.b),i=Po((.2225045*r+.7168786*a+.0606169*o)/wo);return r===a&&a===o?t=n=i:(t=Po((.4360747*r+.3850649*a+.1430804*o)/bo),n=Po((.0139322*r+.0971045*a+.7141733*o)/_o)),new Co(116*i-16,500*(t-i),200*(i-n),e.opacity)}function To(e,t){return new Co(e,0,0,null==t?1:t)}function Ao(e,t,n,r){return 1===arguments.length?So(e):new Co(e,t,n,null==r?1:r)}function Co(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function Po(e){return e>Mo?Math.pow(e,1/3):e/ko+Eo}function No(e){return e>xo?e*e*e:ko*(e-Eo)}function Io(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Ro(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Oo(e){if(e instanceof jo)return new jo(e.h,e.c,e.l,e.opacity);if(e instanceof Co||(e=So(e)),0===e.a&&0===e.b)return new jo(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*yo;return new jo(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Ho(e,t,n,r){return 1===arguments.length?Oo(e):new jo(n,t,e,null==r?1:r)}function Lo(e,t,n,r){return 1===arguments.length?Oo(e):new jo(e,t,n,null==r?1:r)}function jo(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function zo(e){if(isNaN(e.h))return new Co(e.l,0,0,e.opacity);var t=e.h*vo;return new Co(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}It(Co,Ao,Rt(Ot,{brighter:function(e){return new Co(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new Co(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new tn(Io(3.1338561*(t=bo*No(t))-1.6168667*(e=wo*No(e))-.4906146*(n=_o*No(n))),Io(-.9787684*t+1.9161415*e+.033454*n),Io(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),It(jo,Lo,Rt(Ot,{brighter:function(e){return new jo(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new jo(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return zo(this).rgb()}}));var Do=-.14861,Bo=1.78277,qo=-.29227,Fo=-.90649,Uo=1.97294,Vo=Uo*Fo,Go=Uo*Bo,Wo=Bo*qo-Fo*Do;function Yo(e,t,n,r){return 1===arguments.length?function(e){if(e instanceof Xo)return new Xo(e.h,e.s,e.l,e.opacity);e instanceof tn||(e=Kt(e));var t=e.r/255,n=e.g/255,r=e.b/255,a=(Wo*r+Vo*t-Go*n)/(Wo+Vo-Go),o=r-a,i=(Uo*(n-a)-qo*o)/Fo,l=Math.sqrt(i*i+o*o)/(Uo*a*(1-a)),u=l?Math.atan2(i,o)*yo-120:NaN;return new Xo(u<0?u+360:u,l,a,e.opacity)}(e):new Xo(e,t,n,null==r?1:r)}function Xo(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}It(Xo,Yo,Rt(Ot,{brighter:function(e){return e=null==e?Lt:Math.pow(Lt,e),new Xo(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?Ht:Math.pow(Ht,e),new Xo(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*vo,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),a=Math.sin(e);return new tn(255*(t+n*(Do*r+Bo*a)),255*(t+n*(qo*r+Fo*a)),255*(t+n*(Uo*r)),this.opacity)}}));var Qo=Array.prototype.slice;function $o(e,t){return e-t}function Jo(e){return function(){return e}}function Zo(e,t){for(var n,r=-1,a=t.length;++r<a;)if(n=Ko(e,t[r]))return n;return 0}function Ko(e,t){for(var n=t[0],r=t[1],a=-1,o=0,i=e.length,l=i-1;o<i;l=o++){var u=e[o],c=u[0],s=u[1],f=e[l],h=f[0],d=f[1];if(ei(u,f,t))return 0;s>r!=d>r&&n<(h-c)*(r-s)/(d-s)+c&&(a=-a)}return a}function ei(e,t,n){var r,a,o,i;return function(e,t,n){return(t[0]-e[0])*(n[1]-e[1])==(n[0]-e[0])*(t[1]-e[1])}(e,t,n)&&(a=e[r=+(e[0]===t[0])],o=n[r],i=t[r],a<=o&&o<=i||i<=o&&o<=a)}function ti(){}var ni=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function ri(){var e=1,t=1,n=P,r=l;function a(e){var t=n(e);if(Array.isArray(t))t=t.slice().sort($o);else{var r=v(e),a=r[0],i=r[1];t=C(a,i,t),t=x(Math.floor(a/t)*t,Math.floor(i/t)*t,t)}return t.map((function(t){return o(e,t)}))}function o(n,a){var o=[],l=[];return function(n,r,a){var o,l,u,c,s,f,h=new Array,d=new Array;o=l=-1,c=n[0]>=r,ni[c<<1].forEach(p);for(;++o<e-1;)u=c,c=n[o+1]>=r,ni[u|c<<1].forEach(p);ni[c|0].forEach(p);for(;++l<t-1;){for(o=-1,c=n[l*e+e]>=r,s=n[l*e]>=r,ni[c<<1|s<<2].forEach(p);++o<e-1;)u=c,c=n[l*e+e+o+1]>=r,f=s,s=n[l*e+o+1]>=r,ni[u|c<<1|s<<2|f<<3].forEach(p);ni[c|s<<3].forEach(p)}o=-1,s=n[l*e]>=r,ni[s<<2].forEach(p);for(;++o<e-1;)f=s,s=n[l*e+o+1]>=r,ni[s<<2|f<<3].forEach(p);function p(e){var t,n,r=[e[0][0]+o,e[0][1]+l],u=[e[1][0]+o,e[1][1]+l],c=i(r),s=i(u);(t=d[c])?(n=h[s])?(delete d[t.end],delete h[n.start],t===n?(t.ring.push(u),a(t.ring)):h[t.start]=d[n.end]={start:t.start,end:n.end,ring:t.ring.concat(n.ring)}):(delete d[t.end],t.ring.push(u),d[t.end=s]=t):(t=h[s])?(n=d[c])?(delete h[t.start],delete d[n.end],t===n?(t.ring.push(u),a(t.ring)):h[n.start]=d[t.end]={start:n.start,end:t.end,ring:n.ring.concat(t.ring)}):(delete h[t.start],t.ring.unshift(r),h[t.start=c]=t):h[c]=d[s]={start:c,end:s,ring:[r,u]}}ni[s<<3].forEach(p)}(n,a,(function(e){r(e,n,a),function(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}(e)>0?o.push([e]):l.push(e)})),l.forEach((function(e){for(var t,n=0,r=o.length;n<r;++n)if(-1!==Zo((t=o[n])[0],e))return void t.push(e)})),{type:"MultiPolygon",value:a,coordinates:o}}function i(t){return 2*t[0]+t[1]*(e+1)*4}function l(n,r,a){n.forEach((function(n){var o,i=n[0],l=n[1],u=0|i,c=0|l,s=r[c*e+u];i>0&&i<e&&u===i&&(o=r[c*e+u-1],n[0]=i+(a-o)/(s-o)-.5),l>0&&l<t&&c===l&&(o=r[(c-1)*e+u],n[1]=l+(a-o)/(s-o)-.5)}))}return a.contour=o,a.size=function(n){if(!arguments.length)return[e,t];var r=Math.ceil(n[0]),o=Math.ceil(n[1]);if(!(r>0&&o>0))throw new Error("invalid size");return e=r,t=o,a},a.thresholds=function(e){return arguments.length?(n="function"==typeof e?e:Array.isArray(e)?Jo(Qo.call(e)):Jo(e),a):n},a.smooth=function(e){return arguments.length?(r=e?l:ti,a):r===l},a}function ai(e,t,n){for(var r=e.width,a=e.height,o=1+(n<<1),i=0;i<a;++i)for(var l=0,u=0;l<r+n;++l)l<r&&(u+=e.data[l+i*r]),l>=n&&(l>=o&&(u-=e.data[l-o+i*r]),t.data[l-n+i*r]=u/Math.min(l+1,r-1+o-l,o))}function oi(e,t,n){for(var r=e.width,a=e.height,o=1+(n<<1),i=0;i<r;++i)for(var l=0,u=0;l<a+n;++l)l<a&&(u+=e.data[i+l*r]),l>=n&&(l>=o&&(u-=e.data[i+(l-o)*r]),t.data[i+(l-n)*r]=u/Math.min(l+1,a-1+o-l,o))}function ii(e){return e[0]}function li(e){return e[1]}function ui(){return 1}function ci(){var e=ii,t=li,n=ui,r=960,a=500,o=20,i=2,l=3*o,u=r+2*l>>i,c=a+2*l>>i,s=Jo(20);function f(r){var a=new Float32Array(u*c),f=new Float32Array(u*c);r.forEach((function(r,o,s){var f=+e(r,o,s)+l>>i,h=+t(r,o,s)+l>>i,d=+n(r,o,s);f>=0&&f<u&&h>=0&&h<c&&(a[f+h*u]+=d)})),ai({width:u,height:c,data:a},{width:u,height:c,data:f},o>>i),oi({width:u,height:c,data:f},{width:u,height:c,data:a},o>>i),ai({width:u,height:c,data:a},{width:u,height:c,data:f},o>>i),oi({width:u,height:c,data:f},{width:u,height:c,data:a},o>>i),ai({width:u,height:c,data:a},{width:u,height:c,data:f},o>>i),oi({width:u,height:c,data:f},{width:u,height:c,data:a},o>>i);var d=s(a);if(!Array.isArray(d)){var p=H(a);d=C(0,p,d),(d=x(0,Math.floor(p/d)*d,d)).shift()}return ri().thresholds(d).size([u,c])(a).map(h)}function h(e){return e.value*=Math.pow(2,-2*i),e.coordinates.forEach(d),e}function d(e){e.forEach(p)}function p(e){e.forEach(m)}function m(e){e[0]=e[0]*Math.pow(2,i)-l,e[1]=e[1]*Math.pow(2,i)-l}function g(){return u=r+2*(l=3*o)>>i,c=a+2*l>>i,f}return f.x=function(t){return arguments.length?(e="function"==typeof t?t:Jo(+t),f):e},f.y=function(e){return arguments.length?(t="function"==typeof e?e:Jo(+e),f):t},f.weight=function(e){return arguments.length?(n="function"==typeof e?e:Jo(+e),f):n},f.size=function(e){if(!arguments.length)return[r,a];var t=Math.ceil(e[0]),n=Math.ceil(e[1]);if(!(t>=0||t>=0))throw new Error("invalid size");return r=t,a=n,g()},f.cellSize=function(e){if(!arguments.length)return 1<<i;if(!((e=+e)>=1))throw new Error("invalid cell size");return i=Math.floor(Math.log(e)/Math.LN2),g()},f.thresholds=function(e){return arguments.length?(s="function"==typeof e?e:Array.isArray(e)?Jo(Qo.call(e)):Jo(e),f):s},f.bandwidth=function(e){if(!arguments.length)return Math.sqrt(o*(o+1));if(!((e=+e)>=0))throw new Error("invalid bandwidth");return o=Math.round((Math.sqrt(4*e*e+1)-1)/2),g()},f}function si(e){return function(){return e}}function fi(e,t,n,r,a,o,i,l,u,c){this.target=e,this.type=t,this.subject=n,this.identifier=r,this.active=a,this.x=o,this.y=i,this.dx=l,this.dy=u,this._=c}function hi(){return!pt.ctrlKey&&!pt.button}function di(){return this.parentNode}function pi(e){return null==e?{x:pt.x,y:pt.y}:e}function mi(){return navigator.maxTouchPoints||"ontouchstart"in this}function gi(){var e,t,n,r,a=hi,o=di,i=pi,l=mi,u={},c=me("start","drag","end"),s=0,f=0;function h(e){e.on("mousedown.drag",d).filter(l).on("touchstart.drag",g).on("touchmove.drag",v).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(){if(!r&&a.apply(this,arguments)){var i=b("mouse",o.apply(this,arguments),jn,this,arguments);i&&(Tt(pt.view).on("mousemove.drag",p,!0).on("mouseup.drag",m,!0),Pt(pt.view),At(),n=!1,e=pt.clientX,t=pt.clientY,i("start"))}}function p(){if(Ct(),!n){var r=pt.clientX-e,a=pt.clientY-t;n=r*r+a*a>f}u.mouse("drag")}function m(){Tt(pt.view).on("mousemove.drag mouseup.drag",null),Nt(pt.view,n),Ct(),u.mouse("end")}function g(){if(a.apply(this,arguments)){var e,t,n=pt.changedTouches,r=o.apply(this,arguments),i=n.length;for(e=0;e<i;++e)(t=b(n[e].identifier,r,Ln,this,arguments))&&(At(),t("start"))}}function v(){var e,t,n=pt.changedTouches,r=n.length;for(e=0;e<r;++e)(t=u[n[e].identifier])&&(Ct(),t("drag"))}function y(){var e,t,n=pt.changedTouches,a=n.length;for(r&&clearTimeout(r),r=setTimeout((function(){r=null}),500),e=0;e<a;++e)(t=u[n[e].identifier])&&(At(),t("end"))}function b(e,t,n,r,a){var o,l,f,d=n(t,e),p=c.copy();if(bt(new fi(h,"beforestart",o,e,s,d[0],d[1],0,0,p),(function(){return null!=(pt.subject=o=i.apply(r,a))&&(l=o.x-d[0]||0,f=o.y-d[1]||0,!0)})))return function i(c){var m,g=d;switch(c){case"start":u[e]=i,m=s++;break;case"end":delete u[e],--s;case"drag":d=n(t,e),m=s}bt(new fi(h,c,o,e,m,d[0]+l,d[1]+f,d[0]-g[0],d[1]-g[1],p),p.apply,p,[c,r,a])}}return h.filter=function(e){return arguments.length?(a="function"==typeof e?e:si(!!e),h):a},h.container=function(e){return arguments.length?(o="function"==typeof e?e:si(e),h):o},h.subject=function(e){return arguments.length?(i="function"==typeof e?e:si(e),h):i},h.touchable=function(e){return arguments.length?(l="function"==typeof e?e:si(!!e),h):l},h.on=function(){var e=c.on.apply(c,arguments);return e===c?h:e},h.clickDistance=function(e){return arguments.length?(f=(e=+e)*e,h):Math.sqrt(f)},h}fi.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var vi={},yi={},bi=34,wi=10,_i=13;function Ei(e){return new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'})).join(",")+"}")}function xi(e){var t=Object.create(null),n=[];return e.forEach((function(e){for(var r in e)r in t||n.push(t[r]=r)})),n}function ki(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function Mi(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),a=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":function(e){return e<0?"-"+ki(-e,6):e>9999?"+"+ki(e,6):ki(e,4)}(e.getUTCFullYear())+"-"+ki(e.getUTCMonth()+1,2)+"-"+ki(e.getUTCDate(),2)+(a?"T"+ki(t,2)+":"+ki(n,2)+":"+ki(r,2)+"."+ki(a,3)+"Z":r?"T"+ki(t,2)+":"+ki(n,2)+":"+ki(r,2)+"Z":n||t?"T"+ki(t,2)+":"+ki(n,2)+"Z":"")}function Si(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function r(e,t){var r,a=[],o=e.length,i=0,l=0,u=o<=0,c=!1;function s(){if(u)return yi;if(c)return c=!1,vi;var t,r,a=i;if(e.charCodeAt(a)===bi){for(;i++<o&&e.charCodeAt(i)!==bi||e.charCodeAt(++i)===bi;);return(t=i)>=o?u=!0:(r=e.charCodeAt(i++))===wi?c=!0:r===_i&&(c=!0,e.charCodeAt(i)===wi&&++i),e.slice(a+1,t-1).replace(/""/g,'"')}for(;i<o;){if((r=e.charCodeAt(t=i++))===wi)c=!0;else if(r===_i)c=!0,e.charCodeAt(i)===wi&&++i;else if(r!==n)continue;return e.slice(a,t)}return u=!0,e.slice(a,o)}for(e.charCodeAt(o-1)===wi&&--o,e.charCodeAt(o-1)===_i&&--o;(r=s())!==yi;){for(var f=[];r!==vi&&r!==yi;)f.push(r),r=s();t&&null==(f=t(f,l++))||a.push(f)}return a}function a(t,n){return t.map((function(t){return n.map((function(e){return i(t[e])})).join(e)}))}function o(t){return t.map(i).join(e)}function i(e){return null==e?"":e instanceof Date?Mi(e):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var n,a,o=r(e,(function(e,r){if(n)return n(e,r-1);a=e,n=t?function(e,t){var n=Ei(e);return function(r,a){return t(n(r),a,e)}}(e,t):Ei(e)}));return o.columns=a||[],o},parseRows:r,format:function(t,n){return null==n&&(n=xi(t)),[n.map(i).join(e)].concat(a(t,n)).join("\n")},formatBody:function(e,t){return null==t&&(t=xi(e)),a(e,t).join("\n")},formatRows:function(e){return e.map(o).join("\n")},formatRow:o,formatValue:i}}var Ti=Si(","),Ai=Ti.parse,Ci=Ti.parseRows,Pi=Ti.format,Ni=Ti.formatBody,Ii=Ti.formatRows,Ri=Ti.formatRow,Oi=Ti.formatValue,Hi=Si("\t"),Li=Hi.parse,ji=Hi.parseRows,zi=Hi.format,Di=Hi.formatBody,Bi=Hi.formatRows,qi=Hi.formatRow,Fi=Hi.formatValue;function Ui(e){for(var t in e){var n,r,a=e[t].trim();if(a)if("true"===a)a=!0;else if("false"===a)a=!1;else if("NaN"===a)a=NaN;else if(isNaN(n=+a)){if(!(r=a.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;Vi&&r[4]&&!r[7]&&(a=a.replace(/-/g,"/").replace(/T/," ")),a=new Date(a)}else a=n;else a=null;e[t]=a}return e}var Vi=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function Gi(e){return+e}function Wi(e){return e*e}function Yi(e){return e*(2-e)}function Xi(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}var Qi=function e(t){function n(e){return Math.pow(e,t)}return t=+t,n.exponent=e,n}(3),$i=function e(t){function n(e){return 1-Math.pow(1-e,t)}return t=+t,n.exponent=e,n}(3),Ji=function e(t){function n(e){return((e*=2)<=1?Math.pow(e,t):2-Math.pow(2-e,t))/2}return t=+t,n.exponent=e,n}(3),Zi=Math.PI,Ki=Zi/2;function el(e){return 1==+e?1:1-Math.cos(e*Ki)}function tl(e){return Math.sin(e*Ki)}function nl(e){return(1-Math.cos(Zi*e))/2}function rl(e){return 1.0009775171065494*(Math.pow(2,-10*e)-.0009765625)}function al(e){return rl(1-+e)}function ol(e){return 1-rl(e)}function il(e){return((e*=2)<=1?rl(1-e):2-rl(e-1))/2}function ll(e){return 1-Math.sqrt(1-e*e)}function ul(e){return Math.sqrt(1- --e*e)}function cl(e){return((e*=2)<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2}var sl=4/11,fl=6/11,hl=8/11,dl=3/4,pl=9/11,ml=10/11,gl=15/16,vl=21/22,yl=63/64,bl=1/sl/sl;function wl(e){return 1-_l(1-e)}function _l(e){return(e=+e)<sl?bl*e*e:e<hl?bl*(e-=fl)*e+dl:e<ml?bl*(e-=pl)*e+gl:bl*(e-=vl)*e+yl}function El(e){return((e*=2)<=1?1-_l(1-e):_l(e-1)+1)/2}var xl=1.70158,kl=function e(t){function n(e){return(e=+e)*e*(t*(e-1)+e)}return t=+t,n.overshoot=e,n}(xl),Ml=function e(t){function n(e){return--e*e*((e+1)*t+e)+1}return t=+t,n.overshoot=e,n}(xl),Sl=function e(t){function n(e){return((e*=2)<1?e*e*((t+1)*e-t):(e-=2)*e*((t+1)*e+t)+2)/2}return t=+t,n.overshoot=e,n}(xl),Tl=2*Math.PI,Al=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=Tl);function a(e){return t*rl(- --e)*Math.sin((r-e)/n)}return a.amplitude=function(t){return e(t,n*Tl)},a.period=function(n){return e(t,n)},a}(1,.3),Cl=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=Tl);function a(e){return 1-t*rl(e=+e)*Math.sin((e+r)/n)}return a.amplitude=function(t){return e(t,n*Tl)},a.period=function(n){return e(t,n)},a}(1,.3),Pl=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=Tl);function a(e){return((e=2*e-1)<0?t*rl(-e)*Math.sin((r-e)/n):2-t*rl(e)*Math.sin((r+e)/n))/2}return a.amplitude=function(t){return e(t,n*Tl)},a.period=function(n){return e(t,n)},a}(1,.3);function Nl(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.blob()}function Il(e,t){return fetch(e,t).then(Nl)}function Rl(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.arrayBuffer()}function Ol(e,t){return fetch(e,t).then(Rl)}function Hl(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function Ll(e,t){return fetch(e,t).then(Hl)}function jl(e){return function(t,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=void 0),Ll(t,n).then((function(t){return e(t,r)}))}}function zl(e,t,n,r){3===arguments.length&&"function"==typeof n&&(r=n,n=void 0);var a=Si(e);return Ll(t,n).then((function(e){return a.parse(e,r)}))}var Dl=jl(Ai),Bl=jl(Li);function ql(e,t){return new Promise((function(n,r){var a=new Image;for(var o in t)a[o]=t[o];a.onerror=r,a.onload=function(){n(a)},a.src=e}))}function Fl(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);if(204!==e.status&&205!==e.status)return e.json()}function Ul(e,t){return fetch(e,t).then(Fl)}function Vl(e){return function(t,n){return Ll(t,n).then((function(t){return(new DOMParser).parseFromString(t,e)}))}}var Gl=Vl("application/xml"),Wl=Vl("text/html"),Yl=Vl("image/svg+xml");function Xl(e,t){var n;function r(){var r,a,o=n.length,i=0,l=0;for(r=0;r<o;++r)i+=(a=n[r]).x,l+=a.y;for(i=i/o-e,l=l/o-t,r=0;r<o;++r)(a=n[r]).x-=i,a.y-=l}return null==e&&(e=0),null==t&&(t=0),r.initialize=function(e){n=e},r.x=function(t){return arguments.length?(e=+t,r):e},r.y=function(e){return arguments.length?(t=+e,r):t},r}function Ql(e){return function(){return e}}function $l(){return 1e-6*(Math.random()-.5)}function Jl(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var a,o,i,l,u,c,s,f,h,d=e._root,p={data:r},m=e._x0,g=e._y0,v=e._x1,y=e._y1;if(!d)return e._root=p,e;for(;d.length;)if((c=t>=(o=(m+v)/2))?m=o:v=o,(s=n>=(i=(g+y)/2))?g=i:y=i,a=d,!(d=d[f=s<<1|c]))return a[f]=p,e;if(l=+e._x.call(null,d.data),u=+e._y.call(null,d.data),t===l&&n===u)return p.next=d,a?a[f]=p:e._root=p,e;do{a=a?a[f]=new Array(4):e._root=new Array(4),(c=t>=(o=(m+v)/2))?m=o:v=o,(s=n>=(i=(g+y)/2))?g=i:y=i}while((f=s<<1|c)==(h=(u>=i)<<1|l>=o));return a[h]=d,a[f]=p,e}function Zl(e,t,n,r,a){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=a}function Kl(e){return e[0]}function eu(e){return e[1]}function tu(e,t,n){var r=new nu(null==t?Kl:t,null==n?eu:n,NaN,NaN,NaN,NaN);return null==e?r:r.addAll(e)}function nu(e,t,n,r,a,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=a,this._y1=o,this._root=void 0}function ru(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var au=tu.prototype=nu.prototype;function ou(e){return e.x+e.vx}function iu(e){return e.y+e.vy}function lu(e){var t,n,r=1,a=1;function o(){for(var e,o,l,u,c,s,f,h=t.length,d=0;d<a;++d)for(o=tu(t,ou,iu).visitAfter(i),e=0;e<h;++e)l=t[e],s=n[l.index],f=s*s,u=l.x+l.vx,c=l.y+l.vy,o.visit(p);function p(e,t,n,a,o){var i=e.data,h=e.r,d=s+h;if(!i)return t>u+d||a<u-d||n>c+d||o<c-d;if(i.index>l.index){var p=u-i.x-i.vx,m=c-i.y-i.vy,g=p*p+m*m;g<d*d&&(0===p&&(g+=(p=$l())*p),0===m&&(g+=(m=$l())*m),g=(d-(g=Math.sqrt(g)))/g*r,l.vx+=(p*=g)*(d=(h*=h)/(f+h)),l.vy+=(m*=g)*d,i.vx-=p*(d=1-d),i.vy-=m*d)}}}function i(e){if(e.data)return e.r=n[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function l(){if(t){var r,a,o=t.length;for(n=new Array(o),r=0;r<o;++r)a=t[r],n[a.index]=+e(a,r,t)}}return"function"!=typeof e&&(e=Ql(null==e?1:+e)),o.initialize=function(e){t=e,l()},o.iterations=function(e){return arguments.length?(a=+e,o):a},o.strength=function(e){return arguments.length?(r=+e,o):r},o.radius=function(t){return arguments.length?(e="function"==typeof t?t:Ql(+t),l(),o):e},o}function uu(e){return e.index}function cu(e,t){var n=e.get(t);if(!n)throw new Error("missing: "+t);return n}function su(e){var t,n,r,a,o,i=uu,l=function(e){return 1/Math.min(a[e.source.index],a[e.target.index])},u=Ql(30),c=1;function s(r){for(var a=0,i=e.length;a<c;++a)for(var l,u,s,f,h,d,p,m=0;m<i;++m)u=(l=e[m]).source,f=(s=l.target).x+s.vx-u.x-u.vx||$l(),h=s.y+s.vy-u.y-u.vy||$l(),f*=d=((d=Math.sqrt(f*f+h*h))-n[m])/d*r*t[m],h*=d,s.vx-=f*(p=o[m]),s.vy-=h*p,u.vx+=f*(p=1-p),u.vy+=h*p}function f(){if(r){var l,u,c=r.length,s=e.length,f=ro(r,i);for(l=0,a=new Array(c);l<s;++l)(u=e[l]).index=l,"object"!=typeof u.source&&(u.source=cu(f,u.source)),"object"!=typeof u.target&&(u.target=cu(f,u.target)),a[u.source.index]=(a[u.source.index]||0)+1,a[u.target.index]=(a[u.target.index]||0)+1;for(l=0,o=new Array(s);l<s;++l)u=e[l],o[l]=a[u.source.index]/(a[u.source.index]+a[u.target.index]);t=new Array(s),h(),n=new Array(s),d()}}function h(){if(r)for(var n=0,a=e.length;n<a;++n)t[n]=+l(e[n],n,e)}function d(){if(r)for(var t=0,a=e.length;t<a;++t)n[t]=+u(e[t],t,e)}return null==e&&(e=[]),s.initialize=function(e){r=e,f()},s.links=function(t){return arguments.length?(e=t,f(),s):e},s.id=function(e){return arguments.length?(i=e,s):i},s.iterations=function(e){return arguments.length?(c=+e,s):c},s.strength=function(e){return arguments.length?(l="function"==typeof e?e:Ql(+e),h(),s):l},s.distance=function(e){return arguments.length?(u="function"==typeof e?e:Ql(+e),d(),s):u},s}function fu(e){return e.x}function hu(e){return e.y}au.copy=function(){var e,t,n=new nu(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=ru(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var a=0;a<4;++a)(t=r.source[a])&&(t.length?e.push({source:t,target:r.target[a]=new Array(4)}):r.target[a]=ru(t));return n},au.add=function(e){var t=+this._x.call(null,e),n=+this._y.call(null,e);return Jl(this.cover(t,n),t,n,e)},au.addAll=function(e){var t,n,r,a,o=e.length,i=new Array(o),l=new Array(o),u=1/0,c=1/0,s=-1/0,f=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(a=+this._y.call(null,t))||(i[n]=r,l[n]=a,r<u&&(u=r),r>s&&(s=r),a<c&&(c=a),a>f&&(f=a));if(u>s||c>f)return this;for(this.cover(u,c).cover(s,f),n=0;n<o;++n)Jl(this,i[n],l[n],e[n]);return this},au.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,a=this._x1,o=this._y1;if(isNaN(n))a=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var i,l,u=a-n,c=this._root;n>e||e>=a||r>t||t>=o;)switch(l=(t<r)<<1|e<n,(i=new Array(4))[l]=c,c=i,u*=2,l){case 0:a=n+u,o=r+u;break;case 1:n=a-u,o=r+u;break;case 2:a=n+u,r=o-u;break;case 3:n=a-u,r=o-u}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=a,this._y1=o,this},au.data=function(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e},au.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},au.find=function(e,t,n){var r,a,o,i,l,u,c,s=this._x0,f=this._y0,h=this._x1,d=this._y1,p=[],m=this._root;for(m&&p.push(new Zl(m,s,f,h,d)),null==n?n=1/0:(s=e-n,f=t-n,h=e+n,d=t+n,n*=n);u=p.pop();)if(!(!(m=u.node)||(a=u.x0)>h||(o=u.y0)>d||(i=u.x1)<s||(l=u.y1)<f))if(m.length){var g=(a+i)/2,v=(o+l)/2;p.push(new Zl(m[3],g,v,i,l),new Zl(m[2],a,v,g,l),new Zl(m[1],g,o,i,v),new Zl(m[0],a,o,g,v)),(c=(t>=v)<<1|e>=g)&&(u=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=u)}else{var y=e-+this._x.call(null,m.data),b=t-+this._y.call(null,m.data),w=y*y+b*b;if(w<n){var _=Math.sqrt(n=w);s=e-_,f=t-_,h=e+_,d=t+_,r=m.data}}return r},au.remove=function(e){if(isNaN(o=+this._x.call(null,e))||isNaN(i=+this._y.call(null,e)))return this;var t,n,r,a,o,i,l,u,c,s,f,h,d=this._root,p=this._x0,m=this._y0,g=this._x1,v=this._y1;if(!d)return this;if(d.length)for(;;){if((c=o>=(l=(p+g)/2))?p=l:g=l,(s=i>=(u=(m+v)/2))?m=u:v=u,t=d,!(d=d[f=s<<1|c]))return this;if(!d.length)break;(t[f+1&3]||t[f+2&3]||t[f+3&3])&&(n=t,h=f)}for(;d.data!==e;)if(r=d,!(d=d.next))return this;return(a=d.next)&&delete d.next,r?(a?r.next=a:delete r.next,this):t?(a?t[f]=a:delete t[f],(d=t[0]||t[1]||t[2]||t[3])&&d===(t[3]||t[2]||t[1]||t[0])&&!d.length&&(n?n[h]=d:this._root=d),this):(this._root=a,this)},au.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},au.root=function(){return this._root},au.size=function(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e},au.visit=function(e){var t,n,r,a,o,i,l=[],u=this._root;for(u&&l.push(new Zl(u,this._x0,this._y0,this._x1,this._y1));t=l.pop();)if(!e(u=t.node,r=t.x0,a=t.y0,o=t.x1,i=t.y1)&&u.length){var c=(r+o)/2,s=(a+i)/2;(n=u[3])&&l.push(new Zl(n,c,s,o,i)),(n=u[2])&&l.push(new Zl(n,r,s,c,i)),(n=u[1])&&l.push(new Zl(n,c,a,o,s)),(n=u[0])&&l.push(new Zl(n,r,a,c,s))}return this},au.visitAfter=function(e){var t,n=[],r=[];for(this._root&&n.push(new Zl(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var a=t.node;if(a.length){var o,i=t.x0,l=t.y0,u=t.x1,c=t.y1,s=(i+u)/2,f=(l+c)/2;(o=a[0])&&n.push(new Zl(o,i,l,s,f)),(o=a[1])&&n.push(new Zl(o,s,l,u,f)),(o=a[2])&&n.push(new Zl(o,i,f,s,c)),(o=a[3])&&n.push(new Zl(o,s,f,u,c))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},au.x=function(e){return arguments.length?(this._x=e,this):this._x},au.y=function(e){return arguments.length?(this._y=e,this):this._y};var du=10,pu=Math.PI*(3-Math.sqrt(5));function mu(e){var t,n=1,r=.001,a=1-Math.pow(r,1/300),o=0,i=.6,l=ro(),u=Zn(s),c=me("tick","end");function s(){f(),c.call("tick",t),n<r&&(u.stop(),c.call("end",t))}function f(r){var u,c,s=e.length;void 0===r&&(r=1);for(var f=0;f<r;++f)for(n+=(o-n)*a,l.each((function(e){e(n)})),u=0;u<s;++u)null==(c=e[u]).fx?c.x+=c.vx*=i:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=i:(c.y=c.fy,c.vy=0);return t}function h(){for(var t,n=0,r=e.length;n<r;++n){if((t=e[n]).index=n,null!=t.fx&&(t.x=t.fx),null!=t.fy&&(t.y=t.fy),isNaN(t.x)||isNaN(t.y)){var a=du*Math.sqrt(n),o=n*pu;t.x=a*Math.cos(o),t.y=a*Math.sin(o)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function d(t){return t.initialize&&t.initialize(e),t}return null==e&&(e=[]),h(),t={tick:f,restart:function(){return u.restart(s),t},stop:function(){return u.stop(),t},nodes:function(n){return arguments.length?(e=n,h(),l.each(d),t):e},alpha:function(e){return arguments.length?(n=+e,t):n},alphaMin:function(e){return arguments.length?(r=+e,t):r},alphaDecay:function(e){return arguments.length?(a=+e,t):+a},alphaTarget:function(e){return arguments.length?(o=+e,t):o},velocityDecay:function(e){return arguments.length?(i=1-e,t):1-i},force:function(e,n){return arguments.length>1?(null==n?l.remove(e):l.set(e,d(n)),t):l.get(e)},find:function(t,n,r){var a,o,i,l,u,c=0,s=e.length;for(null==r?r=1/0:r*=r,c=0;c<s;++c)(i=(a=t-(l=e[c]).x)*a+(o=n-l.y)*o)<r&&(u=l,r=i);return u},on:function(e,n){return arguments.length>1?(c.on(e,n),t):c.on(e)}}}function gu(){var e,t,n,r,a=Ql(-30),o=1,i=1/0,l=.81;function u(r){var a,o=e.length,i=tu(e,fu,hu).visitAfter(s);for(n=r,a=0;a<o;++a)t=e[a],i.visit(f)}function c(){if(e){var t,n,o=e.length;for(r=new Array(o),t=0;t<o;++t)n=e[t],r[n.index]=+a(n,t,e)}}function s(e){var t,n,a,o,i,l=0,u=0;if(e.length){for(a=o=i=0;i<4;++i)(t=e[i])&&(n=Math.abs(t.value))&&(l+=t.value,u+=n,a+=n*t.x,o+=n*t.y);e.x=a/u,e.y=o/u}else{(t=e).x=t.data.x,t.y=t.data.y;do{l+=r[t.data.index]}while(t=t.next)}e.value=l}function f(e,a,u,c){if(!e.value)return!0;var s=e.x-t.x,f=e.y-t.y,h=c-a,d=s*s+f*f;if(h*h/l<d)return d<i&&(0===s&&(d+=(s=$l())*s),0===f&&(d+=(f=$l())*f),d<o&&(d=Math.sqrt(o*d)),t.vx+=s*e.value*n/d,t.vy+=f*e.value*n/d),!0;if(!(e.length||d>=i)){(e.data!==t||e.next)&&(0===s&&(d+=(s=$l())*s),0===f&&(d+=(f=$l())*f),d<o&&(d=Math.sqrt(o*d)));do{e.data!==t&&(h=r[e.data.index]*n/d,t.vx+=s*h,t.vy+=f*h)}while(e=e.next)}}return u.initialize=function(t){e=t,c()},u.strength=function(e){return arguments.length?(a="function"==typeof e?e:Ql(+e),c(),u):a},u.distanceMin=function(e){return arguments.length?(o=e*e,u):Math.sqrt(o)},u.distanceMax=function(e){return arguments.length?(i=e*e,u):Math.sqrt(i)},u.theta=function(e){return arguments.length?(l=e*e,u):Math.sqrt(l)},u}function vu(e,t,n){var r,a,o,i=Ql(.1);function l(e){for(var i=0,l=r.length;i<l;++i){var u=r[i],c=u.x-t||1e-6,s=u.y-n||1e-6,f=Math.sqrt(c*c+s*s),h=(o[i]-f)*a[i]*e/f;u.vx+=c*h,u.vy+=s*h}}function u(){if(r){var t,n=r.length;for(a=new Array(n),o=new Array(n),t=0;t<n;++t)o[t]=+e(r[t],t,r),a[t]=isNaN(o[t])?0:+i(r[t],t,r)}}return"function"!=typeof e&&(e=Ql(+e)),null==t&&(t=0),null==n&&(n=0),l.initialize=function(e){r=e,u()},l.strength=function(e){return arguments.length?(i="function"==typeof e?e:Ql(+e),u(),l):i},l.radius=function(t){return arguments.length?(e="function"==typeof t?t:Ql(+t),u(),l):e},l.x=function(e){return arguments.length?(t=+e,l):t},l.y=function(e){return arguments.length?(n=+e,l):n},l}function yu(e){var t,n,r,a=Ql(.1);function o(e){for(var a,o=0,i=t.length;o<i;++o)(a=t[o]).vx+=(r[o]-a.x)*n[o]*e}function i(){if(t){var o,i=t.length;for(n=new Array(i),r=new Array(i),o=0;o<i;++o)n[o]=isNaN(r[o]=+e(t[o],o,t))?0:+a(t[o],o,t)}}return"function"!=typeof e&&(e=Ql(null==e?0:+e)),o.initialize=function(e){t=e,i()},o.strength=function(e){return arguments.length?(a="function"==typeof e?e:Ql(+e),i(),o):a},o.x=function(t){return arguments.length?(e="function"==typeof t?t:Ql(+t),i(),o):e},o}function bu(e){var t,n,r,a=Ql(.1);function o(e){for(var a,o=0,i=t.length;o<i;++o)(a=t[o]).vy+=(r[o]-a.y)*n[o]*e}function i(){if(t){var o,i=t.length;for(n=new Array(i),r=new Array(i),o=0;o<i;++o)n[o]=isNaN(r[o]=+e(t[o],o,t))?0:+a(t[o],o,t)}}return"function"!=typeof e&&(e=Ql(null==e?0:+e)),o.initialize=function(e){t=e,i()},o.strength=function(e){return arguments.length?(a="function"==typeof e?e:Ql(+e),i(),o):a},o.y=function(t){return arguments.length?(e="function"==typeof t?t:Ql(+t),i(),o):e},o}function wu(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function _u(e){return(e=wu(Math.abs(e)))?e[1]:NaN}var Eu,xu=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ku(e){if(!(t=xu.exec(e)))throw new Error("invalid format: "+e);var t;return new Mu({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function Mu(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function Su(e,t){var n=wu(e,t);if(!n)return e+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}ku.prototype=Mu.prototype,Mu.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Tu={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return Su(100*e,t)},r:Su,s:function(e,t){var n=wu(e,t);if(!n)return e+"";var r=n[0],a=n[1],o=a-(Eu=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,i=r.length;return o===i?r:o>i?r+new Array(o-i+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+wu(e,Math.max(0,t+o-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function Au(e){return e}var Cu,Pu,Nu,Iu=Array.prototype.map,Ru=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Ou(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?Au:(t=Iu.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var a=e.length,o=[],i=0,l=t[0],u=0;a>0&&l>0&&(u+l+1>r&&(l=Math.max(1,r-u)),o.push(e.substring(a-=l,a+l)),!((u+=l+1)>r));)l=t[i=(i+1)%t.length];return o.reverse().join(n)}),a=void 0===e.currency?"":e.currency[0]+"",o=void 0===e.currency?"":e.currency[1]+"",i=void 0===e.decimal?".":e.decimal+"",l=void 0===e.numerals?Au:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(Iu.call(e.numerals,String)),u=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"-":e.minus+"",s=void 0===e.nan?"NaN":e.nan+"";function f(e){var t=(e=ku(e)).fill,n=e.align,f=e.sign,h=e.symbol,d=e.zero,p=e.width,m=e.comma,g=e.precision,v=e.trim,y=e.type;"n"===y?(m=!0,y="g"):Tu[y]||(void 0===g&&(g=12),v=!0,y="g"),(d||"0"===t&&"="===n)&&(d=!0,t="0",n="=");var b="$"===h?a:"#"===h&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",w="$"===h?o:/[%p]/.test(y)?u:"",_=Tu[y],E=/[defgprs%]/.test(y);function x(e){var a,o,u,h=b,x=w;if("c"===y)x=_(e)+x,e="";else{var k=(e=+e)<0||1/e<0;if(e=isNaN(e)?s:_(Math.abs(e),g),v&&(e=function(e){e:for(var t,n=e.length,r=1,a=-1;r<n;++r)switch(e[r]){case".":a=t=r;break;case"0":0===a&&(a=r),t=r;break;default:if(!+e[r])break e;a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(t+1):e}(e)),k&&0==+e&&"+"!==f&&(k=!1),h=(k?"("===f?f:c:"-"===f||"("===f?"":f)+h,x=("s"===y?Ru[8+Eu/3]:"")+x+(k&&"("===f?")":""),E)for(a=-1,o=e.length;++a<o;)if(48>(u=e.charCodeAt(a))||u>57){x=(46===u?i+e.slice(a+1):e.slice(a))+x,e=e.slice(0,a);break}}m&&!d&&(e=r(e,1/0));var M=h.length+e.length+x.length,S=M<p?new Array(p-M+1).join(t):"";switch(m&&d&&(e=r(S+e,S.length?p-x.length:1/0),S=""),n){case"<":e=h+e+x+S;break;case"=":e=h+S+e+x;break;case"^":e=S.slice(0,M=S.length>>1)+h+e+x+S.slice(M);break;default:e=S+h+e+x}return l(e)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),x.toString=function(){return e+""},x}return{format:f,formatPrefix:function(e,t){var n=f(((e=ku(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(_u(t)/3))),a=Math.pow(10,-r),o=Ru[8+r/3];return function(e){return n(a*e)+o}}}}function Hu(e){return Cu=Ou(e),Pu=Cu.format,Nu=Cu.formatPrefix,Cu}function Lu(e){return Math.max(0,-_u(Math.abs(e)))}function ju(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(_u(t)/3)))-_u(Math.abs(e)))}function zu(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,_u(t)-_u(e))+1}function Du(){return new Bu}function Bu(){this.reset()}Hu({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),Bu.prototype={constructor:Bu,reset:function(){this.s=this.t=0},add:function(e){Fu(qu,e,this.t),Fu(this,qu.s,this.s),this.s?this.t+=qu.t:this.s=qu.t},valueOf:function(){return this.s}};var qu=new Bu;function Fu(e,t,n){var r=e.s=t+n,a=r-t,o=r-a;e.t=t-o+(n-a)}var Uu=1e-6,Vu=1e-12,Gu=Math.PI,Wu=Gu/2,Yu=Gu/4,Xu=2*Gu,Qu=180/Gu,$u=Gu/180,Ju=Math.abs,Zu=Math.atan,Ku=Math.atan2,ec=Math.cos,tc=Math.ceil,nc=Math.exp,rc=(Math.floor,Math.log),ac=Math.pow,oc=Math.sin,ic=Math.sign||function(e){return e>0?1:e<0?-1:0},lc=Math.sqrt,uc=Math.tan;function cc(e){return e>1?0:e<-1?Gu:Math.acos(e)}function sc(e){return e>1?Wu:e<-1?-Wu:Math.asin(e)}function fc(e){return(e=oc(e/2))*e}function hc(){}function dc(e,t){e&&mc.hasOwnProperty(e.type)&&mc[e.type](e,t)}var pc={Feature:function(e,t){dc(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,a=n.length;++r<a;)dc(n[r].geometry,t)}},mc={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){gc(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)gc(n[r],t,0)},Polygon:function(e,t){vc(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)vc(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,a=n.length;++r<a;)dc(n[r],t)}};function gc(e,t,n){var r,a=-1,o=e.length-n;for(t.lineStart();++a<o;)r=e[a],t.point(r[0],r[1],r[2]);t.lineEnd()}function vc(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)gc(e[n],t,1);t.polygonEnd()}function yc(e,t){e&&pc.hasOwnProperty(e.type)?pc[e.type](e,t):dc(e,t)}var bc,wc,_c,Ec,xc,kc=Du(),Mc=Du(),Sc={point:hc,lineStart:hc,lineEnd:hc,polygonStart:function(){kc.reset(),Sc.lineStart=Tc,Sc.lineEnd=Ac},polygonEnd:function(){var e=+kc;Mc.add(e<0?Xu+e:e),this.lineStart=this.lineEnd=this.point=hc},sphere:function(){Mc.add(Xu)}};function Tc(){Sc.point=Cc}function Ac(){Pc(bc,wc)}function Cc(e,t){Sc.point=Pc,bc=e,wc=t,_c=e*=$u,Ec=ec(t=(t*=$u)/2+Yu),xc=oc(t)}function Pc(e,t){var n=(e*=$u)-_c,r=n>=0?1:-1,a=r*n,o=ec(t=(t*=$u)/2+Yu),i=oc(t),l=xc*i,u=Ec*o+l*ec(a),c=l*r*oc(a);kc.add(Ku(c,u)),_c=e,Ec=o,xc=i}function Nc(e){return Mc.reset(),yc(e,Sc),2*Mc}function Ic(e){return[Ku(e[1],e[0]),sc(e[2])]}function Rc(e){var t=e[0],n=e[1],r=ec(n);return[r*ec(t),r*oc(t),oc(n)]}function Oc(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Hc(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Lc(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function jc(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function zc(e){var t=lc(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Dc,Bc,qc,Fc,Uc,Vc,Gc,Wc,Yc,Xc,Qc,$c,Jc,Zc,Kc,es,ts,ns,rs,as,os,is,ls,us,cs,ss,fs=Du(),hs={point:ds,lineStart:ms,lineEnd:gs,polygonStart:function(){hs.point=vs,hs.lineStart=ys,hs.lineEnd=bs,fs.reset(),Sc.polygonStart()},polygonEnd:function(){Sc.polygonEnd(),hs.point=ds,hs.lineStart=ms,hs.lineEnd=gs,kc<0?(Dc=-(qc=180),Bc=-(Fc=90)):fs>Uu?Fc=90:fs<-Uu&&(Bc=-90),Xc[0]=Dc,Xc[1]=qc},sphere:function(){Dc=-(qc=180),Bc=-(Fc=90)}};function ds(e,t){Yc.push(Xc=[Dc=e,qc=e]),t<Bc&&(Bc=t),t>Fc&&(Fc=t)}function ps(e,t){var n=Rc([e*$u,t*$u]);if(Wc){var r=Hc(Wc,n),a=Hc([r[1],-r[0],0],r);zc(a),a=Ic(a);var o,i=e-Uc,l=i>0?1:-1,u=a[0]*Qu*l,c=Ju(i)>180;c^(l*Uc<u&&u<l*e)?(o=a[1]*Qu)>Fc&&(Fc=o):c^(l*Uc<(u=(u+360)%360-180)&&u<l*e)?(o=-a[1]*Qu)<Bc&&(Bc=o):(t<Bc&&(Bc=t),t>Fc&&(Fc=t)),c?e<Uc?ws(Dc,e)>ws(Dc,qc)&&(qc=e):ws(e,qc)>ws(Dc,qc)&&(Dc=e):qc>=Dc?(e<Dc&&(Dc=e),e>qc&&(qc=e)):e>Uc?ws(Dc,e)>ws(Dc,qc)&&(qc=e):ws(e,qc)>ws(Dc,qc)&&(Dc=e)}else Yc.push(Xc=[Dc=e,qc=e]);t<Bc&&(Bc=t),t>Fc&&(Fc=t),Wc=n,Uc=e}function ms(){hs.point=ps}function gs(){Xc[0]=Dc,Xc[1]=qc,hs.point=ds,Wc=null}function vs(e,t){if(Wc){var n=e-Uc;fs.add(Ju(n)>180?n+(n>0?360:-360):n)}else Vc=e,Gc=t;Sc.point(e,t),ps(e,t)}function ys(){Sc.lineStart()}function bs(){vs(Vc,Gc),Sc.lineEnd(),Ju(fs)>Uu&&(Dc=-(qc=180)),Xc[0]=Dc,Xc[1]=qc,Wc=null}function ws(e,t){return(t-=e)<0?t+360:t}function _s(e,t){return e[0]-t[0]}function Es(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function xs(e){var t,n,r,a,o,i,l;if(Fc=qc=-(Dc=Bc=1/0),Yc=[],yc(e,hs),n=Yc.length){for(Yc.sort(_s),t=1,o=[r=Yc[0]];t<n;++t)Es(r,(a=Yc[t])[0])||Es(r,a[1])?(ws(r[0],a[1])>ws(r[0],r[1])&&(r[1]=a[1]),ws(a[0],r[1])>ws(r[0],r[1])&&(r[0]=a[0])):o.push(r=a);for(i=-1/0,t=0,r=o[n=o.length-1];t<=n;r=a,++t)a=o[t],(l=ws(r[1],a[0]))>i&&(i=l,Dc=a[0],qc=r[1])}return Yc=Xc=null,Dc===1/0||Bc===1/0?[[NaN,NaN],[NaN,NaN]]:[[Dc,Bc],[qc,Fc]]}var ks={sphere:hc,point:Ms,lineStart:Ts,lineEnd:Ps,polygonStart:function(){ks.lineStart=Ns,ks.lineEnd=Is},polygonEnd:function(){ks.lineStart=Ts,ks.lineEnd=Ps}};function Ms(e,t){e*=$u;var n=ec(t*=$u);Ss(n*ec(e),n*oc(e),oc(t))}function Ss(e,t,n){++Qc,Jc+=(e-Jc)/Qc,Zc+=(t-Zc)/Qc,Kc+=(n-Kc)/Qc}function Ts(){ks.point=As}function As(e,t){e*=$u;var n=ec(t*=$u);us=n*ec(e),cs=n*oc(e),ss=oc(t),ks.point=Cs,Ss(us,cs,ss)}function Cs(e,t){e*=$u;var n=ec(t*=$u),r=n*ec(e),a=n*oc(e),o=oc(t),i=Ku(lc((i=cs*o-ss*a)*i+(i=ss*r-us*o)*i+(i=us*a-cs*r)*i),us*r+cs*a+ss*o);$c+=i,es+=i*(us+(us=r)),ts+=i*(cs+(cs=a)),ns+=i*(ss+(ss=o)),Ss(us,cs,ss)}function Ps(){ks.point=Ms}function Ns(){ks.point=Rs}function Is(){Os(is,ls),ks.point=Ms}function Rs(e,t){is=e,ls=t,e*=$u,t*=$u,ks.point=Os;var n=ec(t);us=n*ec(e),cs=n*oc(e),ss=oc(t),Ss(us,cs,ss)}function Os(e,t){e*=$u;var n=ec(t*=$u),r=n*ec(e),a=n*oc(e),o=oc(t),i=cs*o-ss*a,l=ss*r-us*o,u=us*a-cs*r,c=lc(i*i+l*l+u*u),s=sc(c),f=c&&-s/c;rs+=f*i,as+=f*l,os+=f*u,$c+=s,es+=s*(us+(us=r)),ts+=s*(cs+(cs=a)),ns+=s*(ss+(ss=o)),Ss(us,cs,ss)}function Hs(e){Qc=$c=Jc=Zc=Kc=es=ts=ns=rs=as=os=0,yc(e,ks);var t=rs,n=as,r=os,a=t*t+n*n+r*r;return a<Vu&&(t=es,n=ts,r=ns,$c<Uu&&(t=Jc,n=Zc,r=Kc),(a=t*t+n*n+r*r)<Vu)?[NaN,NaN]:[Ku(n,t)*Qu,sc(r/lc(a))*Qu]}function Ls(e){return function(){return e}}function js(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return(n=t.invert(n,r))&&e.invert(n[0],n[1])}),n}function zs(e,t){return[Ju(e)>Gu?e+Math.round(-e/Xu)*Xu:e,t]}function Ds(e,t,n){return(e%=Xu)?t||n?js(qs(e),Fs(t,n)):qs(e):t||n?Fs(t,n):zs}function Bs(e){return function(t,n){return[(t+=e)>Gu?t-Xu:t<-Gu?t+Xu:t,n]}}function qs(e){var t=Bs(e);return t.invert=Bs(-e),t}function Fs(e,t){var n=ec(e),r=oc(e),a=ec(t),o=oc(t);function i(e,t){var i=ec(t),l=ec(e)*i,u=oc(e)*i,c=oc(t),s=c*n+l*r;return[Ku(u*a-s*o,l*n-c*r),sc(s*a+u*o)]}return i.invert=function(e,t){var i=ec(t),l=ec(e)*i,u=oc(e)*i,c=oc(t),s=c*a-u*o;return[Ku(u*a+c*o,l*n+s*r),sc(s*n-l*r)]},i}function Us(e){function t(t){return(t=e(t[0]*$u,t[1]*$u))[0]*=Qu,t[1]*=Qu,t}return e=Ds(e[0]*$u,e[1]*$u,e.length>2?e[2]*$u:0),t.invert=function(t){return(t=e.invert(t[0]*$u,t[1]*$u))[0]*=Qu,t[1]*=Qu,t},t}function Vs(e,t,n,r,a,o){if(n){var i=ec(t),l=oc(t),u=r*n;null==a?(a=t+r*Xu,o=t-u/2):(a=Gs(i,a),o=Gs(i,o),(r>0?a<o:a>o)&&(a+=r*Xu));for(var c,s=a;r>0?s>o:s<o;s-=u)c=Ic([i,-l*ec(s),-l*oc(s)]),e.point(c[0],c[1])}}function Gs(e,t){(t=Rc(t))[0]-=e,zc(t);var n=cc(-t[1]);return((-t[2]<0?-n:n)+Xu-Uu)%Xu}function Ws(){var e,t,n=Ls([0,0]),r=Ls(90),a=Ls(6),o={point:function(n,r){e.push(n=t(n,r)),n[0]*=Qu,n[1]*=Qu}};function i(){var i=n.apply(this,arguments),l=r.apply(this,arguments)*$u,u=a.apply(this,arguments)*$u;return e=[],t=Ds(-i[0]*$u,-i[1]*$u,0).invert,Vs(o,l,u,1),i={type:"Polygon",coordinates:[e]},e=t=null,i}return i.center=function(e){return arguments.length?(n="function"==typeof e?e:Ls([+e[0],+e[1]]),i):n},i.radius=function(e){return arguments.length?(r="function"==typeof e?e:Ls(+e),i):r},i.precision=function(e){return arguments.length?(a="function"==typeof e?e:Ls(+e),i):a},i}function Ys(){var e,t=[];return{point:function(t,n,r){e.push([t,n,r])},lineStart:function(){t.push(e=[])},lineEnd:hc,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function Xs(e,t){return Ju(e[0]-t[0])<Uu&&Ju(e[1]-t[1])<Uu}function Qs(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function $s(e,t,n,r,a){var o,i,l=[],u=[];if(e.forEach((function(e){if(!((t=e.length-1)<=0)){var t,n,r=e[0],i=e[t];if(Xs(r,i)){if(!r[2]&&!i[2]){for(a.lineStart(),o=0;o<t;++o)a.point((r=e[o])[0],r[1]);return void a.lineEnd()}i[0]+=2*Uu}l.push(n=new Qs(r,e,null,!0)),u.push(n.o=new Qs(r,null,n,!1)),l.push(n=new Qs(i,e,null,!1)),u.push(n.o=new Qs(i,null,n,!0))}})),l.length){for(u.sort(t),Js(l),Js(u),o=0,i=u.length;o<i;++o)u[o].e=n=!n;for(var c,s,f=l[0];;){for(var h=f,d=!0;h.v;)if((h=h.n)===f)return;c=h.z,a.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(o=0,i=c.length;o<i;++o)a.point((s=c[o])[0],s[1]);else r(h.x,h.n.x,1,a);h=h.n}else{if(d)for(c=h.p.z,o=c.length-1;o>=0;--o)a.point((s=c[o])[0],s[1]);else r(h.x,h.p.x,-1,a);h=h.p}c=(h=h.o).z,d=!d}while(!h.v);a.lineEnd()}}}function Js(e){if(t=e.length){for(var t,n,r=0,a=e[0];++r<t;)a.n=n=e[r],n.p=a,a=n;a.n=n=e[0],n.p=a}}zs.invert=zs;var Zs=Du();function Ks(e){return Ju(e[0])<=Gu?e[0]:ic(e[0])*((Ju(e[0])+Gu)%Xu-Gu)}function ef(e,t){var n=Ks(t),r=t[1],a=oc(r),o=[oc(n),-ec(n),0],i=0,l=0;Zs.reset(),1===a?r=Wu+Uu:-1===a&&(r=-Wu-Uu);for(var u=0,c=e.length;u<c;++u)if(f=(s=e[u]).length)for(var s,f,h=s[f-1],d=Ks(h),p=h[1]/2+Yu,m=oc(p),g=ec(p),v=0;v<f;++v,d=b,m=_,g=E,h=y){var y=s[v],b=Ks(y),w=y[1]/2+Yu,_=oc(w),E=ec(w),x=b-d,k=x>=0?1:-1,M=k*x,S=M>Gu,T=m*_;if(Zs.add(Ku(T*k*oc(M),g*E+T*ec(M))),i+=S?x+k*Xu:x,S^d>=n^b>=n){var A=Hc(Rc(h),Rc(y));zc(A);var C=Hc(o,A);zc(C);var P=(S^x>=0?-1:1)*sc(C[2]);(r>P||r===P&&(A[0]||A[1]))&&(l+=S^x>=0?1:-1)}}return(i<-Uu||i<Uu&&Zs<-Uu)^1&l}function tf(e,t,n,r){return function(a){var o,i,l,u=t(a),c=Ys(),s=t(c),f=!1,h={point:d,lineStart:m,lineEnd:g,polygonStart:function(){h.point=v,h.lineStart=y,h.lineEnd=b,i=[],o=[]},polygonEnd:function(){h.point=d,h.lineStart=m,h.lineEnd=g,i=z(i);var e=ef(o,r);i.length?(f||(a.polygonStart(),f=!0),$s(i,rf,e,n,a)):e&&(f||(a.polygonStart(),f=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),f&&(a.polygonEnd(),f=!1),i=o=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function d(t,n){e(t,n)&&a.point(t,n)}function p(e,t){u.point(e,t)}function m(){h.point=p,u.lineStart()}function g(){h.point=d,u.lineEnd()}function v(e,t){l.push([e,t]),s.point(e,t)}function y(){s.lineStart(),l=[]}function b(){v(l[0][0],l[0][1]),s.lineEnd();var e,t,n,r,u=s.clean(),h=c.result(),d=h.length;if(l.pop(),o.push(l),l=null,d)if(1&u){if((t=(n=h[0]).length-1)>0){for(f||(a.polygonStart(),f=!0),a.lineStart(),e=0;e<t;++e)a.point((r=n[e])[0],r[1]);a.lineEnd()}}else d>1&&2&u&&h.push(h.pop().concat(h.shift())),i.push(h.filter(nf))}return h}}function nf(e){return e.length>1}function rf(e,t){return((e=e.x)[0]<0?e[1]-Wu-Uu:Wu-e[1])-((t=t.x)[0]<0?t[1]-Wu-Uu:Wu-t[1])}var af=tf((function(){return!0}),(function(e){var t,n=NaN,r=NaN,a=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(o,i){var l=o>0?Gu:-Gu,u=Ju(o-n);Ju(u-Gu)<Uu?(e.point(n,r=(r+i)/2>0?Wu:-Wu),e.point(a,r),e.lineEnd(),e.lineStart(),e.point(l,r),e.point(o,r),t=0):a!==l&&u>=Gu&&(Ju(n-a)<Uu&&(n-=a*Uu),Ju(o-l)<Uu&&(o-=l*Uu),r=function(e,t,n,r){var a,o,i=oc(e-n);return Ju(i)>Uu?Zu((oc(t)*(o=ec(r))*oc(n)-oc(r)*(a=ec(t))*oc(e))/(a*o*i)):(t+r)/2}(n,r,o,i),e.point(a,r),e.lineEnd(),e.lineStart(),e.point(l,r),t=0),e.point(n=o,r=i),a=l},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}}),(function(e,t,n,r){var a;if(null==e)a=n*Wu,r.point(-Gu,a),r.point(0,a),r.point(Gu,a),r.point(Gu,0),r.point(Gu,-a),r.point(0,-a),r.point(-Gu,-a),r.point(-Gu,0),r.point(-Gu,a);else if(Ju(e[0]-t[0])>Uu){var o=e[0]<t[0]?Gu:-Gu;a=n*o/2,r.point(-o,a),r.point(0,a),r.point(o,a)}else r.point(t[0],t[1])}),[-Gu,-Wu]);function of(e){var t=ec(e),n=6*$u,r=t>0,a=Ju(t)>Uu;function o(e,n){return ec(e)*ec(n)>t}function i(e,n,r){var a=[1,0,0],o=Hc(Rc(e),Rc(n)),i=Oc(o,o),l=o[0],u=i-l*l;if(!u)return!r&&e;var c=t*i/u,s=-t*l/u,f=Hc(a,o),h=jc(a,c);Lc(h,jc(o,s));var d=f,p=Oc(h,d),m=Oc(d,d),g=p*p-m*(Oc(h,h)-1);if(!(g<0)){var v=lc(g),y=jc(d,(-p-v)/m);if(Lc(y,h),y=Ic(y),!r)return y;var b,w=e[0],_=n[0],E=e[1],x=n[1];_<w&&(b=w,w=_,_=b);var k=_-w,M=Ju(k-Gu)<Uu;if(!M&&x<E&&(b=E,E=x,x=b),M||k<Uu?M?E+x>0^y[1]<(Ju(y[0]-w)<Uu?E:x):E<=y[1]&&y[1]<=x:k>Gu^(w<=y[0]&&y[0]<=_)){var S=jc(d,(-p+v)/m);return Lc(S,h),[y,Ic(S)]}}}function l(t,n){var a=r?e:Gu-e,o=0;return t<-a?o|=1:t>a&&(o|=2),n<-a?o|=4:n>a&&(o|=8),o}return tf(o,(function(e){var t,n,u,c,s;return{lineStart:function(){c=u=!1,s=1},point:function(f,h){var d,p=[f,h],m=o(f,h),g=r?m?0:l(f,h):m?l(f+(f<0?Gu:-Gu),h):0;if(!t&&(c=u=m)&&e.lineStart(),m!==u&&(!(d=i(t,p))||Xs(t,d)||Xs(p,d))&&(p[2]=1),m!==u)s=0,m?(e.lineStart(),d=i(p,t),e.point(d[0],d[1])):(d=i(t,p),e.point(d[0],d[1],2),e.lineEnd()),t=d;else if(a&&t&&r^m){var v;g&n||!(v=i(p,t,!0))||(s=0,r?(e.lineStart(),e.point(v[0][0],v[0][1]),e.point(v[1][0],v[1][1]),e.lineEnd()):(e.point(v[1][0],v[1][1]),e.lineEnd(),e.lineStart(),e.point(v[0][0],v[0][1],3)))}!m||t&&Xs(t,p)||e.point(p[0],p[1]),t=p,u=m,n=g},lineEnd:function(){u&&e.lineEnd(),t=null},clean:function(){return s|(c&&u)<<1}}}),(function(t,r,a,o){Vs(o,e,n,a,t,r)}),r?[0,-e]:[-Gu,e-Gu])}var lf=1e9,uf=-lf;function cf(e,t,n,r){function a(a,o){return e<=a&&a<=n&&t<=o&&o<=r}function o(a,o,l,c){var s=0,f=0;if(null==a||(s=i(a,l))!==(f=i(o,l))||u(a,o)<0^l>0)do{c.point(0===s||3===s?e:n,s>1?r:t)}while((s=(s+l+4)%4)!==f);else c.point(o[0],o[1])}function i(r,a){return Ju(r[0]-e)<Uu?a>0?0:3:Ju(r[0]-n)<Uu?a>0?2:1:Ju(r[1]-t)<Uu?a>0?1:0:a>0?3:2}function l(e,t){return u(e.x,t.x)}function u(e,t){var n=i(e,1),r=i(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(i){var u,c,s,f,h,d,p,m,g,v,y,b=i,w=Ys(),_={point:E,lineStart:function(){_.point=x,c&&c.push(s=[]);v=!0,g=!1,p=m=NaN},lineEnd:function(){u&&(x(f,h),d&&g&&w.rejoin(),u.push(w.result()));_.point=E,g&&b.lineEnd()},polygonStart:function(){b=w,u=[],c=[],y=!0},polygonEnd:function(){var t=function(){for(var t=0,n=0,a=c.length;n<a;++n)for(var o,i,l=c[n],u=1,s=l.length,f=l[0],h=f[0],d=f[1];u<s;++u)o=h,i=d,h=(f=l[u])[0],d=f[1],i<=r?d>r&&(h-o)*(r-i)>(d-i)*(e-o)&&++t:d<=r&&(h-o)*(r-i)<(d-i)*(e-o)&&--t;return t}(),n=y&&t,a=(u=z(u)).length;(n||a)&&(i.polygonStart(),n&&(i.lineStart(),o(null,null,1,i),i.lineEnd()),a&&$s(u,l,t,o,i),i.polygonEnd());b=i,u=c=s=null}};function E(e,t){a(e,t)&&b.point(e,t)}function x(o,i){var l=a(o,i);if(c&&s.push([o,i]),v)f=o,h=i,d=l,v=!1,l&&(b.lineStart(),b.point(o,i));else if(l&&g)b.point(o,i);else{var u=[p=Math.max(uf,Math.min(lf,p)),m=Math.max(uf,Math.min(lf,m))],w=[o=Math.max(uf,Math.min(lf,o)),i=Math.max(uf,Math.min(lf,i))];!function(e,t,n,r,a,o){var i,l=e[0],u=e[1],c=0,s=1,f=t[0]-l,h=t[1]-u;if(i=n-l,f||!(i>0)){if(i/=f,f<0){if(i<c)return;i<s&&(s=i)}else if(f>0){if(i>s)return;i>c&&(c=i)}if(i=a-l,f||!(i<0)){if(i/=f,f<0){if(i>s)return;i>c&&(c=i)}else if(f>0){if(i<c)return;i<s&&(s=i)}if(i=r-u,h||!(i>0)){if(i/=h,h<0){if(i<c)return;i<s&&(s=i)}else if(h>0){if(i>s)return;i>c&&(c=i)}if(i=o-u,h||!(i<0)){if(i/=h,h<0){if(i>s)return;i>c&&(c=i)}else if(h>0){if(i<c)return;i<s&&(s=i)}return c>0&&(e[0]=l+c*f,e[1]=u+c*h),s<1&&(t[0]=l+s*f,t[1]=u+s*h),!0}}}}}(u,w,e,t,n,r)?l&&(b.lineStart(),b.point(o,i),y=!1):(g||(b.lineStart(),b.point(u[0],u[1])),b.point(w[0],w[1]),l||b.lineEnd(),y=!1)}p=o,m=i,g=l}return _}}function sf(){var e,t,n,r=0,a=0,o=960,i=500;return n={stream:function(n){return e&&t===n?e:e=cf(r,a,o,i)(t=n)},extent:function(l){return arguments.length?(r=+l[0][0],a=+l[0][1],o=+l[1][0],i=+l[1][1],e=t=null,n):[[r,a],[o,i]]}}}var ff,hf,df,pf=Du(),mf={sphere:hc,point:hc,lineStart:function(){mf.point=vf,mf.lineEnd=gf},lineEnd:hc,polygonStart:hc,polygonEnd:hc};function gf(){mf.point=mf.lineEnd=hc}function vf(e,t){ff=e*=$u,hf=oc(t*=$u),df=ec(t),mf.point=yf}function yf(e,t){e*=$u;var n=oc(t*=$u),r=ec(t),a=Ju(e-ff),o=ec(a),i=r*oc(a),l=df*n-hf*r*o,u=hf*n+df*r*o;pf.add(Ku(lc(i*i+l*l),u)),ff=e,hf=n,df=r}function bf(e){return pf.reset(),yc(e,mf),+pf}var wf=[null,null],_f={type:"LineString",coordinates:wf};function Ef(e,t){return wf[0]=e,wf[1]=t,bf(_f)}var xf={Feature:function(e,t){return Mf(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,a=n.length;++r<a;)if(Mf(n[r].geometry,t))return!0;return!1}},kf={Sphere:function(){return!0},Point:function(e,t){return Sf(e.coordinates,t)},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)if(Sf(n[r],t))return!0;return!1},LineString:function(e,t){return Tf(e.coordinates,t)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)if(Tf(n[r],t))return!0;return!1},Polygon:function(e,t){return Af(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)if(Af(n[r],t))return!0;return!1},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,a=n.length;++r<a;)if(Mf(n[r],t))return!0;return!1}};function Mf(e,t){return!(!e||!kf.hasOwnProperty(e.type))&&kf[e.type](e,t)}function Sf(e,t){return 0===Ef(e,t)}function Tf(e,t){for(var n,r,a,o=0,i=e.length;o<i;o++){if(0===(r=Ef(e[o],t)))return!0;if(o>0&&(a=Ef(e[o],e[o-1]))>0&&n<=a&&r<=a&&(n+r-a)*(1-Math.pow((n-r)/a,2))<Vu*a)return!0;n=r}return!1}function Af(e,t){return!!ef(e.map(Cf),Pf(t))}function Cf(e){return(e=e.map(Pf)).pop(),e}function Pf(e){return[e[0]*$u,e[1]*$u]}function Nf(e,t){return(e&&xf.hasOwnProperty(e.type)?xf[e.type]:Mf)(e,t)}function If(e,t,n){var r=x(e,t-Uu,n).concat(t);return function(e){return r.map((function(t){return[e,t]}))}}function Rf(e,t,n){var r=x(e,t-Uu,n).concat(t);return function(e){return r.map((function(t){return[t,e]}))}}function Of(){var e,t,n,r,a,o,i,l,u,c,s,f,h=10,d=h,p=90,m=360,g=2.5;function v(){return{type:"MultiLineString",coordinates:y()}}function y(){return x(tc(r/p)*p,n,p).map(s).concat(x(tc(l/m)*m,i,m).map(f)).concat(x(tc(t/h)*h,e,h).filter((function(e){return Ju(e%p)>Uu})).map(u)).concat(x(tc(o/d)*d,a,d).filter((function(e){return Ju(e%m)>Uu})).map(c))}return v.lines=function(){return y().map((function(e){return{type:"LineString",coordinates:e}}))},v.outline=function(){return{type:"Polygon",coordinates:[s(r).concat(f(i).slice(1),s(n).reverse().slice(1),f(l).reverse().slice(1))]}},v.extent=function(e){return arguments.length?v.extentMajor(e).extentMinor(e):v.extentMinor()},v.extentMajor=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],l=+e[0][1],i=+e[1][1],r>n&&(e=r,r=n,n=e),l>i&&(e=l,l=i,i=e),v.precision(g)):[[r,l],[n,i]]},v.extentMinor=function(n){return arguments.length?(t=+n[0][0],e=+n[1][0],o=+n[0][1],a=+n[1][1],t>e&&(n=t,t=e,e=n),o>a&&(n=o,o=a,a=n),v.precision(g)):[[t,o],[e,a]]},v.step=function(e){return arguments.length?v.stepMajor(e).stepMinor(e):v.stepMinor()},v.stepMajor=function(e){return arguments.length?(p=+e[0],m=+e[1],v):[p,m]},v.stepMinor=function(e){return arguments.length?(h=+e[0],d=+e[1],v):[h,d]},v.precision=function(h){return arguments.length?(g=+h,u=If(o,a,90),c=Rf(t,e,g),s=If(l,i,90),f=Rf(r,n,g),v):g},v.extentMajor([[-180,-90+Uu],[180,90-Uu]]).extentMinor([[-180,-80-Uu],[180,80+Uu]])}function Hf(){return Of()()}function Lf(e,t){var n=e[0]*$u,r=e[1]*$u,a=t[0]*$u,o=t[1]*$u,i=ec(r),l=oc(r),u=ec(o),c=oc(o),s=i*ec(n),f=i*oc(n),h=u*ec(a),d=u*oc(a),p=2*sc(lc(fc(o-r)+i*u*fc(a-n))),m=oc(p),g=p?function(e){var t=oc(e*=p)/m,n=oc(p-e)/m,r=n*s+t*h,a=n*f+t*d,o=n*l+t*c;return[Ku(a,r)*Qu,Ku(o,lc(r*r+a*a))*Qu]}:function(){return[n*Qu,r*Qu]};return g.distance=p,g}function jf(e){return e}var zf,Df,Bf,qf,Ff=Du(),Uf=Du(),Vf={point:hc,lineStart:hc,lineEnd:hc,polygonStart:function(){Vf.lineStart=Gf,Vf.lineEnd=Xf},polygonEnd:function(){Vf.lineStart=Vf.lineEnd=Vf.point=hc,Ff.add(Ju(Uf)),Uf.reset()},result:function(){var e=Ff/2;return Ff.reset(),e}};function Gf(){Vf.point=Wf}function Wf(e,t){Vf.point=Yf,zf=Bf=e,Df=qf=t}function Yf(e,t){Uf.add(qf*e-Bf*t),Bf=e,qf=t}function Xf(){Yf(zf,Df)}var Qf=Vf,$f=1/0,Jf=$f,Zf=-$f,Kf=Zf,eh={point:function(e,t){e<$f&&($f=e);e>Zf&&(Zf=e);t<Jf&&(Jf=t);t>Kf&&(Kf=t)},lineStart:hc,lineEnd:hc,polygonStart:hc,polygonEnd:hc,result:function(){var e=[[$f,Jf],[Zf,Kf]];return Zf=Kf=-(Jf=$f=1/0),e}};var th,nh,rh,ah,oh=eh,ih=0,lh=0,uh=0,ch=0,sh=0,fh=0,hh=0,dh=0,ph=0,mh={point:gh,lineStart:vh,lineEnd:wh,polygonStart:function(){mh.lineStart=_h,mh.lineEnd=Eh},polygonEnd:function(){mh.point=gh,mh.lineStart=vh,mh.lineEnd=wh},result:function(){var e=ph?[hh/ph,dh/ph]:fh?[ch/fh,sh/fh]:uh?[ih/uh,lh/uh]:[NaN,NaN];return ih=lh=uh=ch=sh=fh=hh=dh=ph=0,e}};function gh(e,t){ih+=e,lh+=t,++uh}function vh(){mh.point=yh}function yh(e,t){mh.point=bh,gh(rh=e,ah=t)}function bh(e,t){var n=e-rh,r=t-ah,a=lc(n*n+r*r);ch+=a*(rh+e)/2,sh+=a*(ah+t)/2,fh+=a,gh(rh=e,ah=t)}function wh(){mh.point=gh}function _h(){mh.point=xh}function Eh(){kh(th,nh)}function xh(e,t){mh.point=kh,gh(th=rh=e,nh=ah=t)}function kh(e,t){var n=e-rh,r=t-ah,a=lc(n*n+r*r);ch+=a*(rh+e)/2,sh+=a*(ah+t)/2,fh+=a,hh+=(a=ah*e-rh*t)*(rh+e),dh+=a*(ah+t),ph+=3*a,gh(rh=e,ah=t)}var Mh=mh;function Sh(e){this._context=e}Sh.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Xu)}},result:hc};var Th,Ah,Ch,Ph,Nh,Ih=Du(),Rh={point:hc,lineStart:function(){Rh.point=Oh},lineEnd:function(){Th&&Hh(Ah,Ch),Rh.point=hc},polygonStart:function(){Th=!0},polygonEnd:function(){Th=null},result:function(){var e=+Ih;return Ih.reset(),e}};function Oh(e,t){Rh.point=Hh,Ah=Ph=e,Ch=Nh=t}function Hh(e,t){Ph-=e,Nh-=t,Ih.add(lc(Ph*Ph+Nh*Nh)),Ph=e,Nh=t}var Lh=Rh;function jh(){this._string=[]}function zh(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function Dh(e,t){var n,r,a=4.5;function o(e){return e&&("function"==typeof a&&r.pointRadius(+a.apply(this,arguments)),yc(e,n(r))),r.result()}return o.area=function(e){return yc(e,n(Qf)),Qf.result()},o.measure=function(e){return yc(e,n(Lh)),Lh.result()},o.bounds=function(e){return yc(e,n(oh)),oh.result()},o.centroid=function(e){return yc(e,n(Mh)),Mh.result()},o.projection=function(t){return arguments.length?(n=null==t?(e=null,jf):(e=t).stream,o):e},o.context=function(e){return arguments.length?(r=null==e?(t=null,new jh):new Sh(t=e),"function"!=typeof a&&r.pointRadius(a),o):t},o.pointRadius=function(e){return arguments.length?(a="function"==typeof e?e:(r.pointRadius(+e),+e),o):a},o.projection(e).context(t)}function Bh(e){return{stream:qh(e)}}function qh(e){return function(t){var n=new Fh;for(var r in e)n[r]=e[r];return n.stream=t,n}}function Fh(){}function Uh(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=r&&e.clipExtent(null),yc(n,e.stream(oh)),t(oh.result()),null!=r&&e.clipExtent(r),e}function Vh(e,t,n){return Uh(e,(function(n){var r=t[1][0]-t[0][0],a=t[1][1]-t[0][1],o=Math.min(r/(n[1][0]-n[0][0]),a/(n[1][1]-n[0][1])),i=+t[0][0]+(r-o*(n[1][0]+n[0][0]))/2,l=+t[0][1]+(a-o*(n[1][1]+n[0][1]))/2;e.scale(150*o).translate([i,l])}),n)}function Gh(e,t,n){return Vh(e,[[0,0],t],n)}function Wh(e,t,n){return Uh(e,(function(n){var r=+t,a=r/(n[1][0]-n[0][0]),o=(r-a*(n[1][0]+n[0][0]))/2,i=-a*n[0][1];e.scale(150*a).translate([o,i])}),n)}function Yh(e,t,n){return Uh(e,(function(n){var r=+t,a=r/(n[1][1]-n[0][1]),o=-a*n[0][0],i=(r-a*(n[1][1]+n[0][1]))/2;e.scale(150*a).translate([o,i])}),n)}jh.prototype={_radius:4.5,_circle:zh(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._string.push("M",e,",",t),this._point=1;break;case 1:this._string.push("L",e,",",t);break;default:null==this._circle&&(this._circle=zh(this._radius)),this._string.push("M",e,",",t,this._circle)}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}return null}},Fh.prototype={constructor:Fh,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Xh=16,Qh=ec(30*$u);function $h(e,t){return+t?function(e,t){function n(r,a,o,i,l,u,c,s,f,h,d,p,m,g){var v=c-r,y=s-a,b=v*v+y*y;if(b>4*t&&m--){var w=i+h,_=l+d,E=u+p,x=lc(w*w+_*_+E*E),k=sc(E/=x),M=Ju(Ju(E)-1)<Uu||Ju(o-f)<Uu?(o+f)/2:Ku(_,w),S=e(M,k),T=S[0],A=S[1],C=T-r,P=A-a,N=y*C-v*P;(N*N/b>t||Ju((v*C+y*P)/b-.5)>.3||i*h+l*d+u*p<Qh)&&(n(r,a,o,i,l,u,T,A,M,w/=x,_/=x,E,m,g),g.point(T,A),n(T,A,M,w,_,E,c,s,f,h,d,p,m,g))}}return function(t){var r,a,o,i,l,u,c,s,f,h,d,p,m={point:g,lineStart:v,lineEnd:b,polygonStart:function(){t.polygonStart(),m.lineStart=w},polygonEnd:function(){t.polygonEnd(),m.lineStart=v}};function g(n,r){n=e(n,r),t.point(n[0],n[1])}function v(){s=NaN,m.point=y,t.lineStart()}function y(r,a){var o=Rc([r,a]),i=e(r,a);n(s,f,c,h,d,p,s=i[0],f=i[1],c=r,h=o[0],d=o[1],p=o[2],Xh,t),t.point(s,f)}function b(){m.point=g,t.lineEnd()}function w(){v(),m.point=_,m.lineEnd=E}function _(e,t){y(r=e,t),a=s,o=f,i=h,l=d,u=p,m.point=y}function E(){n(s,f,c,h,d,p,a,o,r,i,l,u,Xh,t),m.lineEnd=b,b()}return m}}(e,t):function(e){return qh({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}(e)}var Jh=qh({point:function(e,t){this.stream.point(e*$u,t*$u)}});function Zh(e,t,n,r,a){function o(o,i){return[t+e*(o*=r),n-e*(i*=a)]}return o.invert=function(o,i){return[(o-t)/e*r,(n-i)/e*a]},o}function Kh(e,t,n,r,a,o){var i=ec(o),l=oc(o),u=i*e,c=l*e,s=i/e,f=l/e,h=(l*n-i*t)/e,d=(l*t+i*n)/e;function p(e,o){return[u*(e*=r)-c*(o*=a)+t,n-c*e-u*o]}return p.invert=function(e,t){return[r*(s*e-f*t+h),a*(d-f*e-s*t)]},p}function ed(e){return td((function(){return e}))()}function td(e){var t,n,r,a,o,i,l,u,c,s,f=150,h=480,d=250,p=0,m=0,g=0,v=0,y=0,b=0,w=1,_=1,E=null,x=af,k=null,M=jf,S=.5;function T(e){return u(e[0]*$u,e[1]*$u)}function A(e){return(e=u.invert(e[0],e[1]))&&[e[0]*Qu,e[1]*Qu]}function C(){var e=Kh(f,0,0,w,_,b).apply(null,t(p,m)),r=(b?Kh:Zh)(f,h-e[0],d-e[1],w,_,b);return n=Ds(g,v,y),l=js(t,r),u=js(n,l),i=$h(l,S),P()}function P(){return c=s=null,T}return T.stream=function(e){return c&&s===e?c:c=Jh(function(e){return qh({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}(n)(x(i(M(s=e)))))},T.preclip=function(e){return arguments.length?(x=e,E=void 0,P()):x},T.postclip=function(e){return arguments.length?(M=e,k=r=a=o=null,P()):M},T.clipAngle=function(e){return arguments.length?(x=+e?of(E=e*$u):(E=null,af),P()):E*Qu},T.clipExtent=function(e){return arguments.length?(M=null==e?(k=r=a=o=null,jf):cf(k=+e[0][0],r=+e[0][1],a=+e[1][0],o=+e[1][1]),P()):null==k?null:[[k,r],[a,o]]},T.scale=function(e){return arguments.length?(f=+e,C()):f},T.translate=function(e){return arguments.length?(h=+e[0],d=+e[1],C()):[h,d]},T.center=function(e){return arguments.length?(p=e[0]%360*$u,m=e[1]%360*$u,C()):[p*Qu,m*Qu]},T.rotate=function(e){return arguments.length?(g=e[0]%360*$u,v=e[1]%360*$u,y=e.length>2?e[2]%360*$u:0,C()):[g*Qu,v*Qu,y*Qu]},T.angle=function(e){return arguments.length?(b=e%360*$u,C()):b*Qu},T.reflectX=function(e){return arguments.length?(w=e?-1:1,C()):w<0},T.reflectY=function(e){return arguments.length?(_=e?-1:1,C()):_<0},T.precision=function(e){return arguments.length?(i=$h(l,S=e*e),P()):lc(S)},T.fitExtent=function(e,t){return Vh(T,e,t)},T.fitSize=function(e,t){return Gh(T,e,t)},T.fitWidth=function(e,t){return Wh(T,e,t)},T.fitHeight=function(e,t){return Yh(T,e,t)},function(){return t=e.apply(this,arguments),T.invert=t.invert&&A,C()}}function nd(e){var t=0,n=Gu/3,r=td(e),a=r(t,n);return a.parallels=function(e){return arguments.length?r(t=e[0]*$u,n=e[1]*$u):[t*Qu,n*Qu]},a}function rd(e,t){var n=oc(e),r=(n+oc(t))/2;if(Ju(r)<Uu)return function(e){var t=ec(e);function n(e,n){return[e*t,oc(n)/t]}return n.invert=function(e,n){return[e/t,sc(n*t)]},n}(e);var a=1+n*(2*r-n),o=lc(a)/r;function i(e,t){var n=lc(a-2*r*oc(t))/r;return[n*oc(e*=r),o-n*ec(e)]}return i.invert=function(e,t){var n=o-t,i=Ku(e,Ju(n))*ic(n);return n*r<0&&(i-=Gu*ic(e)*ic(n)),[i/r,sc((a-(e*e+n*n)*r*r)/(2*r))]},i}function ad(){return nd(rd).scale(155.424).center([0,33.6442])}function od(){return ad().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function id(){var e,t,n,r,a,o,i=od(),l=ad().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=ad().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(e,t){o=[e,t]}};function s(e){var t=e[0],i=e[1];return o=null,n.point(t,i),o||(r.point(t,i),o)||(a.point(t,i),o)}function f(){return e=t=null,s}return s.invert=function(e){var t=i.scale(),n=i.translate(),r=(e[0]-n[0])/t,a=(e[1]-n[1])/t;return(a>=.12&&a<.234&&r>=-.425&&r<-.214?l:a>=.166&&a<.234&&r>=-.214&&r<-.115?u:i).invert(e)},s.stream=function(n){return e&&t===n?e:(r=[i.stream(t=n),l.stream(n),u.stream(n)],a=r.length,e={point:function(e,t){for(var n=-1;++n<a;)r[n].point(e,t)},sphere:function(){for(var e=-1;++e<a;)r[e].sphere()},lineStart:function(){for(var e=-1;++e<a;)r[e].lineStart()},lineEnd:function(){for(var e=-1;++e<a;)r[e].lineEnd()},polygonStart:function(){for(var e=-1;++e<a;)r[e].polygonStart()},polygonEnd:function(){for(var e=-1;++e<a;)r[e].polygonEnd()}});var r,a},s.precision=function(e){return arguments.length?(i.precision(e),l.precision(e),u.precision(e),f()):i.precision()},s.scale=function(e){return arguments.length?(i.scale(e),l.scale(.35*e),u.scale(e),s.translate(i.translate())):i.scale()},s.translate=function(e){if(!arguments.length)return i.translate();var t=i.scale(),o=+e[0],s=+e[1];return n=i.translate(e).clipExtent([[o-.455*t,s-.238*t],[o+.455*t,s+.238*t]]).stream(c),r=l.translate([o-.307*t,s+.201*t]).clipExtent([[o-.425*t+Uu,s+.12*t+Uu],[o-.214*t-Uu,s+.234*t-Uu]]).stream(c),a=u.translate([o-.205*t,s+.212*t]).clipExtent([[o-.214*t+Uu,s+.166*t+Uu],[o-.115*t-Uu,s+.234*t-Uu]]).stream(c),f()},s.fitExtent=function(e,t){return Vh(s,e,t)},s.fitSize=function(e,t){return Gh(s,e,t)},s.fitWidth=function(e,t){return Wh(s,e,t)},s.fitHeight=function(e,t){return Yh(s,e,t)},s.scale(1070)}function ld(e){return function(t,n){var r=ec(t),a=ec(n),o=e(r*a);return[o*a*oc(t),o*oc(n)]}}function ud(e){return function(t,n){var r=lc(t*t+n*n),a=e(r),o=oc(a),i=ec(a);return[Ku(t*o,r*i),sc(r&&n*o/r)]}}var cd=ld((function(e){return lc(2/(1+e))}));function sd(){return ed(cd).scale(124.75).clipAngle(179.999)}cd.invert=ud((function(e){return 2*sc(e/2)}));var fd=ld((function(e){return(e=cc(e))&&e/oc(e)}));function hd(){return ed(fd).scale(79.4188).clipAngle(179.999)}function dd(e,t){return[e,rc(uc((Wu+t)/2))]}function pd(){return md(dd).scale(961/Xu)}function md(e){var t,n,r,a=ed(e),o=a.center,i=a.scale,l=a.translate,u=a.clipExtent,c=null;function s(){var o=Gu*i(),l=a(Us(a.rotate()).invert([0,0]));return u(null==c?[[l[0]-o,l[1]-o],[l[0]+o,l[1]+o]]:e===dd?[[Math.max(l[0]-o,c),t],[Math.min(l[0]+o,n),r]]:[[c,Math.max(l[1]-o,t)],[n,Math.min(l[1]+o,r)]])}return a.scale=function(e){return arguments.length?(i(e),s()):i()},a.translate=function(e){return arguments.length?(l(e),s()):l()},a.center=function(e){return arguments.length?(o(e),s()):o()},a.clipExtent=function(e){return arguments.length?(null==e?c=t=n=r=null:(c=+e[0][0],t=+e[0][1],n=+e[1][0],r=+e[1][1]),s()):null==c?null:[[c,t],[n,r]]},s()}function gd(e){return uc((Wu+e)/2)}function vd(e,t){var n=ec(e),r=e===t?oc(e):rc(n/ec(t))/rc(gd(t)/gd(e)),a=n*ac(gd(e),r)/r;if(!r)return dd;function o(e,t){a>0?t<-Wu+Uu&&(t=-Wu+Uu):t>Wu-Uu&&(t=Wu-Uu);var n=a/ac(gd(t),r);return[n*oc(r*e),a-n*ec(r*e)]}return o.invert=function(e,t){var n=a-t,o=ic(r)*lc(e*e+n*n),i=Ku(e,Ju(n))*ic(n);return n*r<0&&(i-=Gu*ic(e)*ic(n)),[i/r,2*Zu(ac(a/o,1/r))-Wu]},o}function yd(){return nd(vd).scale(109.5).parallels([30,30])}function bd(e,t){return[e,t]}function wd(){return ed(bd).scale(152.63)}function _d(e,t){var n=ec(e),r=e===t?oc(e):(n-ec(t))/(t-e),a=n/r+e;if(Ju(r)<Uu)return bd;function o(e,t){var n=a-t,o=r*e;return[n*oc(o),a-n*ec(o)]}return o.invert=function(e,t){var n=a-t,o=Ku(e,Ju(n))*ic(n);return n*r<0&&(o-=Gu*ic(e)*ic(n)),[o/r,a-ic(r)*lc(e*e+n*n)]},o}function Ed(){return nd(_d).scale(131.154).center([0,13.9389])}fd.invert=ud((function(e){return e})),dd.invert=function(e,t){return[e,2*Zu(nc(t))-Wu]},bd.invert=bd;var xd=1.340264,kd=-.081106,Md=893e-6,Sd=.003796,Td=lc(3)/2;function Ad(e,t){var n=sc(Td*oc(t)),r=n*n,a=r*r*r;return[e*ec(n)/(Td*(xd+3*kd*r+a*(7*Md+9*Sd*r))),n*(xd+kd*r+a*(Md+Sd*r))]}function Cd(){return ed(Ad).scale(177.158)}function Pd(e,t){var n=ec(t),r=ec(e)*n;return[n*oc(e)/r,oc(t)/r]}function Nd(){return ed(Pd).scale(144.049).clipAngle(60)}function Id(){var e,t,n,r,a,o,i,l=1,u=0,c=0,s=1,f=1,h=0,d=null,p=1,m=1,g=qh({point:function(e,t){var n=b([e,t]);this.stream.point(n[0],n[1])}}),v=jf;function y(){return p=l*s,m=l*f,o=i=null,b}function b(n){var r=n[0]*p,a=n[1]*m;if(h){var o=a*e-r*t;r=r*e+a*t,a=o}return[r+u,a+c]}return b.invert=function(n){var r=n[0]-u,a=n[1]-c;if(h){var o=a*e+r*t;r=r*e-a*t,a=o}return[r/p,a/m]},b.stream=function(e){return o&&i===e?o:o=g(v(i=e))},b.postclip=function(e){return arguments.length?(v=e,d=n=r=a=null,y()):v},b.clipExtent=function(e){return arguments.length?(v=null==e?(d=n=r=a=null,jf):cf(d=+e[0][0],n=+e[0][1],r=+e[1][0],a=+e[1][1]),y()):null==d?null:[[d,n],[r,a]]},b.scale=function(e){return arguments.length?(l=+e,y()):l},b.translate=function(e){return arguments.length?(u=+e[0],c=+e[1],y()):[u,c]},b.angle=function(n){return arguments.length?(t=oc(h=n%360*$u),e=ec(h),y()):h*Qu},b.reflectX=function(e){return arguments.length?(s=e?-1:1,y()):s<0},b.reflectY=function(e){return arguments.length?(f=e?-1:1,y()):f<0},b.fitExtent=function(e,t){return Vh(b,e,t)},b.fitSize=function(e,t){return Gh(b,e,t)},b.fitWidth=function(e,t){return Wh(b,e,t)},b.fitHeight=function(e,t){return Yh(b,e,t)},b}function Rd(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),t*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function Od(){return ed(Rd).scale(175.295)}function Hd(e,t){return[ec(t)*oc(e),oc(t)]}function Ld(){return ed(Hd).scale(249.5).clipAngle(90+Uu)}function jd(e,t){var n=ec(t),r=1+ec(e)*n;return[n*oc(e)/r,oc(t)/r]}function zd(){return ed(jd).scale(250).clipAngle(142)}function Dd(e,t){return[rc(uc((Wu+t)/2)),-e]}function Bd(){var e=md(Dd),t=e.center,n=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return arguments.length?n([e[0],e[1],e.length>2?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},n([0,0,90]).scale(159.155)}function qd(e,t){return e.parent===t.parent?1:2}function Fd(e,t){return e+t.x}function Ud(e,t){return Math.max(e,t.y)}function Vd(){var e=qd,t=1,n=1,r=!1;function a(a){var o,i=0;a.eachAfter((function(t){var n=t.children;n?(t.x=function(e){return e.reduce(Fd,0)/e.length}(n),t.y=function(e){return 1+e.reduce(Ud,0)}(n)):(t.x=o?i+=e(t,o):0,t.y=0,o=t)}));var l=function(e){for(var t;t=e.children;)e=t[0];return e}(a),u=function(e){for(var t;t=e.children;)e=t[t.length-1];return e}(a),c=l.x-e(l,u)/2,s=u.x+e(u,l)/2;return a.eachAfter(r?function(e){e.x=(e.x-a.x)*t,e.y=(a.y-e.y)*n}:function(e){e.x=(e.x-c)/(s-c)*t,e.y=(1-(a.y?e.y/a.y:1))*n})}return a.separation=function(t){return arguments.length?(e=t,a):e},a.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],a):r?null:[t,n]},a.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],a):r?[t,n]:null},a}function Gd(e){var t=0,n=e.children,r=n&&n.length;if(r)for(;--r>=0;)t+=n[r].value;else t=1;e.value=t}function Wd(e,t){var n,r,a,o,i,l=new $d(e),u=+e.value&&(l.value=e.value),c=[l];for(null==t&&(t=Yd);n=c.pop();)if(u&&(n.value=+n.data.value),(a=t(n.data))&&(i=a.length))for(n.children=new Array(i),o=i-1;o>=0;--o)c.push(r=n.children[o]=new $d(a[o])),r.parent=n,r.depth=n.depth+1;return l.eachBefore(Qd)}function Yd(e){return e.children}function Xd(e){e.data=e.data.data}function Qd(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function $d(e){this.data=e,this.depth=this.height=0,this.parent=null}Ad.invert=function(e,t){for(var n,r=t,a=r*r,o=a*a*a,i=0;i<12&&(o=(a=(r-=n=(r*(xd+kd*a+o*(Md+Sd*a))-t)/(xd+3*kd*a+o*(7*Md+9*Sd*a)))*r)*a*a,!(Ju(n)<Vu));++i);return[Td*e*(xd+3*kd*a+o*(7*Md+9*Sd*a))/ec(r),sc(oc(r)/Td)]},Pd.invert=ud(Zu),Rd.invert=function(e,t){var n,r=t,a=25;do{var o=r*r,i=o*o;r-=n=(r*(1.007226+o*(.015085+i*(.028874*o-.044475-.005916*i)))-t)/(1.007226+o*(.045255+i*(.259866*o-.311325-.005916*11*i)))}while(Ju(n)>Uu&&--a>0);return[e/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]},Hd.invert=ud(sc),jd.invert=ud((function(e){return 2*Zu(e)})),Dd.invert=function(e,t){return[-t,2*Zu(nc(e))-Wu]},$d.prototype=Wd.prototype={constructor:$d,count:function(){return this.eachAfter(Gd)},each:function(e){var t,n,r,a,o=this,i=[o];do{for(t=i.reverse(),i=[];o=t.pop();)if(e(o),n=o.children)for(r=0,a=n.length;r<a;++r)i.push(n[r])}while(i.length);return this},eachAfter:function(e){for(var t,n,r,a=this,o=[a],i=[];a=o.pop();)if(i.push(a),t=a.children)for(n=0,r=t.length;n<r;++n)o.push(t[n]);for(;a=i.pop();)e(a);return this},eachBefore:function(e){for(var t,n,r=this,a=[r];r=a.pop();)if(e(r),t=r.children)for(n=t.length-1;n>=0;--n)a.push(t[n]);return this},sum:function(e){return this.eachAfter((function(t){for(var n=+e(t.data)||0,r=t.children,a=r&&r.length;--a>=0;)n+=r[a].value;t.value=n}))},sort:function(e){return this.eachBefore((function(t){t.children&&t.children.sort(e)}))},path:function(e){for(var t=this,n=function(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),a=null;e=n.pop(),t=r.pop();for(;e===t;)a=e,e=n.pop(),t=r.pop();return a}(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var a=r.length;e!==n;)r.splice(a,0,e),e=e.parent;return r},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){var e=[];return this.each((function(t){e.push(t)})),e},leaves:function(){var e=[];return this.eachBefore((function(t){t.children||e.push(t)})),e},links:function(){var e=this,t=[];return e.each((function(n){n!==e&&t.push({source:n.parent,target:n})})),t},copy:function(){return Wd(this).eachBefore(Xd)}};var Jd=Array.prototype.slice;function Zd(e){for(var t,n,r=0,a=(e=function(e){for(var t,n,r=e.length;r;)n=Math.random()*r--|0,t=e[r],e[r]=e[n],e[n]=t;return e}(Jd.call(e))).length,o=[];r<a;)t=e[r],n&&tp(n,t)?++r:(n=rp(o=Kd(o,t)),r=0);return n}function Kd(e,t){var n,r;if(np(t,e))return[t];for(n=0;n<e.length;++n)if(ep(t,e[n])&&np(ap(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(ep(ap(e[n],e[r]),t)&&ep(ap(e[n],t),e[r])&&ep(ap(e[r],t),e[n])&&np(op(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function ep(e,t){var n=e.r-t.r,r=t.x-e.x,a=t.y-e.y;return n<0||n*n<r*r+a*a}function tp(e,t){var n=e.r-t.r+1e-6,r=t.x-e.x,a=t.y-e.y;return n>0&&n*n>r*r+a*a}function np(e,t){for(var n=0;n<t.length;++n)if(!tp(e,t[n]))return!1;return!0}function rp(e){switch(e.length){case 1:return function(e){return{x:e.x,y:e.y,r:e.r}}(e[0]);case 2:return ap(e[0],e[1]);case 3:return op(e[0],e[1],e[2])}}function ap(e,t){var n=e.x,r=e.y,a=e.r,o=t.x,i=t.y,l=t.r,u=o-n,c=i-r,s=l-a,f=Math.sqrt(u*u+c*c);return{x:(n+o+u/f*s)/2,y:(r+i+c/f*s)/2,r:(f+a+l)/2}}function op(e,t,n){var r=e.x,a=e.y,o=e.r,i=t.x,l=t.y,u=t.r,c=n.x,s=n.y,f=n.r,h=r-i,d=r-c,p=a-l,m=a-s,g=u-o,v=f-o,y=r*r+a*a-o*o,b=y-i*i-l*l+u*u,w=y-c*c-s*s+f*f,_=d*p-h*m,E=(p*w-m*b)/(2*_)-r,x=(m*g-p*v)/_,k=(d*b-h*w)/(2*_)-a,M=(h*v-d*g)/_,S=x*x+M*M-1,T=2*(o+E*x+k*M),A=E*E+k*k-o*o,C=-(S?(T+Math.sqrt(T*T-4*S*A))/(2*S):A/T);return{x:r+E+x*C,y:a+k+M*C,r:C}}function ip(e,t,n){var r,a,o,i,l=e.x-t.x,u=e.y-t.y,c=l*l+u*u;c?(a=t.r+n.r,a*=a,i=e.r+n.r,a>(i*=i)?(r=(c+i-a)/(2*c),o=Math.sqrt(Math.max(0,i/c-r*r)),n.x=e.x-r*l-o*u,n.y=e.y-r*u+o*l):(r=(c+a-i)/(2*c),o=Math.sqrt(Math.max(0,a/c-r*r)),n.x=t.x+r*l-o*u,n.y=t.y+r*u+o*l)):(n.x=t.x+n.r,n.y=t.y)}function lp(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,a=t.y-e.y;return n>0&&n*n>r*r+a*a}function up(e){var t=e._,n=e.next._,r=t.r+n.r,a=(t.x*n.r+n.x*t.r)/r,o=(t.y*n.r+n.y*t.r)/r;return a*a+o*o}function cp(e){this._=e,this.next=null,this.previous=null}function sp(e){if(!(a=e.length))return 0;var t,n,r,a,o,i,l,u,c,s,f;if((t=e[0]).x=0,t.y=0,!(a>1))return t.r;if(n=e[1],t.x=-n.r,n.x=t.r,n.y=0,!(a>2))return t.r+n.r;ip(n,t,r=e[2]),t=new cp(t),n=new cp(n),r=new cp(r),t.next=r.previous=n,n.next=t.previous=r,r.next=n.previous=t;e:for(l=3;l<a;++l){ip(t._,n._,r=e[l]),r=new cp(r),u=n.next,c=t.previous,s=n._.r,f=t._.r;do{if(s<=f){if(lp(u._,r._)){n=u,t.next=n,n.previous=t,--l;continue e}s+=u._.r,u=u.next}else{if(lp(c._,r._)){(t=c).next=n,n.previous=t,--l;continue e}f+=c._.r,c=c.previous}}while(u!==c.next);for(r.previous=t,r.next=n,t.next=n.previous=n=r,o=up(t);(r=r.next)!==n;)(i=up(r))<o&&(t=r,o=i);n=t.next}for(t=[n._],r=n;(r=r.next)!==n;)t.push(r._);for(r=Zd(t),l=0;l<a;++l)(t=e[l]).x-=r.x,t.y-=r.y;return r.r}function fp(e){return sp(e),e}function hp(e){if("function"!=typeof e)throw new Error;return e}function dp(){return 0}function pp(e){return function(){return e}}function mp(e){return Math.sqrt(e.value)}function gp(){var e=null,t=1,n=1,r=dp;function a(a){return a.x=t/2,a.y=n/2,e?a.eachBefore(vp(e)).eachAfter(yp(r,.5)).eachBefore(bp(1)):a.eachBefore(vp(mp)).eachAfter(yp(dp,1)).eachAfter(yp(r,a.r/Math.min(t,n))).eachBefore(bp(Math.min(t,n)/(2*a.r))),a}return a.radius=function(t){return arguments.length?(e=null==(n=t)?null:hp(n),a):e;var n},a.size=function(e){return arguments.length?(t=+e[0],n=+e[1],a):[t,n]},a.padding=function(e){return arguments.length?(r="function"==typeof e?e:pp(+e),a):r},a}function vp(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function yp(e,t){return function(n){if(r=n.children){var r,a,o,i=r.length,l=e(n)*t||0;if(l)for(a=0;a<i;++a)r[a].r+=l;if(o=sp(r),l)for(a=0;a<i;++a)r[a].r-=l;n.r=o+l}}}function bp(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function wp(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function _p(e,t,n,r,a){for(var o,i=e.children,l=-1,u=i.length,c=e.value&&(r-t)/e.value;++l<u;)(o=i[l]).y0=n,o.y1=a,o.x0=t,o.x1=t+=o.value*c}function Ep(){var e=1,t=1,n=0,r=!1;function a(a){var o=a.height+1;return a.x0=a.y0=n,a.x1=e,a.y1=t/o,a.eachBefore(function(e,t){return function(r){r.children&&_p(r,r.x0,e*(r.depth+1)/t,r.x1,e*(r.depth+2)/t);var a=r.x0,o=r.y0,i=r.x1-n,l=r.y1-n;i<a&&(a=i=(a+i)/2),l<o&&(o=l=(o+l)/2),r.x0=a,r.y0=o,r.x1=i,r.y1=l}}(t,o)),r&&a.eachBefore(wp),a}return a.round=function(e){return arguments.length?(r=!!e,a):r},a.size=function(n){return arguments.length?(e=+n[0],t=+n[1],a):[e,t]},a.padding=function(e){return arguments.length?(n=+e,a):n},a}var xp="$",kp={depth:-1},Mp={};function Sp(e){return e.id}function Tp(e){return e.parentId}function Ap(){var e=Sp,t=Tp;function n(n){var r,a,o,i,l,u,c,s=n.length,f=new Array(s),h={};for(a=0;a<s;++a)r=n[a],l=f[a]=new $d(r),null!=(u=e(r,a,n))&&(u+="")&&(h[c=xp+(l.id=u)]=c in h?Mp:l);for(a=0;a<s;++a)if(l=f[a],null!=(u=t(n[a],a,n))&&(u+="")){if(!(i=h[xp+u]))throw new Error("missing: "+u);if(i===Mp)throw new Error("ambiguous: "+u);i.children?i.children.push(l):i.children=[l],l.parent=i}else{if(o)throw new Error("multiple roots");o=l}if(!o)throw new Error("no root");if(o.parent=kp,o.eachBefore((function(e){e.depth=e.parent.depth+1,--s})).eachBefore(Qd),o.parent=null,s>0)throw new Error("cycle");return o}return n.id=function(t){return arguments.length?(e=hp(t),n):e},n.parentId=function(e){return arguments.length?(t=hp(e),n):t},n}function Cp(e,t){return e.parent===t.parent?1:2}function Pp(e){var t=e.children;return t?t[0]:e.t}function Np(e){var t=e.children;return t?t[t.length-1]:e.t}function Ip(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Rp(e,t,n){return e.a.parent===t.parent?e.a:n}function Op(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function Hp(){var e=Cp,t=1,n=1,r=null;function a(a){var u=function(e){for(var t,n,r,a,o,i=new Op(e,0),l=[i];t=l.pop();)if(r=t._.children)for(t.children=new Array(o=r.length),a=o-1;a>=0;--a)l.push(n=t.children[a]=new Op(r[a],a)),n.parent=t;return(i.parent=new Op(null,0)).children=[i],i}(a);if(u.eachAfter(o),u.parent.m=-u.z,u.eachBefore(i),r)a.eachBefore(l);else{var c=a,s=a,f=a;a.eachBefore((function(e){e.x<c.x&&(c=e),e.x>s.x&&(s=e),e.depth>f.depth&&(f=e)}));var h=c===s?1:e(c,s)/2,d=h-c.x,p=t/(s.x+h+d),m=n/(f.depth||1);a.eachBefore((function(e){e.x=(e.x+d)*p,e.y=e.depth*m}))}return a}function o(t){var n=t.children,r=t.parent.children,a=t.i?r[t.i-1]:null;if(n){!function(e){for(var t,n=0,r=0,a=e.children,o=a.length;--o>=0;)(t=a[o]).z+=n,t.m+=n,n+=t.s+(r+=t.c)}(t);var o=(n[0].z+n[n.length-1].z)/2;a?(t.z=a.z+e(t._,a._),t.m=t.z-o):t.z=o}else a&&(t.z=a.z+e(t._,a._));t.parent.A=function(t,n,r){if(n){for(var a,o=t,i=t,l=n,u=o.parent.children[0],c=o.m,s=i.m,f=l.m,h=u.m;l=Np(l),o=Pp(o),l&&o;)u=Pp(u),(i=Np(i)).a=t,(a=l.z+f-o.z-c+e(l._,o._))>0&&(Ip(Rp(l,t,r),t,a),c+=a,s+=a),f+=l.m,c+=o.m,h+=u.m,s+=i.m;l&&!Np(i)&&(i.t=l,i.m+=f-s),o&&!Pp(u)&&(u.t=o,u.m+=c-h,r=t)}return r}(t,a,t.parent.A||r[0])}function i(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function l(e){e.x*=t,e.y=e.depth*n}return a.separation=function(t){return arguments.length?(e=t,a):e},a.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],a):r?null:[t,n]},a.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],a):r?[t,n]:null},a}function Lp(e,t,n,r,a){for(var o,i=e.children,l=-1,u=i.length,c=e.value&&(a-n)/e.value;++l<u;)(o=i[l]).x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*c}Op.prototype=Object.create($d.prototype);var jp=(1+Math.sqrt(5))/2;function zp(e,t,n,r,a,o){for(var i,l,u,c,s,f,h,d,p,m,g,v=[],y=t.children,b=0,w=0,_=y.length,E=t.value;b<_;){u=a-n,c=o-r;do{s=y[w++].value}while(!s&&w<_);for(f=h=s,g=s*s*(m=Math.max(c/u,u/c)/(E*e)),p=Math.max(h/g,g/f);w<_;++w){if(s+=l=y[w].value,l<f&&(f=l),l>h&&(h=l),g=s*s*m,(d=Math.max(h/g,g/f))>p){s-=l;break}p=d}v.push(i={value:s,dice:u<c,children:y.slice(b,w)}),i.dice?_p(i,n,r,a,E?r+=c*s/E:o):Lp(i,n,r,E?n+=u*s/E:a,o),E-=s,b=w}return v}var Dp=function e(t){function n(e,n,r,a,o){zp(t,e,n,r,a,o)}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(jp);function Bp(){var e=Dp,t=!1,n=1,r=1,a=[0],o=dp,i=dp,l=dp,u=dp,c=dp;function s(e){return e.x0=e.y0=0,e.x1=n,e.y1=r,e.eachBefore(f),a=[0],t&&e.eachBefore(wp),e}function f(t){var n=a[t.depth],r=t.x0+n,s=t.y0+n,f=t.x1-n,h=t.y1-n;f<r&&(r=f=(r+f)/2),h<s&&(s=h=(s+h)/2),t.x0=r,t.y0=s,t.x1=f,t.y1=h,t.children&&(n=a[t.depth+1]=o(t)/2,r+=c(t)-n,s+=i(t)-n,(f-=l(t)-n)<r&&(r=f=(r+f)/2),(h-=u(t)-n)<s&&(s=h=(s+h)/2),e(t,r,s,f,h))}return s.round=function(e){return arguments.length?(t=!!e,s):t},s.size=function(e){return arguments.length?(n=+e[0],r=+e[1],s):[n,r]},s.tile=function(t){return arguments.length?(e=hp(t),s):e},s.padding=function(e){return arguments.length?s.paddingInner(e).paddingOuter(e):s.paddingInner()},s.paddingInner=function(e){return arguments.length?(o="function"==typeof e?e:pp(+e),s):o},s.paddingOuter=function(e){return arguments.length?s.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):s.paddingTop()},s.paddingTop=function(e){return arguments.length?(i="function"==typeof e?e:pp(+e),s):i},s.paddingRight=function(e){return arguments.length?(l="function"==typeof e?e:pp(+e),s):l},s.paddingBottom=function(e){return arguments.length?(u="function"==typeof e?e:pp(+e),s):u},s.paddingLeft=function(e){return arguments.length?(c="function"==typeof e?e:pp(+e),s):c},s}function qp(e,t,n,r,a){var o,i,l=e.children,u=l.length,c=new Array(u+1);for(c[0]=i=o=0;o<u;++o)c[o+1]=i+=l[o].value;!function e(t,n,r,a,o,i,u){if(t>=n-1){var s=l[t];return s.x0=a,s.y0=o,s.x1=i,void(s.y1=u)}var f=c[t],h=r/2+f,d=t+1,p=n-1;for(;d<p;){var m=d+p>>>1;c[m]<h?d=m+1:p=m}h-c[d-1]<c[d]-h&&t+1<d&&--d;var g=c[d]-f,v=r-g;if(i-a>u-o){var y=(a*v+i*g)/r;e(t,d,g,a,o,y,u),e(d,n,v,y,o,i,u)}else{var b=(o*v+u*g)/r;e(t,d,g,a,o,i,b),e(d,n,v,a,b,i,u)}}(0,u,e.value,t,n,r,a)}function Fp(e,t,n,r,a){(1&e.depth?Lp:_p)(e,t,n,r,a)}var Up=function e(t){function n(e,n,r,a,o){if((i=e._squarify)&&i.ratio===t)for(var i,l,u,c,s,f=-1,h=i.length,d=e.value;++f<h;){for(u=(l=i[f]).children,c=l.value=0,s=u.length;c<s;++c)l.value+=u[c].value;l.dice?_p(l,n,r,a,r+=(o-r)*l.value/d):Lp(l,n,r,n+=(a-n)*l.value/d,o),d-=l.value}else e._squarify=i=zp(t,e,n,r,a,o),i.ratio=t}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(jp);function Vp(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Gp(e,t){var n=gn(+e,+t);return function(e){var t=n(e);return t-360*Math.floor(t/360)}}function Wp(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Yp=Math.SQRT2,Xp=2,Qp=4,$p=1e-12;function Jp(e){return((e=Math.exp(e))+1/e)/2}function Zp(e,t){var n,r,a=e[0],o=e[1],i=e[2],l=t[0],u=t[1],c=t[2],s=l-a,f=u-o,h=s*s+f*f;if(h<$p)r=Math.log(c/i)/Yp,n=function(e){return[a+e*s,o+e*f,i*Math.exp(Yp*e*r)]};else{var d=Math.sqrt(h),p=(c*c-i*i+Qp*h)/(2*i*Xp*d),m=(c*c-i*i-Qp*h)/(2*c*Xp*d),g=Math.log(Math.sqrt(p*p+1)-p),v=Math.log(Math.sqrt(m*m+1)-m);r=(v-g)/Yp,n=function(e){var t=e*r,n=Jp(g),l=i/(Xp*d)*(n*function(e){return((e=Math.exp(2*e))-1)/(e+1)}(Yp*t+g)-function(e){return((e=Math.exp(e))-1/e)/2}(g));return[a+l*s,o+l*f,i*n/Jp(Yp*t+g)]}}return n.duration=1e3*r,n}function Kp(e){return function(t,n){var r=e((t=un(t)).h,(n=un(n)).h),a=yn(t.s,n.s),o=yn(t.l,n.l),i=yn(t.opacity,n.opacity);return function(e){return t.h=r(e),t.s=a(e),t.l=o(e),t.opacity=i(e),t+""}}}var em=Kp(gn),tm=Kp(yn);function nm(e,t){var n=yn((e=Ao(e)).l,(t=Ao(t)).l),r=yn(e.a,t.a),a=yn(e.b,t.b),o=yn(e.opacity,t.opacity);return function(t){return e.l=n(t),e.a=r(t),e.b=a(t),e.opacity=o(t),e+""}}function rm(e){return function(t,n){var r=e((t=Lo(t)).h,(n=Lo(n)).h),a=yn(t.c,n.c),o=yn(t.l,n.l),i=yn(t.opacity,n.opacity);return function(e){return t.h=r(e),t.c=a(e),t.l=o(e),t.opacity=i(e),t+""}}}var am=rm(gn),om=rm(yn);function im(e){return function t(n){function r(t,r){var a=e((t=Yo(t)).h,(r=Yo(r)).h),o=yn(t.s,r.s),i=yn(t.l,r.l),l=yn(t.opacity,r.opacity);return function(e){return t.h=a(e),t.s=o(e),t.l=i(Math.pow(e,n)),t.opacity=l(e),t+""}}return n=+n,r.gamma=t,r}(1)}var lm=im(gn),um=im(yn);function cm(e,t){for(var n=0,r=t.length-1,a=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(a,a=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return o[t](e-t)}}function sm(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}function fm(e){for(var t,n=-1,r=e.length,a=e[r-1],o=0;++n<r;)t=a,a=e[n],o+=t[1]*a[0]-t[0]*a[1];return o/2}function hm(e){for(var t,n,r=-1,a=e.length,o=0,i=0,l=e[a-1],u=0;++r<a;)t=l,l=e[r],u+=n=t[0]*l[1]-l[0]*t[1],o+=(t[0]+l[0])*n,i+=(t[1]+l[1])*n;return[o/(u*=3),i/u]}function dm(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function pm(e,t){return e[0]-t[0]||e[1]-t[1]}function mm(e){for(var t=e.length,n=[0,1],r=2,a=2;a<t;++a){for(;r>1&&dm(e[n[r-2]],e[n[r-1]],e[a])<=0;)--r;n[r++]=a}return n.slice(0,r)}function gm(e){if((n=e.length)<3)return null;var t,n,r=new Array(n),a=new Array(n);for(t=0;t<n;++t)r[t]=[+e[t][0],+e[t][1],t];for(r.sort(pm),t=0;t<n;++t)a[t]=[r[t][0],-r[t][1]];var o=mm(r),i=mm(a),l=i[0]===o[0],u=i[i.length-1]===o[o.length-1],c=[];for(t=o.length-1;t>=0;--t)c.push(e[r[o[t]][2]]);for(t=+l;t<i.length-u;++t)c.push(e[r[i[t]][2]]);return c}function vm(e,t){for(var n,r,a=e.length,o=e[a-1],i=t[0],l=t[1],u=o[0],c=o[1],s=!1,f=0;f<a;++f)n=(o=e[f])[0],(r=o[1])>l!=c>l&&i<(u-n)*(l-r)/(c-r)+n&&(s=!s),u=n,c=r;return s}function ym(e){for(var t,n,r=-1,a=e.length,o=e[a-1],i=o[0],l=o[1],u=0;++r<a;)t=i,n=l,t-=i=(o=e[r])[0],n-=l=o[1],u+=Math.sqrt(t*t+n*n);return u}function bm(){return Math.random()}var wm=function e(t){function n(e,n){return e=null==e?0:+e,n=null==n?1:+n,1===arguments.length?(n=e,e=0):n-=e,function(){return t()*n+e}}return n.source=e,n}(bm),_m=function e(t){function n(e,n){var r,a;return e=null==e?0:+e,n=null==n?1:+n,function(){var o;if(null!=r)o=r,r=null;else do{r=2*t()-1,o=2*t()-1,a=r*r+o*o}while(!a||a>1);return e+n*o*Math.sqrt(-2*Math.log(a)/a)}}return n.source=e,n}(bm),Em=function e(t){function n(){var e=_m.source(t).apply(this,arguments);return function(){return Math.exp(e())}}return n.source=e,n}(bm),xm=function e(t){function n(e){return function(){for(var n=0,r=0;r<e;++r)n+=t();return n}}return n.source=e,n}(bm),km=function e(t){function n(e){var n=xm.source(t)(e);return function(){return n()/e}}return n.source=e,n}(bm),Mm=function e(t){function n(e){return function(){return-Math.log(1-t())/e}}return n.source=e,n}(bm);function Sm(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function Tm(e,t){switch(arguments.length){case 0:break;case 1:this.interpolator(e);break;default:this.interpolator(t).domain(e)}return this}var Am=Array.prototype,Cm=Am.map,Pm=Am.slice,Nm={name:"implicit"};function Im(){var e=ro(),t=[],n=[],r=Nm;function a(a){var o=a+"",i=e.get(o);if(!i){if(r!==Nm)return r;e.set(o,i=t.push(a))}return n[(i-1)%n.length]}return a.domain=function(n){if(!arguments.length)return t.slice();t=[],e=ro();for(var r,o,i=-1,l=n.length;++i<l;)e.has(o=(r=n[i])+"")||e.set(o,t.push(r));return a},a.range=function(e){return arguments.length?(n=Pm.call(e),a):n.slice()},a.unknown=function(e){return arguments.length?(r=e,a):r},a.copy=function(){return Im(t,n).unknown(r)},Sm.apply(a,arguments),a}function Rm(){var e,t,n=Im().unknown(void 0),r=n.domain,a=n.range,o=[0,1],i=!1,l=0,u=0,c=.5;function s(){var n=r().length,s=o[1]<o[0],f=o[s-0],h=o[1-s];e=(h-f)/Math.max(1,n-l+2*u),i&&(e=Math.floor(e)),f+=(h-f-e*(n-l))*c,t=e*(1-l),i&&(f=Math.round(f),t=Math.round(t));var d=x(n).map((function(t){return f+e*t}));return a(s?d.reverse():d)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),s()):r()},n.range=function(e){return arguments.length?(o=[+e[0],+e[1]],s()):o.slice()},n.rangeRound=function(e){return o=[+e[0],+e[1]],i=!0,s()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(i=!!e,s()):i},n.padding=function(e){return arguments.length?(l=Math.min(1,u=+e),s()):l},n.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),s()):l},n.paddingOuter=function(e){return arguments.length?(u=+e,s()):u},n.align=function(e){return arguments.length?(c=Math.max(0,Math.min(1,e)),s()):c},n.copy=function(){return Rm(r(),o).round(i).paddingInner(l).paddingOuter(u).align(c)},Sm.apply(s(),arguments)}function Om(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Om(t())},e}function Hm(){return Om(Rm.apply(null,arguments).paddingInner(1))}function Lm(e){return+e}var jm=[0,1];function zm(e){return e}function Dm(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:function(e){return function(){return e}}(isNaN(t)?NaN:.5)}function Bm(e){var t,n=e[0],r=e[e.length-1];return n>r&&(t=n,n=r,r=t),function(e){return Math.max(n,Math.min(r,e))}}function qm(e,t,n){var r=e[0],a=e[1],o=t[0],i=t[1];return a<r?(r=Dm(a,r),o=n(i,o)):(r=Dm(r,a),o=n(o,i)),function(e){return o(r(e))}}function Fm(e,t,n){var r=Math.min(e.length,t.length)-1,a=new Array(r),o=new Array(r),i=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<r;)a[i]=Dm(e[i],e[i+1]),o[i]=n(t[i],t[i+1]);return function(t){var n=c(e,t,1,r)-1;return o[n](a[n](t))}}function Um(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Vm(){var e,t,n,r,a,o,i=jm,l=jm,u=Rn,c=zm;function s(){return r=Math.min(i.length,l.length)>2?Fm:qm,a=o=null,f}function f(t){return isNaN(t=+t)?n:(a||(a=r(i.map(e),l,u)))(e(c(t)))}return f.invert=function(n){return c(t((o||(o=r(l,i.map(e),An)))(n)))},f.domain=function(e){return arguments.length?(i=Cm.call(e,Lm),c===zm||(c=Bm(i)),s()):i.slice()},f.range=function(e){return arguments.length?(l=Pm.call(e),s()):l.slice()},f.rangeRound=function(e){return l=Pm.call(e),u=Wp,s()},f.clamp=function(e){return arguments.length?(c=e?Bm(i):zm,f):c!==zm},f.interpolate=function(e){return arguments.length?(u=e,s()):u},f.unknown=function(e){return arguments.length?(n=e,f):n},function(n,r){return e=n,t=r,s()}}function Gm(e,t){return Vm()(e,t)}function Wm(e,t,n,r){var a,o=C(e,t,n);switch((r=ku(null==r?",f":r)).type){case"s":var i=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(a=ju(o,i))||(r.precision=a),Nu(r,i);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(a=zu(o,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=a-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(a=Lu(o))||(r.precision=a-2*("%"===r.type))}return Pu(r)}function Ym(e){var t=e.domain;return e.ticks=function(e){var n=t();return T(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return Wm(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,a=t(),o=0,i=a.length-1,l=a[o],u=a[i];return u<l&&(r=l,l=u,u=r,r=o,o=i,i=r),(r=A(l,u,n))>0?r=A(l=Math.floor(l/r)*r,u=Math.ceil(u/r)*r,n):r<0&&(r=A(l=Math.ceil(l*r)/r,u=Math.floor(u*r)/r,n)),r>0?(a[o]=Math.floor(l/r)*r,a[i]=Math.ceil(u/r)*r,t(a)):r<0&&(a[o]=Math.ceil(l*r)/r,a[i]=Math.floor(u*r)/r,t(a)),e},e}function Xm(){var e=Gm(zm,zm);return e.copy=function(){return Um(e,Xm())},Sm.apply(e,arguments),Ym(e)}function Qm(e){var t;function n(e){return isNaN(e=+e)?t:e}return n.invert=n,n.domain=n.range=function(t){return arguments.length?(e=Cm.call(t,Lm),n):e.slice()},n.unknown=function(e){return arguments.length?(t=e,n):t},n.copy=function(){return Qm(e).unknown(t)},e=arguments.length?Cm.call(e,Lm):[0,1],Ym(n)}function $m(e,t){var n,r=0,a=(e=e.slice()).length-1,o=e[r],i=e[a];return i<o&&(n=r,r=a,a=n,n=o,o=i,i=n),e[r]=t.floor(o),e[a]=t.ceil(i),e}function Jm(e){return Math.log(e)}function Zm(e){return Math.exp(e)}function Km(e){return-Math.log(-e)}function eg(e){return-Math.exp(-e)}function tg(e){return isFinite(e)?+("1e"+e):e<0?0:e}function ng(e){return function(t){return-e(-t)}}function rg(e){var t,n,r=e(Jm,Zm),a=r.domain,o=10;function i(){return t=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}(o),n=function(e){return 10===e?tg:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}(o),a()[0]<0?(t=ng(t),n=ng(n),e(Km,eg)):e(Jm,Zm),r}return r.base=function(e){return arguments.length?(o=+e,i()):o},r.domain=function(e){return arguments.length?(a(e),i()):a()},r.ticks=function(e){var r,i=a(),l=i[0],u=i[i.length-1];(r=u<l)&&(h=l,l=u,u=h);var c,s,f,h=t(l),d=t(u),p=null==e?10:+e,m=[];if(!(o%1)&&d-h<p){if(h=Math.round(h)-1,d=Math.round(d)+1,l>0){for(;h<d;++h)for(s=1,c=n(h);s<o;++s)if(!((f=c*s)<l)){if(f>u)break;m.push(f)}}else for(;h<d;++h)for(s=o-1,c=n(h);s>=1;--s)if(!((f=c*s)<l)){if(f>u)break;m.push(f)}}else m=T(h,d,Math.min(d-h,p)).map(n);return r?m.reverse():m},r.tickFormat=function(e,a){if(null==a&&(a=10===o?".0e":","),"function"!=typeof a&&(a=Pu(a)),e===1/0)return a;null==e&&(e=10);var i=Math.max(1,o*e/r.ticks().length);return function(e){var r=e/n(Math.round(t(e)));return r*o<o-.5&&(r*=o),r<=i?a(e):""}},r.nice=function(){return a($m(a(),{floor:function(e){return n(Math.floor(t(e)))},ceil:function(e){return n(Math.ceil(t(e)))}}))},r}function ag(){var e=rg(Vm()).domain([1,10]);return e.copy=function(){return Um(e,ag()).base(e.base())},Sm.apply(e,arguments),e}function og(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function ig(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function lg(e){var t=1,n=e(og(t),ig(t));return n.constant=function(n){return arguments.length?e(og(t=+n),ig(t)):t},Ym(n)}function ug(){var e=lg(Vm());return e.copy=function(){return Um(e,ug()).constant(e.constant())},Sm.apply(e,arguments)}function cg(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function sg(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function fg(e){return e<0?-e*e:e*e}function hg(e){var t=e(zm,zm),n=1;return t.exponent=function(t){return arguments.length?1===(n=+t)?e(zm,zm):.5===n?e(sg,fg):e(cg(n),cg(1/n)):n},Ym(t)}function dg(){var e=hg(Vm());return e.copy=function(){return Um(e,dg()).exponent(e.exponent())},Sm.apply(e,arguments),e}function pg(){return dg.apply(null,arguments).exponent(.5)}function mg(){var e,t=[],n=[],r=[];function o(){var e=0,a=Math.max(1,n.length);for(r=new Array(a-1);++e<a;)r[e-1]=I(t,e/a);return i}function i(t){return isNaN(t=+t)?e:n[c(r,t)]}return i.invertExtent=function(e){var a=n.indexOf(e);return a<0?[NaN,NaN]:[a>0?r[a-1]:t[0],a<r.length?r[a]:t[t.length-1]]},i.domain=function(e){if(!arguments.length)return t.slice();t=[];for(var n,r=0,i=e.length;r<i;++r)null==(n=e[r])||isNaN(n=+n)||t.push(n);return t.sort(a),o()},i.range=function(e){return arguments.length?(n=Pm.call(e),o()):n.slice()},i.unknown=function(t){return arguments.length?(e=t,i):e},i.quantiles=function(){return r.slice()},i.copy=function(){return mg().domain(t).range(n).unknown(e)},Sm.apply(i,arguments)}function gg(){var e,t=0,n=1,r=1,a=[.5],o=[0,1];function i(t){return t<=t?o[c(a,t,0,r)]:e}function l(){var e=-1;for(a=new Array(r);++e<r;)a[e]=((e+1)*n-(e-r)*t)/(r+1);return i}return i.domain=function(e){return arguments.length?(t=+e[0],n=+e[1],l()):[t,n]},i.range=function(e){return arguments.length?(r=(o=Pm.call(e)).length-1,l()):o.slice()},i.invertExtent=function(e){var i=o.indexOf(e);return i<0?[NaN,NaN]:i<1?[t,a[0]]:i>=r?[a[r-1],n]:[a[i-1],a[i]]},i.unknown=function(t){return arguments.length?(e=t,i):i},i.thresholds=function(){return a.slice()},i.copy=function(){return gg().domain([t,n]).range(o).unknown(e)},Sm.apply(Ym(i),arguments)}function vg(){var e,t=[.5],n=[0,1],r=1;function a(a){return a<=a?n[c(t,a,0,r)]:e}return a.domain=function(e){return arguments.length?(t=Pm.call(e),r=Math.min(t.length,n.length-1),a):t.slice()},a.range=function(e){return arguments.length?(n=Pm.call(e),r=Math.min(t.length,n.length-1),a):n.slice()},a.invertExtent=function(e){var r=n.indexOf(e);return[t[r-1],t[r]]},a.unknown=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return vg().domain(t).range(n).unknown(e)},Sm.apply(a,arguments)}var yg=new Date,bg=new Date;function wg(e,t,n,r){function a(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return a.floor=function(t){return e(t=new Date(+t)),t},a.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},a.round=function(e){var t=a(e),n=a.ceil(e);return e-t<n-e?t:n},a.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},a.range=function(n,r,o){var i,l=[];if(n=a.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return l;do{l.push(i=new Date(+n)),t(n,o),e(n)}while(i<n&&n<r);return l},a.filter=function(n){return wg((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}))},n&&(a.count=function(t,r){return yg.setTime(+t),bg.setTime(+r),e(yg),e(bg),Math.floor(n(yg,bg))},a.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?a.filter(r?function(t){return r(t)%e==0}:function(t){return a.count(0,t)%e==0}):a:null}),a}var _g=wg((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()}));_g.every=function(e){return isFinite(e=Math.floor(e))&&e>0?wg((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};var Eg=_g,xg=_g.range,kg=wg((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()})),Mg=kg,Sg=kg.range,Tg=1e3,Ag=6e4,Cg=36e5,Pg=864e5,Ng=6048e5;function Ig(e){return wg((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ag)/Ng}))}var Rg=Ig(0),Og=Ig(1),Hg=Ig(2),Lg=Ig(3),jg=Ig(4),zg=Ig(5),Dg=Ig(6),Bg=Rg.range,qg=Og.range,Fg=Hg.range,Ug=Lg.range,Vg=jg.range,Gg=zg.range,Wg=Dg.range,Yg=wg((function(e){e.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ag)/Pg}),(function(e){return e.getDate()-1})),Xg=Yg,Qg=Yg.range,$g=wg((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Tg-e.getMinutes()*Ag)}),(function(e,t){e.setTime(+e+t*Cg)}),(function(e,t){return(t-e)/Cg}),(function(e){return e.getHours()})),Jg=$g,Zg=$g.range,Kg=wg((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Tg)}),(function(e,t){e.setTime(+e+t*Ag)}),(function(e,t){return(t-e)/Ag}),(function(e){return e.getMinutes()})),ev=Kg,tv=Kg.range,nv=wg((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+t*Tg)}),(function(e,t){return(t-e)/Tg}),(function(e){return e.getUTCSeconds()})),rv=nv,av=nv.range,ov=wg((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e}));ov.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?wg((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):ov:null};var iv=ov,lv=ov.range;function uv(e){return wg((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/Ng}))}var cv=uv(0),sv=uv(1),fv=uv(2),hv=uv(3),dv=uv(4),pv=uv(5),mv=uv(6),gv=cv.range,vv=sv.range,yv=fv.range,bv=hv.range,wv=dv.range,_v=pv.range,Ev=mv.range,xv=wg((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/Pg}),(function(e){return e.getUTCDate()-1})),kv=xv,Mv=xv.range,Sv=wg((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()}));Sv.every=function(e){return isFinite(e=Math.floor(e))&&e>0?wg((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};var Tv=Sv,Av=Sv.range;function Cv(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Pv(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Nv(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Iv(e){var t=e.dateTime,n=e.date,r=e.time,a=e.periods,o=e.days,i=e.shortDays,l=e.months,u=e.shortMonths,c=Vv(a),s=Gv(a),f=Vv(o),h=Gv(o),d=Vv(i),p=Gv(i),m=Vv(l),g=Gv(l),v=Vv(u),y=Gv(u),b={a:function(e){return i[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return u[e.getMonth()]},B:function(e){return l[e.getMonth()]},c:null,d:hy,e:hy,f:vy,g:Ay,G:Py,H:dy,I:py,j:my,L:gy,m:yy,M:by,p:function(e){return a[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:Ky,s:eb,S:wy,u:_y,U:Ey,V:ky,w:My,W:Sy,x:null,X:null,y:Ty,Y:Cy,Z:Ny,"%":Zy},w={a:function(e){return i[e.getUTCDay()]},A:function(e){return o[e.getUTCDay()]},b:function(e){return u[e.getUTCMonth()]},B:function(e){return l[e.getUTCMonth()]},c:null,d:Iy,e:Iy,f:jy,g:Xy,G:$y,H:Ry,I:Oy,j:Hy,L:Ly,m:zy,M:Dy,p:function(e){return a[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:Ky,s:eb,S:By,u:qy,U:Fy,V:Vy,w:Gy,W:Wy,x:null,X:null,y:Yy,Y:Qy,Z:Jy,"%":Zy},_={a:function(e,t,n){var r=d.exec(t.slice(n));return r?(e.w=p[r[0].toLowerCase()],n+r[0].length):-1},A:function(e,t,n){var r=f.exec(t.slice(n));return r?(e.w=h[r[0].toLowerCase()],n+r[0].length):-1},b:function(e,t,n){var r=v.exec(t.slice(n));return r?(e.m=y[r[0].toLowerCase()],n+r[0].length):-1},B:function(e,t,n){var r=m.exec(t.slice(n));return r?(e.m=g[r[0].toLowerCase()],n+r[0].length):-1},c:function(e,n,r){return k(e,t,n,r)},d:ny,e:ny,f:uy,g:Zv,G:Jv,H:ay,I:ay,j:ry,L:ly,m:ty,M:oy,p:function(e,t,n){var r=c.exec(t.slice(n));return r?(e.p=s[r[0].toLowerCase()],n+r[0].length):-1},q:ey,Q:sy,s:fy,S:iy,u:Yv,U:Xv,V:Qv,w:Wv,W:$v,x:function(e,t,r){return k(e,n,t,r)},X:function(e,t,n){return k(e,r,t,n)},y:Zv,Y:Jv,Z:Kv,"%":cy};function E(e,t){return function(n){var r,a,o,i=[],l=-1,u=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++l<c;)37===e.charCodeAt(l)&&(i.push(e.slice(u,l)),null!=(a=zv[r=e.charAt(++l)])?r=e.charAt(++l):a="e"===r?" ":"0",(o=t[r])&&(r=o(n,a)),i.push(r),u=l+1);return i.push(e.slice(u,l)),i.join("")}}function x(e,t){return function(n){var r,a,o=Nv(1900,void 0,1);if(k(o,e,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(t&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(a=(r=Pv(Nv(o.y,0,1))).getUTCDay(),r=a>4||0===a?sv.ceil(r):sv(r),r=kv.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(a=(r=Cv(Nv(o.y,0,1))).getDay(),r=a>4||0===a?Og.ceil(r):Og(r),r=Xg.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),a="Z"in o?Pv(Nv(o.y,0,1)).getUTCDay():Cv(Nv(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(a+5)%7:o.w+7*o.U-(a+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,Pv(o)):Cv(o)}}function k(e,t,n,r){for(var a,o,i=0,l=t.length,u=n.length;i<l;){if(r>=u)return-1;if(37===(a=t.charCodeAt(i++))){if(a=t.charAt(i++),!(o=_[a in zv?t.charAt(i++):a])||(r=o(e,n,r))<0)return-1}else if(a!=n.charCodeAt(r++))return-1}return r}return b.x=E(n,b),b.X=E(r,b),b.c=E(t,b),w.x=E(n,w),w.X=E(r,w),w.c=E(t,w),{format:function(e){var t=E(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=x(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=E(e+="",w);return t.toString=function(){return e},t},utcParse:function(e){var t=x(e+="",!0);return t.toString=function(){return e},t}}}var Rv,Ov,Hv,Lv,jv,zv={"-":"",_:" ",0:"0"},Dv=/^\s*\d+/,Bv=/^%/,qv=/[\\^$*+?|[\]().{}]/g;function Fv(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",o=a.length;return r+(o<n?new Array(n-o+1).join(t)+a:a)}function Uv(e){return e.replace(qv,"\\$&")}function Vv(e){return new RegExp("^(?:"+e.map(Uv).join("|")+")","i")}function Gv(e){for(var t={},n=-1,r=e.length;++n<r;)t[e[n].toLowerCase()]=n;return t}function Wv(e,t,n){var r=Dv.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Yv(e,t,n){var r=Dv.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Xv(e,t,n){var r=Dv.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Qv(e,t,n){var r=Dv.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function $v(e,t,n){var r=Dv.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Jv(e,t,n){var r=Dv.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Zv(e,t,n){var r=Dv.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Kv(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function ey(e,t,n){var r=Dv.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function ty(e,t,n){var r=Dv.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function ny(e,t,n){var r=Dv.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function ry(e,t,n){var r=Dv.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function ay(e,t,n){var r=Dv.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function oy(e,t,n){var r=Dv.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function iy(e,t,n){var r=Dv.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function ly(e,t,n){var r=Dv.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function uy(e,t,n){var r=Dv.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function cy(e,t,n){var r=Bv.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function sy(e,t,n){var r=Dv.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function fy(e,t,n){var r=Dv.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function hy(e,t){return Fv(e.getDate(),t,2)}function dy(e,t){return Fv(e.getHours(),t,2)}function py(e,t){return Fv(e.getHours()%12||12,t,2)}function my(e,t){return Fv(1+Xg.count(Eg(e),e),t,3)}function gy(e,t){return Fv(e.getMilliseconds(),t,3)}function vy(e,t){return gy(e,t)+"000"}function yy(e,t){return Fv(e.getMonth()+1,t,2)}function by(e,t){return Fv(e.getMinutes(),t,2)}function wy(e,t){return Fv(e.getSeconds(),t,2)}function _y(e){var t=e.getDay();return 0===t?7:t}function Ey(e,t){return Fv(Rg.count(Eg(e)-1,e),t,2)}function xy(e){var t=e.getDay();return t>=4||0===t?jg(e):jg.ceil(e)}function ky(e,t){return e=xy(e),Fv(jg.count(Eg(e),e)+(4===Eg(e).getDay()),t,2)}function My(e){return e.getDay()}function Sy(e,t){return Fv(Og.count(Eg(e)-1,e),t,2)}function Ty(e,t){return Fv(e.getFullYear()%100,t,2)}function Ay(e,t){return Fv((e=xy(e)).getFullYear()%100,t,2)}function Cy(e,t){return Fv(e.getFullYear()%1e4,t,4)}function Py(e,t){var n=e.getDay();return Fv((e=n>=4||0===n?jg(e):jg.ceil(e)).getFullYear()%1e4,t,4)}function Ny(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Fv(t/60|0,"0",2)+Fv(t%60,"0",2)}function Iy(e,t){return Fv(e.getUTCDate(),t,2)}function Ry(e,t){return Fv(e.getUTCHours(),t,2)}function Oy(e,t){return Fv(e.getUTCHours()%12||12,t,2)}function Hy(e,t){return Fv(1+kv.count(Tv(e),e),t,3)}function Ly(e,t){return Fv(e.getUTCMilliseconds(),t,3)}function jy(e,t){return Ly(e,t)+"000"}function zy(e,t){return Fv(e.getUTCMonth()+1,t,2)}function Dy(e,t){return Fv(e.getUTCMinutes(),t,2)}function By(e,t){return Fv(e.getUTCSeconds(),t,2)}function qy(e){var t=e.getUTCDay();return 0===t?7:t}function Fy(e,t){return Fv(cv.count(Tv(e)-1,e),t,2)}function Uy(e){var t=e.getUTCDay();return t>=4||0===t?dv(e):dv.ceil(e)}function Vy(e,t){return e=Uy(e),Fv(dv.count(Tv(e),e)+(4===Tv(e).getUTCDay()),t,2)}function Gy(e){return e.getUTCDay()}function Wy(e,t){return Fv(sv.count(Tv(e)-1,e),t,2)}function Yy(e,t){return Fv(e.getUTCFullYear()%100,t,2)}function Xy(e,t){return Fv((e=Uy(e)).getUTCFullYear()%100,t,2)}function Qy(e,t){return Fv(e.getUTCFullYear()%1e4,t,4)}function $y(e,t){var n=e.getUTCDay();return Fv((e=n>=4||0===n?dv(e):dv.ceil(e)).getUTCFullYear()%1e4,t,4)}function Jy(){return"+0000"}function Zy(){return"%"}function Ky(e){return+e}function eb(e){return Math.floor(+e/1e3)}function tb(e){return Rv=Iv(e),Ov=Rv.format,Hv=Rv.parse,Lv=Rv.utcFormat,jv=Rv.utcParse,Rv}tb({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var nb=1e3,rb=60*nb,ab=60*rb,ob=24*ab,ib=7*ob,lb=30*ob,ub=365*ob;function cb(e){return new Date(e)}function sb(e){return e instanceof Date?+e:+new Date(+e)}function fb(e,t,n,r,a,i,l,u,c){var s=Gm(zm,zm),f=s.invert,h=s.domain,d=c(".%L"),p=c(":%S"),m=c("%I:%M"),g=c("%I %p"),v=c("%a %d"),y=c("%b %d"),b=c("%B"),w=c("%Y"),_=[[l,1,nb],[l,5,5*nb],[l,15,15*nb],[l,30,30*nb],[i,1,rb],[i,5,5*rb],[i,15,15*rb],[i,30,30*rb],[a,1,ab],[a,3,3*ab],[a,6,6*ab],[a,12,12*ab],[r,1,ob],[r,2,2*ob],[n,1,ib],[t,1,lb],[t,3,3*lb],[e,1,ub]];function E(o){return(l(o)<o?d:i(o)<o?p:a(o)<o?m:r(o)<o?g:t(o)<o?n(o)<o?v:y:e(o)<o?b:w)(o)}function x(t,n,r,a){if(null==t&&(t=10),"number"==typeof t){var i=Math.abs(r-n)/t,l=o((function(e){return e[2]})).right(_,i);l===_.length?(a=C(n/ub,r/ub,t),t=e):l?(a=(l=_[i/_[l-1][2]<_[l][2]/i?l-1:l])[1],t=l[0]):(a=Math.max(C(n,r,t),1),t=u)}return null==a?t:t.every(a)}return s.invert=function(e){return new Date(f(e))},s.domain=function(e){return arguments.length?h(Cm.call(e,sb)):h().map(cb)},s.ticks=function(e,t){var n,r=h(),a=r[0],o=r[r.length-1],i=o<a;return i&&(n=a,a=o,o=n),n=(n=x(e,a,o,t))?n.range(a,o+1):[],i?n.reverse():n},s.tickFormat=function(e,t){return null==t?E:c(t)},s.nice=function(e,t){var n=h();return(e=x(e,n[0],n[n.length-1],t))?h($m(n,e)):s},s.copy=function(){return Um(s,fb(e,t,n,r,a,i,l,u,c))},s}function hb(){return Sm.apply(fb(Eg,Mg,Rg,Xg,Jg,ev,rv,iv,Ov).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}var db=wg((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()})),pb=db,mb=db.range,gb=wg((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+t*Cg)}),(function(e,t){return(t-e)/Cg}),(function(e){return e.getUTCHours()})),vb=gb,yb=gb.range,bb=wg((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+t*Ag)}),(function(e,t){return(t-e)/Ag}),(function(e){return e.getUTCMinutes()})),wb=bb,_b=bb.range;function Eb(){return Sm.apply(fb(Tv,pb,cv,kv,vb,wb,rv,iv,Lv).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function xb(){var e,t,n,r,a,o=0,i=1,l=zm,u=!1;function c(t){return isNaN(t=+t)?a:l(0===n?.5:(t=(r(t)-e)*n,u?Math.max(0,Math.min(1,t)):t))}return c.domain=function(a){return arguments.length?(e=r(o=+a[0]),t=r(i=+a[1]),n=e===t?0:1/(t-e),c):[o,i]},c.clamp=function(e){return arguments.length?(u=!!e,c):u},c.interpolator=function(e){return arguments.length?(l=e,c):l},c.unknown=function(e){return arguments.length?(a=e,c):a},function(a){return r=a,e=a(o),t=a(i),n=e===t?0:1/(t-e),c}}function kb(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Mb(){var e=Ym(xb()(zm));return e.copy=function(){return kb(e,Mb())},Tm.apply(e,arguments)}function Sb(){var e=rg(xb()).domain([1,10]);return e.copy=function(){return kb(e,Sb()).base(e.base())},Tm.apply(e,arguments)}function Tb(){var e=lg(xb());return e.copy=function(){return kb(e,Tb()).constant(e.constant())},Tm.apply(e,arguments)}function Ab(){var e=hg(xb());return e.copy=function(){return kb(e,Ab()).exponent(e.exponent())},Tm.apply(e,arguments)}function Cb(){return Ab.apply(null,arguments).exponent(.5)}function Pb(){var e=[],t=zm;function n(n){if(!isNaN(n=+n))return t((c(e,n)-1)/(e.length-1))}return n.domain=function(t){if(!arguments.length)return e.slice();e=[];for(var r,o=0,i=t.length;o<i;++o)null==(r=t[o])||isNaN(r=+r)||e.push(r);return e.sort(a),n},n.interpolator=function(e){return arguments.length?(t=e,n):t},n.copy=function(){return Pb(t).domain(e)},Tm.apply(n,arguments)}function Nb(){var e,t,n,r,a,o,i,l=0,u=.5,c=1,s=zm,f=!1;function h(e){return isNaN(e=+e)?i:(e=.5+((e=+o(e))-t)*(e<t?r:a),s(f?Math.max(0,Math.min(1,e)):e))}return h.domain=function(i){return arguments.length?(e=o(l=+i[0]),t=o(u=+i[1]),n=o(c=+i[2]),r=e===t?0:.5/(t-e),a=t===n?0:.5/(n-t),h):[l,u,c]},h.clamp=function(e){return arguments.length?(f=!!e,h):f},h.interpolator=function(e){return arguments.length?(s=e,h):s},h.unknown=function(e){return arguments.length?(i=e,h):i},function(i){return o=i,e=i(l),t=i(u),n=i(c),r=e===t?0:.5/(t-e),a=t===n?0:.5/(n-t),h}}function Ib(){var e=Ym(Nb()(zm));return e.copy=function(){return kb(e,Ib())},Tm.apply(e,arguments)}function Rb(){var e=rg(Nb()).domain([.1,1,10]);return e.copy=function(){return kb(e,Rb()).base(e.base())},Tm.apply(e,arguments)}function Ob(){var e=lg(Nb());return e.copy=function(){return kb(e,Ob()).constant(e.constant())},Tm.apply(e,arguments)}function Hb(){var e=hg(Nb());return e.copy=function(){return kb(e,Hb()).exponent(e.exponent())},Tm.apply(e,arguments)}function Lb(){return Hb.apply(null,arguments).exponent(.5)}function jb(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}var zb=jb("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Db=jb("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Bb=jb("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),qb=jb("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Fb=jb("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Ub=jb("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Vb=jb("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Gb=jb("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Wb=jb("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Yb=jb("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function Xb(e){return _n(e[e.length-1])}var Qb=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(jb),$b=Xb(Qb),Jb=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(jb),Zb=Xb(Jb),Kb=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(jb),ew=Xb(Kb),tw=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(jb),nw=Xb(tw),rw=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(jb),aw=Xb(rw),ow=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(jb),iw=Xb(ow),lw=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(jb),uw=Xb(lw),cw=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(jb),sw=Xb(cw),fw=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(jb),hw=Xb(fw),dw=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(jb),pw=Xb(dw),mw=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(jb),gw=Xb(mw),vw=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(jb),yw=Xb(vw),bw=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(jb),ww=Xb(bw),_w=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(jb),Ew=Xb(_w),xw=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(jb),kw=Xb(xw),Mw=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(jb),Sw=Xb(Mw),Tw=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(jb),Aw=Xb(Tw),Cw=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(jb),Pw=Xb(Cw),Nw=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(jb),Iw=Xb(Nw),Rw=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(jb),Ow=Xb(Rw),Hw=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(jb),Lw=Xb(Hw),jw=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(jb),zw=Xb(jw),Dw=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(jb),Bw=Xb(Dw),qw=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(jb),Fw=Xb(qw),Uw=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(jb),Vw=Xb(Uw),Gw=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(jb),Ww=Xb(Gw),Yw=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(jb),Xw=Xb(Yw);function Qw(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-2710.57*e)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-67.37*e)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-2475.67*e)))))))+")"}var $w=um(Yo(300,.5,0),Yo(-240,.5,1)),Jw=um(Yo(-100,.75,.35),Yo(80,1.5,.8)),Zw=um(Yo(260,.75,.35),Yo(80,1.5,.8)),Kw=Yo();function e_(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return Kw.h=360*e-100,Kw.s=1.5-1.5*t,Kw.l=.8-.9*t,Kw+""}var t_=en(),n_=Math.PI/3,r_=2*Math.PI/3;function a_(e){var t;return e=(.5-e)*Math.PI,t_.r=255*(t=Math.sin(e))*t,t_.g=255*(t=Math.sin(e+n_))*t,t_.b=255*(t=Math.sin(e+r_))*t,t_+""}function o_(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-14825.05*e)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+707.56*e)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-6838.66*e)))))))+")"}function i_(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}var l_=i_(jb("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),u_=i_(jb("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),c_=i_(jb("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),s_=i_(jb("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function f_(e){return Tt(ut(e).call(document.documentElement))}var h_=0;function d_(){return new p_}function p_(){this._="@"+(++h_).toString(36)}function m_(e){return"string"==typeof e?new kt([document.querySelectorAll(e)],[document.documentElement]):new kt([null==e?[]:e],xt)}function g_(e,t){null==t&&(t=On().touches);for(var n=0,r=t?t.length:0,a=new Array(r);n<r;++n)a[n]=Hn(e,t[n]);return a}function v_(e){return function(){return e}}p_.prototype=d_.prototype={constructor:p_,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}};var y_=Math.abs,b_=Math.atan2,w_=Math.cos,__=Math.max,E_=Math.min,x_=Math.sin,k_=Math.sqrt,M_=1e-12,S_=Math.PI,T_=S_/2,A_=2*S_;function C_(e){return e>=1?T_:e<=-1?-T_:Math.asin(e)}function P_(e){return e.innerRadius}function N_(e){return e.outerRadius}function I_(e){return e.startAngle}function R_(e){return e.endAngle}function O_(e){return e&&e.padAngle}function H_(e,t,n,r,a,o,i){var l=e-n,u=t-r,c=(i?o:-o)/k_(l*l+u*u),s=c*u,f=-c*l,h=e+s,d=t+f,p=n+s,m=r+f,g=(h+p)/2,v=(d+m)/2,y=p-h,b=m-d,w=y*y+b*b,_=a-o,E=h*m-p*d,x=(b<0?-1:1)*k_(__(0,_*_*w-E*E)),k=(E*b-y*x)/w,M=(-E*y-b*x)/w,S=(E*b+y*x)/w,T=(-E*y+b*x)/w,A=k-g,C=M-v,P=S-g,N=T-v;return A*A+C*C>P*P+N*N&&(k=S,M=T),{cx:k,cy:M,x01:-s,y01:-f,x11:k*(a/_-1),y11:M*(a/_-1)}}function L_(){var e=P_,t=N_,n=v_(0),r=null,a=I_,o=R_,i=O_,l=null;function u(){var u,c,s=+e.apply(this,arguments),f=+t.apply(this,arguments),h=a.apply(this,arguments)-T_,d=o.apply(this,arguments)-T_,p=y_(d-h),m=d>h;if(l||(l=u=Ya()),f<s&&(c=f,f=s,s=c),f>M_)if(p>A_-M_)l.moveTo(f*w_(h),f*x_(h)),l.arc(0,0,f,h,d,!m),s>M_&&(l.moveTo(s*w_(d),s*x_(d)),l.arc(0,0,s,d,h,m));else{var g,v,y=h,b=d,w=h,_=d,E=p,x=p,k=i.apply(this,arguments)/2,M=k>M_&&(r?+r.apply(this,arguments):k_(s*s+f*f)),S=E_(y_(f-s)/2,+n.apply(this,arguments)),T=S,A=S;if(M>M_){var C=C_(M/s*x_(k)),P=C_(M/f*x_(k));(E-=2*C)>M_?(w+=C*=m?1:-1,_-=C):(E=0,w=_=(h+d)/2),(x-=2*P)>M_?(y+=P*=m?1:-1,b-=P):(x=0,y=b=(h+d)/2)}var N=f*w_(y),I=f*x_(y),R=s*w_(_),O=s*x_(_);if(S>M_){var H,L=f*w_(b),j=f*x_(b),z=s*w_(w),D=s*x_(w);if(p<S_&&(H=function(e,t,n,r,a,o,i,l){var u=n-e,c=r-t,s=i-a,f=l-o,h=f*u-s*c;if(!(h*h<M_))return[e+(h=(s*(t-o)-f*(e-a))/h)*u,t+h*c]}(N,I,z,D,L,j,R,O))){var B=N-H[0],q=I-H[1],F=L-H[0],U=j-H[1],V=1/x_(function(e){return e>1?0:e<-1?S_:Math.acos(e)}((B*F+q*U)/(k_(B*B+q*q)*k_(F*F+U*U)))/2),G=k_(H[0]*H[0]+H[1]*H[1]);T=E_(S,(s-G)/(V-1)),A=E_(S,(f-G)/(V+1))}}x>M_?A>M_?(g=H_(z,D,N,I,f,A,m),v=H_(L,j,R,O,f,A,m),l.moveTo(g.cx+g.x01,g.cy+g.y01),A<S?l.arc(g.cx,g.cy,A,b_(g.y01,g.x01),b_(v.y01,v.x01),!m):(l.arc(g.cx,g.cy,A,b_(g.y01,g.x01),b_(g.y11,g.x11),!m),l.arc(0,0,f,b_(g.cy+g.y11,g.cx+g.x11),b_(v.cy+v.y11,v.cx+v.x11),!m),l.arc(v.cx,v.cy,A,b_(v.y11,v.x11),b_(v.y01,v.x01),!m))):(l.moveTo(N,I),l.arc(0,0,f,y,b,!m)):l.moveTo(N,I),s>M_&&E>M_?T>M_?(g=H_(R,O,L,j,s,-T,m),v=H_(N,I,z,D,s,-T,m),l.lineTo(g.cx+g.x01,g.cy+g.y01),T<S?l.arc(g.cx,g.cy,T,b_(g.y01,g.x01),b_(v.y01,v.x01),!m):(l.arc(g.cx,g.cy,T,b_(g.y01,g.x01),b_(g.y11,g.x11),!m),l.arc(0,0,s,b_(g.cy+g.y11,g.cx+g.x11),b_(v.cy+v.y11,v.cx+v.x11),m),l.arc(v.cx,v.cy,T,b_(v.y11,v.x11),b_(v.y01,v.x01),!m))):l.arc(0,0,s,_,w,m):l.lineTo(R,O)}else l.moveTo(0,0);if(l.closePath(),u)return l=null,u+""||null}return u.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+a.apply(this,arguments)+ +o.apply(this,arguments))/2-S_/2;return[w_(r)*n,x_(r)*n]},u.innerRadius=function(t){return arguments.length?(e="function"==typeof t?t:v_(+t),u):e},u.outerRadius=function(e){return arguments.length?(t="function"==typeof e?e:v_(+e),u):t},u.cornerRadius=function(e){return arguments.length?(n="function"==typeof e?e:v_(+e),u):n},u.padRadius=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:v_(+e),u):r},u.startAngle=function(e){return arguments.length?(a="function"==typeof e?e:v_(+e),u):a},u.endAngle=function(e){return arguments.length?(o="function"==typeof e?e:v_(+e),u):o},u.padAngle=function(e){return arguments.length?(i="function"==typeof e?e:v_(+e),u):i},u.context=function(e){return arguments.length?(l=null==e?null:e,u):l},u}function j_(e){this._context=e}function z_(e){return new j_(e)}function D_(e){return e[0]}function B_(e){return e[1]}function q_(){var e=D_,t=B_,n=v_(!0),r=null,a=z_,o=null;function i(i){var l,u,c,s=i.length,f=!1;for(null==r&&(o=a(c=Ya())),l=0;l<=s;++l)!(l<s&&n(u=i[l],l,i))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+e(u,l,i),+t(u,l,i));if(c)return o=null,c+""||null}return i.x=function(t){return arguments.length?(e="function"==typeof t?t:v_(+t),i):e},i.y=function(e){return arguments.length?(t="function"==typeof e?e:v_(+e),i):t},i.defined=function(e){return arguments.length?(n="function"==typeof e?e:v_(!!e),i):n},i.curve=function(e){return arguments.length?(a=e,null!=r&&(o=a(r)),i):a},i.context=function(e){return arguments.length?(null==e?r=o=null:o=a(r=e),i):r},i}function F_(){var e=D_,t=null,n=v_(0),r=B_,a=v_(!0),o=null,i=z_,l=null;function u(u){var c,s,f,h,d,p=u.length,m=!1,g=new Array(p),v=new Array(p);for(null==o&&(l=i(d=Ya())),c=0;c<=p;++c){if(!(c<p&&a(h=u[c],c,u))===m)if(m=!m)s=c,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),f=c-1;f>=s;--f)l.point(g[f],v[f]);l.lineEnd(),l.areaEnd()}m&&(g[c]=+e(h,c,u),v[c]=+n(h,c,u),l.point(t?+t(h,c,u):g[c],r?+r(h,c,u):v[c]))}if(d)return l=null,d+""||null}function c(){return q_().defined(a).curve(i).context(o)}return u.x=function(n){return arguments.length?(e="function"==typeof n?n:v_(+n),t=null,u):e},u.x0=function(t){return arguments.length?(e="function"==typeof t?t:v_(+t),u):e},u.x1=function(e){return arguments.length?(t=null==e?null:"function"==typeof e?e:v_(+e),u):t},u.y=function(e){return arguments.length?(n="function"==typeof e?e:v_(+e),r=null,u):n},u.y0=function(e){return arguments.length?(n="function"==typeof e?e:v_(+e),u):n},u.y1=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:v_(+e),u):r},u.lineX0=u.lineY0=function(){return c().x(e).y(n)},u.lineY1=function(){return c().x(e).y(r)},u.lineX1=function(){return c().x(t).y(n)},u.defined=function(e){return arguments.length?(a="function"==typeof e?e:v_(!!e),u):a},u.curve=function(e){return arguments.length?(i=e,null!=o&&(l=i(o)),u):i},u.context=function(e){return arguments.length?(null==e?o=l=null:l=i(o=e),u):o},u}function U_(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function V_(e){return e}function G_(){var e=V_,t=U_,n=null,r=v_(0),a=v_(A_),o=v_(0);function i(i){var l,u,c,s,f,h=i.length,d=0,p=new Array(h),m=new Array(h),g=+r.apply(this,arguments),v=Math.min(A_,Math.max(-A_,a.apply(this,arguments)-g)),y=Math.min(Math.abs(v)/h,o.apply(this,arguments)),b=y*(v<0?-1:1);for(l=0;l<h;++l)(f=m[p[l]=l]=+e(i[l],l,i))>0&&(d+=f);for(null!=t?p.sort((function(e,n){return t(m[e],m[n])})):null!=n&&p.sort((function(e,t){return n(i[e],i[t])})),l=0,c=d?(v-h*b)/d:0;l<h;++l,g=s)u=p[l],s=g+((f=m[u])>0?f*c:0)+b,m[u]={data:i[u],index:l,value:f,startAngle:g,endAngle:s,padAngle:y};return m}return i.value=function(t){return arguments.length?(e="function"==typeof t?t:v_(+t),i):e},i.sortValues=function(e){return arguments.length?(t=e,n=null,i):t},i.sort=function(e){return arguments.length?(n=e,t=null,i):n},i.startAngle=function(e){return arguments.length?(r="function"==typeof e?e:v_(+e),i):r},i.endAngle=function(e){return arguments.length?(a="function"==typeof e?e:v_(+e),i):a},i.padAngle=function(e){return arguments.length?(o="function"==typeof e?e:v_(+e),i):o},i}j_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};var W_=X_(z_);function Y_(e){this._curve=e}function X_(e){function t(t){return new Y_(e(t))}return t._curve=e,t}function Q_(e){var t=e.curve;return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e.curve=function(e){return arguments.length?t(X_(e)):t()._curve},e}function $_(){return Q_(q_().curve(W_))}function J_(){var e=F_().curve(W_),t=e.curve,n=e.lineX0,r=e.lineX1,a=e.lineY0,o=e.lineY1;return e.angle=e.x,delete e.x,e.startAngle=e.x0,delete e.x0,e.endAngle=e.x1,delete e.x1,e.radius=e.y,delete e.y,e.innerRadius=e.y0,delete e.y0,e.outerRadius=e.y1,delete e.y1,e.lineStartAngle=function(){return Q_(n())},delete e.lineX0,e.lineEndAngle=function(){return Q_(r())},delete e.lineX1,e.lineInnerRadius=function(){return Q_(a())},delete e.lineY0,e.lineOuterRadius=function(){return Q_(o())},delete e.lineY1,e.curve=function(e){return arguments.length?t(X_(e)):t()._curve},e}function Z_(e,t){return[(t=+t)*Math.cos(e-=Math.PI/2),t*Math.sin(e)]}Y_.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,t){this._curve.point(t*Math.sin(e),t*-Math.cos(e))}};var K_=Array.prototype.slice;function eE(e){return e.source}function tE(e){return e.target}function nE(e){var t=eE,n=tE,r=D_,a=B_,o=null;function i(){var i,l=K_.call(arguments),u=t.apply(this,l),c=n.apply(this,l);if(o||(o=i=Ya()),e(o,+r.apply(this,(l[0]=u,l)),+a.apply(this,l),+r.apply(this,(l[0]=c,l)),+a.apply(this,l)),i)return o=null,i+""||null}return i.source=function(e){return arguments.length?(t=e,i):t},i.target=function(e){return arguments.length?(n=e,i):n},i.x=function(e){return arguments.length?(r="function"==typeof e?e:v_(+e),i):r},i.y=function(e){return arguments.length?(a="function"==typeof e?e:v_(+e),i):a},i.context=function(e){return arguments.length?(o=null==e?null:e,i):o},i}function rE(e,t,n,r,a){e.moveTo(t,n),e.bezierCurveTo(t=(t+r)/2,n,t,a,r,a)}function aE(e,t,n,r,a){e.moveTo(t,n),e.bezierCurveTo(t,n=(n+a)/2,r,n,r,a)}function oE(e,t,n,r,a){var o=Z_(t,n),i=Z_(t,n=(n+a)/2),l=Z_(r,n),u=Z_(r,a);e.moveTo(o[0],o[1]),e.bezierCurveTo(i[0],i[1],l[0],l[1],u[0],u[1])}function iE(){return nE(rE)}function lE(){return nE(aE)}function uE(){var e=nE(oE);return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e}var cE={draw:function(e,t){var n=Math.sqrt(t/S_);e.moveTo(n,0),e.arc(0,0,n,0,A_)}},sE={draw:function(e,t){var n=Math.sqrt(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},fE=Math.sqrt(1/3),hE=2*fE,dE={draw:function(e,t){var n=Math.sqrt(t/hE),r=n*fE;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},pE=Math.sin(S_/10)/Math.sin(7*S_/10),mE=Math.sin(A_/10)*pE,gE=-Math.cos(A_/10)*pE,vE={draw:function(e,t){var n=Math.sqrt(.8908130915292852*t),r=mE*n,a=gE*n;e.moveTo(0,-n),e.lineTo(r,a);for(var o=1;o<5;++o){var i=A_*o/5,l=Math.cos(i),u=Math.sin(i);e.lineTo(u*n,-l*n),e.lineTo(l*r-u*a,u*r+l*a)}e.closePath()}},yE={draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},bE=Math.sqrt(3),wE={draw:function(e,t){var n=-Math.sqrt(t/(3*bE));e.moveTo(0,2*n),e.lineTo(-bE*n,-n),e.lineTo(bE*n,-n),e.closePath()}},_E=-.5,EE=Math.sqrt(3)/2,xE=1/Math.sqrt(12),kE=3*(xE/2+1),ME={draw:function(e,t){var n=Math.sqrt(t/kE),r=n/2,a=n*xE,o=r,i=n*xE+n,l=-o,u=i;e.moveTo(r,a),e.lineTo(o,i),e.lineTo(l,u),e.lineTo(_E*r-EE*a,EE*r+_E*a),e.lineTo(_E*o-EE*i,EE*o+_E*i),e.lineTo(_E*l-EE*u,EE*l+_E*u),e.lineTo(_E*r+EE*a,_E*a-EE*r),e.lineTo(_E*o+EE*i,_E*i-EE*o),e.lineTo(_E*l+EE*u,_E*u-EE*l),e.closePath()}},SE=[cE,sE,dE,yE,vE,wE,ME];function TE(){var e=v_(cE),t=v_(64),n=null;function r(){var r;if(n||(n=r=Ya()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),r)return n=null,r+""||null}return r.type=function(t){return arguments.length?(e="function"==typeof t?t:v_(t),r):e},r.size=function(e){return arguments.length?(t="function"==typeof e?e:v_(+e),r):t},r.context=function(e){return arguments.length?(n=null==e?null:e,r):n},r}function AE(){}function CE(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function PE(e){this._context=e}function NE(e){return new PE(e)}function IE(e){this._context=e}function RE(e){return new IE(e)}function OE(e){this._context=e}function HE(e){return new OE(e)}function LE(e,t){this._basis=new PE(e),this._beta=t}PE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:CE(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:CE(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},IE.prototype={areaStart:AE,areaEnd:AE,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:CE(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},OE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:CE(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},LE.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r,a=e[0],o=t[0],i=e[n]-a,l=t[n]-o,u=-1;++u<=n;)r=u/n,this._basis.point(this._beta*e[u]+(1-this._beta)*(a+r*i),this._beta*t[u]+(1-this._beta)*(o+r*l));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var jE=function e(t){function n(e){return 1===t?new PE(e):new LE(e,t)}return n.beta=function(t){return e(+t)},n}(.85);function zE(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function DE(e,t){this._context=e,this._k=(1-t)/6}DE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:zE(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:zE(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var BE=function e(t){function n(e){return new DE(e,t)}return n.tension=function(t){return e(+t)},n}(0);function qE(e,t){this._context=e,this._k=(1-t)/6}qE.prototype={areaStart:AE,areaEnd:AE,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:zE(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var FE=function e(t){function n(e){return new qE(e,t)}return n.tension=function(t){return e(+t)},n}(0);function UE(e,t){this._context=e,this._k=(1-t)/6}UE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:zE(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var VE=function e(t){function n(e){return new UE(e,t)}return n.tension=function(t){return e(+t)},n}(0);function GE(e,t,n){var r=e._x1,a=e._y1,o=e._x2,i=e._y2;if(e._l01_a>M_){var l=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*l-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,a=(a*l-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>M_){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,s=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*c+e._x1*e._l23_2a-t*e._l12_2a)/s,i=(i*c+e._y1*e._l23_2a-n*e._l12_2a)/s}e._context.bezierCurveTo(r,a,o,i,e._x2,e._y2)}function WE(e,t){this._context=e,this._alpha=t}WE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:GE(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var YE=function e(t){function n(e){return t?new WE(e,t):new DE(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function XE(e,t){this._context=e,this._alpha=t}XE.prototype={areaStart:AE,areaEnd:AE,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:GE(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var QE=function e(t){function n(e){return t?new XE(e,t):new qE(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function $E(e,t){this._context=e,this._alpha=t}$E.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:GE(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var JE=function e(t){function n(e){return t?new $E(e,t):new UE(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function ZE(e){this._context=e}function KE(e){return new ZE(e)}function ex(e){return e<0?-1:1}function tx(e,t,n){var r=e._x1-e._x0,a=t-e._x1,o=(e._y1-e._y0)/(r||a<0&&-0),i=(n-e._y1)/(a||r<0&&-0),l=(o*a+i*r)/(r+a);return(ex(o)+ex(i))*Math.min(Math.abs(o),Math.abs(i),.5*Math.abs(l))||0}function nx(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function rx(e,t,n){var r=e._x0,a=e._y0,o=e._x1,i=e._y1,l=(o-r)/3;e._context.bezierCurveTo(r+l,a+l*t,o-l,i-l*n,o,i)}function ax(e){this._context=e}function ox(e){this._context=new ix(e)}function ix(e){this._context=e}function lx(e){return new ax(e)}function ux(e){return new ox(e)}function cx(e){this._context=e}function sx(e){var t,n,r=e.length-1,a=new Array(r),o=new Array(r),i=new Array(r);for(a[0]=0,o[0]=2,i[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,o[t]=4,i[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,o[r-1]=7,i[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/o[t-1],o[t]-=n,i[t]-=n*i[t-1];for(a[r-1]=i[r-1]/o[r-1],t=r-2;t>=0;--t)a[t]=(i[t]-a[t+1])/o[t];for(o[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)o[t]=2*e[t+1]-a[t+1];return[a,o]}function fx(e){return new cx(e)}function hx(e,t){this._context=e,this._t=t}function dx(e){return new hx(e,.5)}function px(e){return new hx(e,0)}function mx(e){return new hx(e,1)}function gx(e,t){if((a=e.length)>1)for(var n,r,a,o=1,i=e[t[0]],l=i.length;o<a;++o)for(r=i,i=e[t[o]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}function vx(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function yx(e,t){return e[t]}function bx(){var e=v_([]),t=vx,n=gx,r=yx;function a(a){var o,i,l=e.apply(this,arguments),u=a.length,c=l.length,s=new Array(c);for(o=0;o<c;++o){for(var f,h=l[o],d=s[o]=new Array(u),p=0;p<u;++p)d[p]=f=[0,+r(a[p],h,p,a)],f.data=a[p];d.key=h}for(o=0,i=t(s);o<c;++o)s[i[o]].index=o;return n(s,i),s}return a.keys=function(t){return arguments.length?(e="function"==typeof t?t:v_(K_.call(t)),a):e},a.value=function(e){return arguments.length?(r="function"==typeof e?e:v_(+e),a):r},a.order=function(e){return arguments.length?(t=null==e?vx:"function"==typeof e?e:v_(K_.call(e)),a):t},a.offset=function(e){return arguments.length?(n=null==e?gx:e,a):n},a}function wx(e,t){if((r=e.length)>0){for(var n,r,a,o=0,i=e[0].length;o<i;++o){for(a=n=0;n<r;++n)a+=e[n][o][1]||0;if(a)for(n=0;n<r;++n)e[n][o][1]/=a}gx(e,t)}}function _x(e,t){if((l=e.length)>0)for(var n,r,a,o,i,l,u=0,c=e[t[0]].length;u<c;++u)for(o=i=0,n=0;n<l;++n)(a=(r=e[t[n]][u])[1]-r[0])>0?(r[0]=o,r[1]=o+=a):a<0?(r[1]=i,r[0]=i+=a):(r[0]=0,r[1]=a)}function Ex(e,t){if((n=e.length)>0){for(var n,r=0,a=e[t[0]],o=a.length;r<o;++r){for(var i=0,l=0;i<n;++i)l+=e[i][r][1]||0;a[r][1]+=a[r][0]=-l/2}gx(e,t)}}function xx(e,t){if((a=e.length)>0&&(r=(n=e[t[0]]).length)>0){for(var n,r,a,o=0,i=1;i<r;++i){for(var l=0,u=0,c=0;l<a;++l){for(var s=e[t[l]],f=s[i][1]||0,h=(f-(s[i-1][1]||0))/2,d=0;d<l;++d){var p=e[t[d]];h+=(p[i][1]||0)-(p[i-1][1]||0)}u+=f,c+=h*f}n[i-1][1]+=n[i-1][0]=o,u&&(o-=c/u)}n[i-1][1]+=n[i-1][0]=o,gx(e,t)}}function kx(e){var t=e.map(Mx);return vx(e).sort((function(e,n){return t[e]-t[n]}))}function Mx(e){for(var t,n=-1,r=0,a=e.length,o=-1/0;++n<a;)(t=+e[n][1])>o&&(o=t,r=n);return r}function Sx(e){var t=e.map(Tx);return vx(e).sort((function(e,n){return t[e]-t[n]}))}function Tx(e){for(var t,n=0,r=-1,a=e.length;++r<a;)(t=+e[r][1])&&(n+=t);return n}function Ax(e){return Sx(e).reverse()}function Cx(e){var t,n,r=e.length,a=e.map(Tx),o=kx(e),i=0,l=0,u=[],c=[];for(t=0;t<r;++t)n=o[t],i<l?(i+=a[n],u.push(n)):(l+=a[n],c.push(n));return c.reverse().concat(u)}function Px(e){return vx(e).reverse()}ZE.prototype={areaStart:AE,areaEnd:AE,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},ax.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:rx(this,this._t0,nx(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,rx(this,nx(this,n=tx(this,e,t)),n);break;default:rx(this,this._t0,n=tx(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(ox.prototype=Object.create(ax.prototype)).point=function(e,t){ax.prototype.point.call(this,t,e)},ix.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,a,o){this._context.bezierCurveTo(t,e,r,n,o,a)}},cx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=sx(e),a=sx(t),o=0,i=1;i<n;++o,++i)this._context.bezierCurveTo(r[0][o],a[0][o],r[1][o],a[1][o],e[i],t[i]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},hx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};var Nx="%Y-%m-%dT%H:%M:%S.%LZ";var Ix=Date.prototype.toISOString?function(e){return e.toISOString()}:Lv(Nx),Rx=Ix;var Ox=+new Date("2000-01-01T00:00:00.000Z")?function(e){var t=new Date(e);return isNaN(t)?null:t}:jv(Nx),Hx=Ox;function Lx(e,t,n){var r=new Jn,a=t;return null==t?(r.restart(e,t,n),r):(t=+t,n=null==n?Qn():+n,r.restart((function o(i){i+=a,r.restart(o,a+=t,n),e(i)}),t,n),r)}function jx(e){return function(){return e}}function zx(e){return e[0]}function Dx(e){return e[1]}function Bx(){this._=null}function qx(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function Fx(e,t){var n=t,r=t.R,a=n.U;a?a.L===n?a.L=r:a.R=r:e._=r,r.U=a,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Ux(e,t){var n=t,r=t.L,a=n.U;a?a.L===n?a.L=r:a.R=r:e._=r,r.U=a,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Vx(e){for(;e.L;)e=e.L;return e}Bx.prototype={constructor:Bx,insert:function(e,t){var n,r,a;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=Vx(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)n===(r=n.U).L?(a=r.R)&&a.C?(n.C=a.C=!1,r.C=!0,e=r):(e===n.R&&(Fx(this,n),n=(e=n).U),n.C=!1,r.C=!0,Ux(this,r)):(a=r.L)&&a.C?(n.C=a.C=!1,r.C=!0,e=r):(e===n.L&&(Ux(this,n),n=(e=n).U),n.C=!1,r.C=!0,Fx(this,r)),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,a=e.U,o=e.L,i=e.R;if(n=o?i?Vx(i):o:i,a?a.L===e?a.L=n:a.R=n:this._=n,o&&i?(r=n.C,n.C=e.C,n.L=o,o.U=n,n!==i?(a=n.U,n.U=e.U,e=n.R,a.L=e,n.R=i,i.U=n):(n.U=a,a=n,e=n.R)):(r=e.C,e=n),e&&(e.U=a),!r)if(e&&e.C)e.C=!1;else{do{if(e===this._)break;if(e===a.L){if((t=a.R).C&&(t.C=!1,a.C=!0,Fx(this,a),t=a.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,Ux(this,t),t=a.R),t.C=a.C,a.C=t.R.C=!1,Fx(this,a),e=this._;break}}else if((t=a.L).C&&(t.C=!1,a.C=!0,Ux(this,a),t=a.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,Fx(this,t),t=a.L),t.C=a.C,a.C=t.L.C=!1,Ux(this,a),e=this._;break}t.C=!0,e=a,a=a.U}while(!e.C);e&&(e.C=!1)}}};var Gx=Bx;function Wx(e,t,n,r){var a=[null,null],o=gk.push(a)-1;return a.left=e,a.right=t,n&&Xx(a,e,t,n),r&&Xx(a,t,e,r),pk[e.index].halfedges.push(o),pk[t.index].halfedges.push(o),a}function Yx(e,t,n){var r=[t,n];return r.left=e,r}function Xx(e,t,n,r){e[0]||e[1]?e.left===n?e[1]=r:e[0]=r:(e[0]=r,e.left=t,e.right=n)}function Qx(e,t,n,r,a){var o,i=e[0],l=e[1],u=i[0],c=i[1],s=0,f=1,h=l[0]-u,d=l[1]-c;if(o=t-u,h||!(o>0)){if(o/=h,h<0){if(o<s)return;o<f&&(f=o)}else if(h>0){if(o>f)return;o>s&&(s=o)}if(o=r-u,h||!(o<0)){if(o/=h,h<0){if(o>f)return;o>s&&(s=o)}else if(h>0){if(o<s)return;o<f&&(f=o)}if(o=n-c,d||!(o>0)){if(o/=d,d<0){if(o<s)return;o<f&&(f=o)}else if(d>0){if(o>f)return;o>s&&(s=o)}if(o=a-c,d||!(o<0)){if(o/=d,d<0){if(o>f)return;o>s&&(s=o)}else if(d>0){if(o<s)return;o<f&&(f=o)}return!(s>0||f<1)||(s>0&&(e[0]=[u+s*h,c+s*d]),f<1&&(e[1]=[u+f*h,c+f*d]),!0)}}}}}function $x(e,t,n,r,a){var o=e[1];if(o)return!0;var i,l,u=e[0],c=e.left,s=e.right,f=c[0],h=c[1],d=s[0],p=s[1],m=(f+d)/2,g=(h+p)/2;if(p===h){if(m<t||m>=r)return;if(f>d){if(u){if(u[1]>=a)return}else u=[m,n];o=[m,a]}else{if(u){if(u[1]<n)return}else u=[m,a];o=[m,n]}}else if(l=g-(i=(f-d)/(p-h))*m,i<-1||i>1)if(f>d){if(u){if(u[1]>=a)return}else u=[(n-l)/i,n];o=[(a-l)/i,a]}else{if(u){if(u[1]<n)return}else u=[(a-l)/i,a];o=[(n-l)/i,n]}else if(h<p){if(u){if(u[0]>=r)return}else u=[t,i*t+l];o=[r,i*r+l]}else{if(u){if(u[0]<t)return}else u=[r,i*r+l];o=[t,i*t+l]}return e[0]=u,e[1]=o,!0}function Jx(e,t){var n=e.site,r=t.left,a=t.right;return n===a&&(a=r,r=n),a?Math.atan2(a[1]-r[1],a[0]-r[0]):(n===r?(r=t[1],a=t[0]):(r=t[0],a=t[1]),Math.atan2(r[0]-a[0],a[1]-r[1]))}function Zx(e,t){return t[+(t.left!==e.site)]}function Kx(e,t){return t[+(t.left===e.site)]}var ek,tk=[];function nk(){qx(this),this.x=this.y=this.arc=this.site=this.cy=null}function rk(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,a=e.site,o=n.site;if(r!==o){var i=a[0],l=a[1],u=r[0]-i,c=r[1]-l,s=o[0]-i,f=o[1]-l,h=2*(u*f-c*s);if(!(h>=-yk)){var d=u*u+c*c,p=s*s+f*f,m=(f*d-c*p)/h,g=(u*p-s*d)/h,v=tk.pop()||new nk;v.arc=e,v.site=a,v.x=m+i,v.y=(v.cy=g+l)+Math.sqrt(m*m+g*g),e.circle=v;for(var y=null,b=mk._;b;)if(v.y<b.y||v.y===b.y&&v.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}mk.insert(y,v),y||(ek=v)}}}}function ak(e){var t=e.circle;t&&(t.P||(ek=t.N),mk.remove(t),tk.push(t),qx(t),e.circle=null)}var ok=[];function ik(){qx(this),this.edge=this.site=this.circle=null}function lk(e){var t=ok.pop()||new ik;return t.site=e,t}function uk(e){ak(e),dk.remove(e),ok.push(e),qx(e)}function ck(e){var t=e.circle,n=t.x,r=t.cy,a=[n,r],o=e.P,i=e.N,l=[e];uk(e);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<vk&&Math.abs(r-u.circle.cy)<vk;)o=u.P,l.unshift(u),uk(u),u=o;l.unshift(u),ak(u);for(var c=i;c.circle&&Math.abs(n-c.circle.x)<vk&&Math.abs(r-c.circle.cy)<vk;)i=c.N,l.push(c),uk(c),c=i;l.push(c),ak(c);var s,f=l.length;for(s=1;s<f;++s)c=l[s],u=l[s-1],Xx(c.edge,u.site,c.site,a);u=l[0],(c=l[f-1]).edge=Wx(u.site,c.site,null,a),rk(u),rk(c)}function sk(e){for(var t,n,r,a,o=e[0],i=e[1],l=dk._;l;)if((r=fk(l,i)-o)>vk)l=l.L;else{if(!((a=o-hk(l,i))>vk)){r>-vk?(t=l.P,n=l):a>-vk?(t=l,n=l.N):t=n=l;break}if(!l.R){t=l;break}l=l.R}!function(e){pk[e.index]={site:e,halfedges:[]}}(e);var u=lk(e);if(dk.insert(t,u),t||n){if(t===n)return ak(t),n=lk(t.site),dk.insert(u,n),u.edge=n.edge=Wx(t.site,u.site),rk(t),void rk(n);if(n){ak(t),ak(n);var c=t.site,s=c[0],f=c[1],h=e[0]-s,d=e[1]-f,p=n.site,m=p[0]-s,g=p[1]-f,v=2*(h*g-d*m),y=h*h+d*d,b=m*m+g*g,w=[(g*y-d*b)/v+s,(h*b-m*y)/v+f];Xx(n.edge,c,p,w),u.edge=Wx(c,e,null,w),n.edge=Wx(e,p,null,w),rk(t),rk(n)}else u.edge=Wx(t.site,u.site)}}function fk(e,t){var n=e.site,r=n[0],a=n[1],o=a-t;if(!o)return r;var i=e.P;if(!i)return-1/0;var l=(n=i.site)[0],u=n[1],c=u-t;if(!c)return l;var s=l-r,f=1/o-1/c,h=s/c;return f?(-h+Math.sqrt(h*h-2*f*(s*s/(-2*c)-u+c/2+a-o/2)))/f+r:(r+l)/2}function hk(e,t){var n=e.N;if(n)return fk(n,t);var r=e.site;return r[1]===t?r[0]:1/0}var dk,pk,mk,gk,vk=1e-6,yk=1e-12;function bk(e,t,n){return(e[0]-n[0])*(t[1]-e[1])-(e[0]-t[0])*(n[1]-e[1])}function wk(e,t){return t[1]-e[1]||t[0]-e[0]}function _k(e,t){var n,r,a,o=e.sort(wk).pop();for(gk=[],pk=new Array(e.length),dk=new Gx,mk=new Gx;;)if(a=ek,o&&(!a||o[1]<a.y||o[1]===a.y&&o[0]<a.x))o[0]===n&&o[1]===r||(sk(o),n=o[0],r=o[1]),o=e.pop();else{if(!a)break;ck(a.arc)}if(function(){for(var e,t,n,r,a=0,o=pk.length;a<o;++a)if((e=pk[a])&&(r=(t=e.halfedges).length)){var i=new Array(r),l=new Array(r);for(n=0;n<r;++n)i[n]=n,l[n]=Jx(e,gk[t[n]]);for(i.sort((function(e,t){return l[t]-l[e]})),n=0;n<r;++n)l[n]=t[i[n]];for(n=0;n<r;++n)t[n]=l[n]}}(),t){var i=+t[0][0],l=+t[0][1],u=+t[1][0],c=+t[1][1];!function(e,t,n,r){for(var a,o=gk.length;o--;)$x(a=gk[o],e,t,n,r)&&Qx(a,e,t,n,r)&&(Math.abs(a[0][0]-a[1][0])>vk||Math.abs(a[0][1]-a[1][1])>vk)||delete gk[o]}(i,l,u,c),function(e,t,n,r){var a,o,i,l,u,c,s,f,h,d,p,m,g=pk.length,v=!0;for(a=0;a<g;++a)if(o=pk[a]){for(i=o.site,l=(u=o.halfedges).length;l--;)gk[u[l]]||u.splice(l,1);for(l=0,c=u.length;l<c;)p=(d=Kx(o,gk[u[l]]))[0],m=d[1],f=(s=Zx(o,gk[u[++l%c]]))[0],h=s[1],(Math.abs(p-f)>vk||Math.abs(m-h)>vk)&&(u.splice(l,0,gk.push(Yx(i,d,Math.abs(p-e)<vk&&r-m>vk?[e,Math.abs(f-e)<vk?h:r]:Math.abs(m-r)<vk&&n-p>vk?[Math.abs(h-r)<vk?f:n,r]:Math.abs(p-n)<vk&&m-t>vk?[n,Math.abs(f-n)<vk?h:t]:Math.abs(m-t)<vk&&p-e>vk?[Math.abs(h-t)<vk?f:e,t]:null))-1),++c);c&&(v=!1)}if(v){var y,b,w,_=1/0;for(a=0,v=null;a<g;++a)(o=pk[a])&&(w=(y=(i=o.site)[0]-e)*y+(b=i[1]-t)*b)<_&&(_=w,v=o);if(v){var E=[e,t],x=[e,r],k=[n,r],M=[n,t];v.halfedges.push(gk.push(Yx(i=v.site,E,x))-1,gk.push(Yx(i,x,k))-1,gk.push(Yx(i,k,M))-1,gk.push(Yx(i,M,E))-1)}}for(a=0;a<g;++a)(o=pk[a])&&(o.halfedges.length||delete pk[a])}(i,l,u,c)}this.edges=gk,this.cells=pk,dk=mk=gk=pk=null}function Ek(){var e=zx,t=Dx,n=null;function r(r){return new _k(r.map((function(n,a){var o=[Math.round(e(n,a,r)/vk)*vk,Math.round(t(n,a,r)/vk)*vk];return o.index=a,o.data=n,o})),n)}return r.polygons=function(e){return r(e).polygons()},r.links=function(e){return r(e).links()},r.triangles=function(e){return r(e).triangles()},r.x=function(t){return arguments.length?(e="function"==typeof t?t:jx(+t),r):e},r.y=function(e){return arguments.length?(t="function"==typeof e?e:jx(+e),r):t},r.extent=function(e){return arguments.length?(n=null==e?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],r):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},r.size=function(e){return arguments.length?(n=null==e?null:[[0,0],[+e[0],+e[1]]],r):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},r}function xk(e){return function(){return e}}function kk(e,t,n){this.target=e,this.type=t,this.transform=n}function Mk(e,t,n){this.k=e,this.x=t,this.y=n}_k.prototype={constructor:_k,polygons:function(){var e=this.edges;return this.cells.map((function(t){var n=t.halfedges.map((function(n){return Zx(t,e[n])}));return n.data=t.site.data,n}))},triangles:function(){var e=[],t=this.edges;return this.cells.forEach((function(n,r){if(o=(a=n.halfedges).length)for(var a,o,i,l=n.site,u=-1,c=t[a[o-1]],s=c.left===l?c.right:c.left;++u<o;)i=s,s=(c=t[a[u]]).left===l?c.right:c.left,i&&s&&r<i.index&&r<s.index&&bk(l,i,s)<0&&e.push([l.data,i.data,s.data])})),e},links:function(){return this.edges.filter((function(e){return e.right})).map((function(e){return{source:e.left.data,target:e.right.data}}))},find:function(e,t,n){for(var r,a,o=this,i=o._found||0,l=o.cells.length;!(a=o.cells[i]);)if(++i>=l)return null;var u=e-a.site[0],c=t-a.site[1],s=u*u+c*c;do{a=o.cells[r=i],i=null,a.halfedges.forEach((function(n){var r=o.edges[n],l=r.left;if(l!==a.site&&l||(l=r.right)){var u=e-l[0],c=t-l[1],f=u*u+c*c;f<s&&(s=f,i=l.index)}}))}while(null!==i);return o._found=r,null==n||s<=n*n?a.site:null}},Mk.prototype={constructor:Mk,scale:function(e){return 1===e?this:new Mk(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new Mk(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Sk=new Mk(1,0,0);function Tk(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Sk;return e.__zoom}function Ak(){pt.stopImmediatePropagation()}function Ck(){pt.preventDefault(),pt.stopImmediatePropagation()}function Pk(){return!pt.ctrlKey&&!pt.button}function Nk(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function Ik(){return this.__zoom||Sk}function Rk(){return-pt.deltaY*(1===pt.deltaMode?.05:pt.deltaMode?1:.002)}function Ok(){return navigator.maxTouchPoints||"ontouchstart"in this}function Hk(e,t,n){var r=e.invertX(t[0][0])-n[0][0],a=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(a>r?(r+a)/2:Math.min(0,r)||Math.max(0,a),i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i))}function Lk(){var e,t,n=Pk,r=Nk,a=Hk,o=Rk,i=Ok,l=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],c=250,s=Zp,f=me("start","zoom","end"),h=500,d=150,p=0;function m(e){e.property("__zoom",Ik).on("wheel.zoom",E).on("mousedown.zoom",x).on("dblclick.zoom",k).filter(i).on("touchstart.zoom",M).on("touchmove.zoom",S).on("touchend.zoom touchcancel.zoom",T).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(e,t){return(t=Math.max(l[0],Math.min(l[1],t)))===e.k?e:new Mk(t,e.x,e.y)}function v(e,t,n){var r=t[0]-n[0]*e.k,a=t[1]-n[1]*e.k;return r===e.x&&a===e.y?e:new Mk(e.k,r,a)}function y(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function b(e,t,n){e.on("start.zoom",(function(){w(this,arguments).start()})).on("interrupt.zoom end.zoom",(function(){w(this,arguments).end()})).tween("zoom",(function(){var e=this,a=arguments,o=w(e,a),i=r.apply(e,a),l=null==n?y(i):"function"==typeof n?n.apply(e,a):n,u=Math.max(i[1][0]-i[0][0],i[1][1]-i[0][1]),c=e.__zoom,f="function"==typeof t?t.apply(e,a):t,h=s(c.invert(l).concat(u/c.k),f.invert(l).concat(u/f.k));return function(e){if(1===e)e=f;else{var t=h(e),n=u/t[2];e=new Mk(n,l[0]-t[0]*n,l[1]-t[1]*n)}o.zoom(null,e)}}))}function w(e,t,n){return!n&&e.__zooming||new _(e,t)}function _(e,t){this.that=e,this.args=t,this.active=0,this.extent=r.apply(e,t),this.taps=0}function E(){if(n.apply(this,arguments)){var e=w(this,arguments),t=this.__zoom,r=Math.max(l[0],Math.min(l[1],t.k*Math.pow(2,o.apply(this,arguments)))),i=jn(this);if(e.wheel)e.mouse[0][0]===i[0]&&e.mouse[0][1]===i[1]||(e.mouse[1]=t.invert(e.mouse[0]=i)),clearTimeout(e.wheel);else{if(t.k===r)return;e.mouse=[i,t.invert(i)],vr(this),e.start()}Ck(),e.wheel=setTimeout((function(){e.wheel=null,e.end()}),d),e.zoom("mouse",a(v(g(t,r),e.mouse[0],e.mouse[1]),e.extent,u))}}function x(){if(!t&&n.apply(this,arguments)){var e=w(this,arguments,!0),r=Tt(pt.view).on("mousemove.zoom",(function(){if(Ck(),!e.moved){var t=pt.clientX-i,n=pt.clientY-l;e.moved=t*t+n*n>p}e.zoom("mouse",a(v(e.that.__zoom,e.mouse[0]=jn(e.that),e.mouse[1]),e.extent,u))}),!0).on("mouseup.zoom",(function(){r.on("mousemove.zoom mouseup.zoom",null),Nt(pt.view,e.moved),Ck(),e.end()}),!0),o=jn(this),i=pt.clientX,l=pt.clientY;Pt(pt.view),Ak(),e.mouse=[o,this.__zoom.invert(o)],vr(this),e.start()}}function k(){if(n.apply(this,arguments)){var e=this.__zoom,t=jn(this),o=e.invert(t),i=e.k*(pt.shiftKey?.5:2),l=a(v(g(e,i),t,o),r.apply(this,arguments),u);Ck(),c>0?Tt(this).transition().duration(c).call(b,l,t):Tt(this).call(m.transform,l)}}function M(){if(n.apply(this,arguments)){var t,r,a,o,i=pt.touches,l=i.length,u=w(this,arguments,pt.changedTouches.length===l);for(Ak(),r=0;r<l;++r)o=[o=Ln(this,i,(a=i[r]).identifier),this.__zoom.invert(o),a.identifier],u.touch0?u.touch1||u.touch0[2]===o[2]||(u.touch1=o,u.taps=0):(u.touch0=o,t=!0,u.taps=1+!!e);e&&(e=clearTimeout(e)),t&&(u.taps<2&&(e=setTimeout((function(){e=null}),h)),vr(this),u.start())}}function S(){if(this.__zooming){var t,n,r,o,i=w(this,arguments),l=pt.changedTouches,c=l.length;for(Ck(),e&&(e=clearTimeout(e)),i.taps=0,t=0;t<c;++t)r=Ln(this,l,(n=l[t]).identifier),i.touch0&&i.touch0[2]===n.identifier?i.touch0[0]=r:i.touch1&&i.touch1[2]===n.identifier&&(i.touch1[0]=r);if(n=i.that.__zoom,i.touch1){var s=i.touch0[0],f=i.touch0[1],h=i.touch1[0],d=i.touch1[1],p=(p=h[0]-s[0])*p+(p=h[1]-s[1])*p,m=(m=d[0]-f[0])*m+(m=d[1]-f[1])*m;n=g(n,Math.sqrt(p/m)),r=[(s[0]+h[0])/2,(s[1]+h[1])/2],o=[(f[0]+d[0])/2,(f[1]+d[1])/2]}else{if(!i.touch0)return;r=i.touch0[0],o=i.touch0[1]}i.zoom("touch",a(v(n,r,o),i.extent,u))}}function T(){if(this.__zooming){var e,n,r=w(this,arguments),a=pt.changedTouches,o=a.length;for(Ak(),t&&clearTimeout(t),t=setTimeout((function(){t=null}),h),e=0;e<o;++e)n=a[e],r.touch0&&r.touch0[2]===n.identifier?delete r.touch0:r.touch1&&r.touch1[2]===n.identifier&&delete r.touch1;if(r.touch1&&!r.touch0&&(r.touch0=r.touch1,delete r.touch1),r.touch0)r.touch0[1]=this.__zoom.invert(r.touch0[0]);else if(r.end(),2===r.taps){var i=Tt(this).on("dblclick.zoom");i&&i.apply(this,arguments)}}}return m.transform=function(e,t,n){var r=e.selection?e.selection():e;r.property("__zoom",Ik),e!==r?b(e,t,n):r.interrupt().each((function(){w(this,arguments).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()}))},m.scaleBy=function(e,t,n){m.scaleTo(e,(function(){return this.__zoom.k*("function"==typeof t?t.apply(this,arguments):t)}),n)},m.scaleTo=function(e,t,n){m.transform(e,(function(){var e=r.apply(this,arguments),o=this.__zoom,i=null==n?y(e):"function"==typeof n?n.apply(this,arguments):n,l=o.invert(i),c="function"==typeof t?t.apply(this,arguments):t;return a(v(g(o,c),i,l),e,u)}),n)},m.translateBy=function(e,t,n){m.transform(e,(function(){return a(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),r.apply(this,arguments),u)}))},m.translateTo=function(e,t,n,o){m.transform(e,(function(){var e=r.apply(this,arguments),i=this.__zoom,l=null==o?y(e):"function"==typeof o?o.apply(this,arguments):o;return a(Sk.translate(l[0],l[1]).scale(i.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,u)}),o)},_.prototype={start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){bt(new kk(m,e,this.that.__zoom),f.apply,f,[e,this.that,this.args])}},m.wheelDelta=function(e){return arguments.length?(o="function"==typeof e?e:xk(+e),m):o},m.filter=function(e){return arguments.length?(n="function"==typeof e?e:xk(!!e),m):n},m.touchable=function(e){return arguments.length?(i="function"==typeof e?e:xk(!!e),m):i},m.extent=function(e){return arguments.length?(r="function"==typeof e?e:xk([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),m):r},m.scaleExtent=function(e){return arguments.length?(l[0]=+e[0],l[1]=+e[1],m):[l[0],l[1]]},m.translateExtent=function(e){return arguments.length?(u[0][0]=+e[0][0],u[1][0]=+e[1][0],u[0][1]=+e[0][1],u[1][1]=+e[1][1],m):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},m.constrain=function(e){return arguments.length?(a=e,m):a},m.duration=function(e){return arguments.length?(c=+e,m):c},m.interpolate=function(e){return arguments.length?(s=e,m):s},m.on=function(){var e=f.on.apply(f,arguments);return e===f?m:e},m.clickDistance=function(e){return arguments.length?(p=(e=+e)*e,m):Math.sqrt(p)},m}Tk.prototype=Mk.prototype},6395:function(e,t){"use strict";t.T=void 0;t.T=(e,t="legacy")=>{const n=e.endsWith(".html"),r=e.endsWith(".xml"),a=e.endsWith(".pdf");return"/"===e?e:((n||r||a)&&(t="never"),"always"===t?e.endsWith("/")?e:`${e}/`:"never"===t&&e.endsWith("/")?e.slice(0,-1):e)}},7035:function(e,t,n){"use strict";t.__esModule=!0,t.useScrollRestoration=t.ScrollContext=void 0;var r=n(3215);t.ScrollContext=r.ScrollHandler;var a=n(3721);t.useScrollRestoration=a.useScrollRestoration},3215:function(e,t,n){"use strict";var r=n(4994);t.__esModule=!0,t.ScrollHandler=t.ScrollContext=void 0;var a=r(n(2475)),o=r(n(6221)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(6540)),l=r(n(5556)),u=n(4351);function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}var s=i.createContext(new u.SessionStorage);t.ScrollContext=s,s.displayName="GatsbyScrollContext";var f=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._stateStorage=new u.SessionStorage,t._isTicking=!1,t._latestKnownScrollY=0,t.scrollListener=function(){t._latestKnownScrollY=window.scrollY,t._isTicking||(t._isTicking=!0,requestAnimationFrame(t._saveScroll.bind((0,a.default)(t))))},t.windowScroll=function(e,n){t.shouldUpdateScroll(n,t.props)&&window.scrollTo(0,e)},t.scrollToHash=function(e,n){var r=document.getElementById(e.substring(1));r&&t.shouldUpdateScroll(n,t.props)&&r.scrollIntoView()},t.shouldUpdateScroll=function(e,n){var r=t.props.shouldUpdateScroll;return!r||r.call((0,a.default)(t),e,n)},t}(0,o.default)(t,e);var n=t.prototype;return n._saveScroll=function(){var e=this.props.location.key||null;e&&this._stateStorage.save(this.props.location,e,this._latestKnownScrollY),this._isTicking=!1},n.componentDidMount=function(){var e;window.addEventListener("scroll",this.scrollListener);var t=this.props.location,n=t.key,r=t.hash;n&&(e=this._stateStorage.read(this.props.location,n)),e?this.windowScroll(e,void 0):r&&this.scrollToHash(decodeURI(r),void 0)},n.componentWillUnmount=function(){window.removeEventListener("scroll",this.scrollListener)},n.componentDidUpdate=function(e){var t,n=this.props.location,r=n.hash,a=n.key;a&&(t=this._stateStorage.read(this.props.location,a)),r?this.scrollToHash(decodeURI(r),e):this.windowScroll(t,e)},n.render=function(){return i.createElement(s.Provider,{value:this._stateStorage},this.props.children)},t}(i.Component);t.ScrollHandler=f,f.propTypes={shouldUpdateScroll:l.default.func,children:l.default.element.isRequired,location:l.default.object.isRequired}},4351:function(e,t){"use strict";t.__esModule=!0,t.SessionStorage=void 0;var n="___GATSBY_REACT_ROUTER_SCROLL",r=function(){function e(){}var t=e.prototype;return t.read=function(e,t){var r=this.getStateKey(e,t);try{var a=window.sessionStorage.getItem(r);return a?JSON.parse(a):0}catch(o){return window&&window[n]&&window[n][r]?window[n][r]:0}},t.save=function(e,t,r){var a=this.getStateKey(e,t),o=JSON.stringify(r);try{window.sessionStorage.setItem(a,o)}catch(i){window&&window[n]||(window[n]={}),window[n][a]=JSON.parse(o)}},t.getStateKey=function(e,t){var n="@@scroll|"+e.pathname;return null==t?n:n+"|"+t},e}();t.SessionStorage=r},3721:function(e,t,n){"use strict";t.__esModule=!0,t.useScrollRestoration=function(e){var t=(0,o.useLocation)(),n=(0,a.useContext)(r.ScrollContext),i=(0,a.useRef)(null);return(0,a.useLayoutEffect)((function(){if(i.current){var r=n.read(t,e);i.current.scrollTo(0,r||0)}}),[t.key]),{ref:i,onScroll:function(){i.current&&n.save(t,e,i.current.scrollTop)}}};var r=n(3215),a=n(6540),o=n(1693)},8828:function(e){"use strict";e.exports=Object.assign},2311:function(e,t,n){"use strict";t.__esModule=!0,t.onInitialClientRender=void 0;n(5535),n(9300);t.onInitialClientRender=()=>{}},3309:function(e,t){"use strict";t.__esModule=!0,t.getForwards=function(e){return null==e?void 0:e.flatMap((e=>(null==e?void 0:e.forward)||[]))}},9300:function(e,t,n){"use strict";t.__esModule=!0,t.injectPartytownSnippet=function(e){if(!e.length)return;const t=document.querySelector("script[data-partytown]"),n=document.querySelector('iframe[src*="~partytown/partytown-sandbox-sw"]');t&&t.remove();n&&n.remove();const o=(0,a.getForwards)(e),i=document.createElement("script");i.dataset.partytown="",i.innerHTML=(0,r.partytownSnippet)({forward:o}),document.head.appendChild(i)};var r=n(4656),a=n(3309)},6877:function(e,t,n){function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}function a(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=r(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(a,i,l):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}t.components={"component---src-pages-404-js":()=>Promise.resolve().then((()=>a(n(3331)))),"component---src-pages-index-js":()=>Promise.resolve().then((()=>a(n(9639)))),"component---src-templates-blog-template-js-content-file-path-home-amb-c-website-src-posts-backticks-in-zsh-are-fantastic-mdx":()=>Promise.resolve().then((()=>a(n(9895)))),"component---src-templates-blog-template-js-content-file-path-home-amb-c-website-src-posts-berkeley-db-mdx":()=>Promise.resolve().then((()=>a(n(3993)))),"component---src-templates-blog-template-js-content-file-path-home-amb-c-website-src-posts-blog-rewrite-mdx":()=>Promise.resolve().then((()=>a(n(8914)))),"component---src-templates-blog-template-js-content-file-path-home-amb-c-website-src-posts-building-an-adequate-wedding-gallery-mdx":()=>Promise.resolve().then((()=>a(n(6924)))),"component---src-templates-blog-template-js-content-file-path-home-amb-c-website-src-posts-cron-mdx":()=>Promise.resolve().then((()=>a(n(4769)))),"component---src-templates-blog-template-js-content-file-path-home-amb-c-website-src-posts-emacs-intro-mdx":()=>Promise.resolve().then((()=>a(n(2441)))),"component---src-templates-blog-template-js-content-file-path-home-amb-c-website-src-posts-locks-mdx":()=>Promise.resolve().then((()=>a(n(6621)))),"component---src-templates-blog-template-js-content-file-path-home-amb-c-website-src-posts-sierpinski-triangle-thing-mdx":()=>Promise.resolve().then((()=>a(n(7308)))),"component---src-templates-blog-template-js-content-file-path-home-amb-c-website-src-posts-what-does-it-even-mean-for-the-media-to-be-objective-mdx":()=>Promise.resolve().then((()=>a(n(1219)))),"component---src-templates-blog-template-js-content-file-path-home-amb-c-website-src-posts-why-is-date-formatting-so-hard-in-vanilla-js-mdx":()=>Promise.resolve().then((()=>a(n(6392)))),"component---src-templates-blog-template-js-content-file-path-home-amb-c-website-src-posts-zero-friction-testing-in-rails-mdx":()=>Promise.resolve().then((()=>a(n(6507))))}},9377:function(e,t,n){e.exports=[{plugin:n(6774),options:{plugins:[]}},{plugin:n(5616),options:{plugins:[],maxWidth:1200}},{plugin:n(7914),options:{plugins:[],name:"gatsby-starter-default",short_name:"starter",start_url:"/",background_color:"#663399",theme_color:"#663399",display:"minimal-ui",icon:"src/images/gatsby-icon.png",legacy:!0,theme_color_in_head:!0,cache_busting_mode:"query",crossOrigin:"anonymous",include_favicon:!0,cacheDigest:"e06ff3ac86a0c187840479eaa6cda49e"}},{plugin:n(8108),options:{plugins:[]}},{plugin:n(2311),options:{plugins:[]}}]},20:function(e,t,n){const r=n(9377),{getResourceURLsForPathname:a,loadPage:o,loadPageSync:i}=n(4939).publicLoader;t.apiRunner=function(e,t,n,l){void 0===t&&(t={});let u=r.map((n=>{if(!n.plugin[e])return;t.getResourceURLsForPathname=a,t.loadPage=o,t.loadPageSync=i;const r=n.plugin[e](t,n.options);return r&&l&&(t=l({args:t,result:r,plugin:n})),r}));return u=u.filter((e=>void 0!==e)),u.length>0?u:n?[n]:[]},t.apiRunnerAsync=(e,t,n)=>r.reduce(((n,r)=>r.plugin[e]?n.then((()=>r.plugin[e](t,r.options))):n),Promise.resolve())},4980:function(e,t,n){"use strict";var r=n(4994);t.__esModule=!0,t.default=void 0;const a=(0,r(n(6720)).default)();t.default=a},8238:function(e,t,n){"use strict";var r=n(4994);t.__esModule=!0,t.default=void 0;var a=r(n(6540)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(n(4939)),i=r(n(3470));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}class u extends a.default.Component{constructor(e){super();const{location:t,pageResources:n}=e;this.state={location:{...t},pageResources:n||o.default.loadPageSync(t.pathname+t.search,{withErrorDetails:!0})}}static getDerivedStateFromProps(e,t){let{location:n}=e;if(t.location.href!==n.href){return{pageResources:o.default.loadPageSync(n.pathname+n.search,{withErrorDetails:!0}),location:{...n}}}return{location:{...n}}}loadResources(e){o.default.loadPage(e).then((t=>{t&&t.status!==o.PageResourceStatus.Error?this.setState({location:{...window.location},pageResources:t}):(window.history.replaceState({},"",location.href),window.location=e)}))}shouldComponentUpdate(e,t){return t.pageResources?this.state.pageResources!==t.pageResources||(this.state.pageResources.component!==t.pageResources.component||(this.state.pageResources.json!==t.pageResources.json||(!(this.state.location.key===t.location.key||!t.pageResources.page||!t.pageResources.page.matchPath&&!t.pageResources.page.path)||(0,i.default)(this,e,t)))):(this.loadResources(e.location.pathname+e.location.search),!1)}render(){return this.props.children(this.state)}}t.default=u},4283:function(e,t,n){"use strict";var r=n(4994);t.__esModule=!0,t.setMatchPaths=t.grabMatchParams=t.findPath=t.findMatchPath=t.cleanPath=void 0;var a=n(8371),o=r(n(8797)),i=r(n(8957)),l=n(3072);const u=new Map;let c=[];const s=e=>{let t=e;if(-1!==e.indexOf("?")){const[n,r]=e.split("?");t=n+"?"+encodeURIComponent(r)}const n=decodeURIComponent(t);return(0,o.default)(n,decodeURIComponent("")).split("#")[0]};function f(e){return e.startsWith("/")||e.startsWith("https://")||e.startsWith("http://")?e:new URL(e,window.location.href+(window.location.href.endsWith("/")?"":"/")).pathname}t.setMatchPaths=e=>{c=e};const h=e=>{const t=p(e),n=c.map((e=>{let{path:t,matchPath:n}=e;return{path:n,originalPath:t}})),r=(0,a.pick)(n,t);return r?(0,i.default)(r.route.originalPath):null};t.findMatchPath=h;t.grabMatchParams=e=>{const t=p(e),n=c.map((e=>{let{path:t,matchPath:n}=e;return{path:n,originalPath:t}})),r=(0,a.pick)(n,t);return r?r.params:{}};const d=e=>{const t=s(f(e));if(u.has(t))return u.get(t);const n=(0,l.maybeGetBrowserRedirect)(e);if(n)return d(n.toPath);let r=h(t);return r||(r=p(e)),u.set(t,r),r};t.findPath=d;const p=e=>{let t=s(f(e));return"/index.html"===t&&(t="/"),t=(0,i.default)(t),t};t.cleanPath=p},1532:function(e,t,n){"use strict";var r=n(4994);t.__esModule=!0;var a={PageRenderer:!0,Link:!0,useScrollRestoration:!0,withPrefix:!0,withAssetPrefix:!0,navigate:!0,parsePath:!0,graphql:!0,prefetchPathname:!0,StaticQuery:!0,StaticQueryContext:!0,useStaticQuery:!0,StaticQueryServerContext:!0};t.StaticQueryServerContext=t.StaticQueryContext=t.StaticQuery=t.PageRenderer=t.Link=void 0,t.graphql=function(){throw new Error("It appears like Gatsby is misconfigured. Gatsby related `graphql` calls are supposed to only be evaluated at compile time, and then compiled away. Unfortunately, something went wrong and the query was left in the compiled code.\n\nUnless your site has a complex or custom babel/Gatsby configuration this is likely a bug in Gatsby.")},t.withPrefix=t.withAssetPrefix=t.useStaticQuery=t.useScrollRestoration=t.prefetchPathname=t.parsePath=t.navigate=void 0;var o=r(n(4939)),i=r(n(2549));t.PageRenderer=i.default;var l=n(7035);t.useScrollRestoration=l.useScrollRestoration;var u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(n(7078));t.Link=u.default,t.withPrefix=u.withPrefix,t.withAssetPrefix=u.withAssetPrefix,t.navigate=u.navigate,t.parsePath=u.parsePath;var c=n(8883);t.StaticQuery=c.StaticQuery,t.StaticQueryContext=c.StaticQueryContext,t.useStaticQuery=c.useStaticQuery,t.StaticQueryServerContext=c.StaticQueryServerContext;var s=n(5535);function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(a,e)||e in t&&t[e]===s[e]||(t[e]=s[e]))}));t.prefetchPathname=o.default.enqueue},9e3:function(e,t,n){"use strict";t.__esModule=!0,t.FireCallbackInEffect=function(e){let{children:t,callback:n}=e;return(0,r.useEffect)((()=>{n()})),t};var r=n(6540)},6100:function(e,t){"use strict";t.__esModule=!0,t.VALID_NODE_NAMES=void 0;t.VALID_NODE_NAMES=["link","meta","style","title","base","noscript","script"]},1728:function(e,t,n){"use strict";t.__esModule=!0,t.headHandlerForBrowser=function(e){let{pageComponent:t,staticQueryResults:n,pageComponentProps:u}=e;(0,r.useEffect)((()=>{if(null!=t&&t.Head){(0,c.headExportValidator)(t.Head);const{render:e}=(0,i.reactDOMUtils)(),s=t.Head;e(r.default.createElement(l.FireCallbackInEffect,{callback:d},r.default.createElement(a.StaticQueryContext.Provider,{value:n},r.default.createElement(o.LocationProvider,null,r.default.createElement(s,(0,c.filterHeadProps)(u))))),f)}return()=>{h()}}))};var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(n(6540)),a=n(1532),o=n(1693),i=n(9732),l=n(9e3),u=n(6100),c=n(3304);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}const f=document.createElement("div"),h=()=>{const e=document.querySelectorAll("[data-gatsby-head]");for(const t of e)t.parentNode.removeChild(t)},d=()=>{const e=[],t=new Map;for(const l of f.childNodes){var n,r;const o=l.nodeName.toLowerCase(),i=null===(n=l.attributes)||void 0===n||null===(r=n.id)||void 0===r?void 0:r.value;if(u.VALID_NODE_NAMES.includes(o)){let n=l.cloneNode(!0);if(n.setAttribute("data-gatsby-head",!0),"script"===n.nodeName.toLowerCase()){const e=document.createElement("script");for(const t of n.attributes)e.setAttribute(t.name,t.value);e.innerHTML=n.innerHTML,n=e}if(i)if(t.has(i)){var a;const r=t.get(i);null===(a=e[r].parentNode)||void 0===a||a.removeChild(e[r]),e[r]=n}else e.push(n),t.set(i,e.length-1);else e.push(n)}else(0,c.warnForInvalidTags)(o)}const o=document.querySelectorAll("[data-gatsby-head]");if(0===o.length)return void document.head.append(...e);const i=[];(0,c.diffNodes)({oldNodes:o,newNodes:e,onStale:e=>e.parentNode.removeChild(e),onNew:e=>i.push(e)}),document.head.append(...i)}},3304:function(e,t,n){"use strict";t.__esModule=!0,t.diffNodes=function(e){let{oldNodes:t,newNodes:n,onStale:a,onNew:o}=e;for(const i of t){const e=n.findIndex((e=>r(e,i)));-1===e?a(i):n.splice(e,1)}for(const r of n)o(r)},t.filterHeadProps=function(e){return{location:{pathname:e.location.pathname},params:e.params,data:e.data||{},pageContext:e.pageContext}},t.headExportValidator=function(e){if("function"!=typeof e)throw new Error('Expected "Head" export to be a function got "'+typeof e+'".')},t.isEqualNode=r,t.warnForInvalidTags=function(e){0};n(6100);function r(e,t){if(e instanceof HTMLElement&&t instanceof HTMLElement){const n=t.getAttribute("nonce");if(n&&!e.getAttribute("nonce")){const r=t.cloneNode(!0);return r.setAttribute("nonce",""),r.nonce=n,n===e.nonce&&e.isEqualNode(r)}}return e.isEqualNode(t)}},4939:function(e,t,n){"use strict";var r=n(4994);t.__esModule=!0,t.default=t.ProdLoader=t.PageResourceStatus=t.BaseLoader=void 0,t.getStaticQueryResults=function(){return p?p.staticQueryDb:{}},t.setLoader=t.publicLoader=void 0;n(1812);var a=r(n(9959)),o=r(n(4980)),i=n(4283);const l=t.PageResourceStatus={Error:"error",Success:"success"},u=e=>{const[t,n]=e.split("?");var r;return"/page-data/"+("/"===t?"index":(r="/"===(r=t)[0]?r.slice(1):r).endsWith("/")?r.slice(0,-1):r)+"/page-data.json"+(n?"?"+n:"")};function c(e,t){return void 0===t&&(t="GET"),new Promise((n=>{const r=new XMLHttpRequest;r.open(t,e,!0),r.onreadystatechange=()=>{4==r.readyState&&n(r)},r.send(null)}))}const s=/bot|crawler|spider|crawling/i,f=function(e,t,n){void 0===t&&(t=null);const r={componentChunkName:e.componentChunkName,path:e.path,webpackCompilationHash:e.webpackCompilationHash,matchPath:e.matchPath,staticQueryHashes:e.staticQueryHashes,getServerDataError:e.getServerDataError};return{component:t,head:n,json:e.result,page:r}};class h{constructor(e,t){this.inFlightNetworkRequests=new Map,this.pageDb=new Map,this.inFlightDb=new Map,this.staticQueryDb={},this.pageDataDb=new Map,this.partialHydrationDb=new Map,this.isPrefetchQueueRunning=!1,this.prefetchQueued=[],this.prefetchTriggered=new Set,this.prefetchCompleted=new Set,this.loadComponent=e,(0,i.setMatchPaths)(t)}memoizedGet(e){let t=this.inFlightNetworkRequests.get(e);return t||(t=c(e,"GET"),this.inFlightNetworkRequests.set(e,t)),t.then((t=>(this.inFlightNetworkRequests.delete(e),t))).catch((t=>{throw this.inFlightNetworkRequests.delete(e),t}))}setApiRunner(e){this.apiRunner=e,this.prefetchDisabled=e("disableCorePrefetching").some((e=>e))}fetchPageDataJson(e){const{pagePath:t,retries:n=0}=e,r=u(t);return this.memoizedGet(r).then((r=>{const{status:a,responseText:o}=r;if(200===a)try{const n=JSON.parse(o);if(void 0===n.path)throw new Error("not a valid pageData response");const r=t.split("?")[1];return r&&!n.path.includes(r)&&(n.path+="?"+r),Object.assign(e,{status:l.Success,payload:n})}catch(i){}return 404===a||200===a?"/404.html"===t||"/500.html"===t?Object.assign(e,{status:l.Error}):this.fetchPageDataJson(Object.assign(e,{pagePath:"/404.html",notFound:!0})):500===a?this.fetchPageDataJson(Object.assign(e,{pagePath:"/500.html",internalServerError:!0})):n<3?this.fetchPageDataJson(Object.assign(e,{retries:n+1})):Object.assign(e,{status:l.Error})}))}fetchPartialHydrationJson(e){const{pagePath:t,retries:n=0}=e,r=u(t).replace(".json","-rsc.json");return this.memoizedGet(r).then((r=>{const{status:a,responseText:o}=r;if(200===a)try{return Object.assign(e,{status:l.Success,payload:o})}catch(i){}return 404===a||200===a?"/404.html"===t||"/500.html"===t?Object.assign(e,{status:l.Error}):this.fetchPartialHydrationJson(Object.assign(e,{pagePath:"/404.html",notFound:!0})):500===a?this.fetchPartialHydrationJson(Object.assign(e,{pagePath:"/500.html",internalServerError:!0})):n<3?this.fetchPartialHydrationJson(Object.assign(e,{retries:n+1})):Object.assign(e,{status:l.Error})}))}loadPageDataJson(e){const t=(0,i.findPath)(e);if(this.pageDataDb.has(t)){const e=this.pageDataDb.get(t);return Promise.resolve(e)}return this.fetchPageDataJson({pagePath:t}).then((e=>(this.pageDataDb.set(t,e),e)))}loadPartialHydrationJson(e){const t=(0,i.findPath)(e);if(this.partialHydrationDb.has(t)){const e=this.partialHydrationDb.get(t);return Promise.resolve(e)}return this.fetchPartialHydrationJson({pagePath:t}).then((e=>(this.partialHydrationDb.set(t,e),e)))}findMatchPath(e){return(0,i.findMatchPath)(e)}loadPage(e){const t=(0,i.findPath)(e);if(this.pageDb.has(t)){const e=this.pageDb.get(t);return e.error?{error:e.error,status:e.status}:Promise.resolve(e.payload)}if(this.inFlightDb.has(t))return this.inFlightDb.get(t);let n;return n=Promise.all([this.loadAppData(),this.loadPageDataJson(t)]).then((e=>{const n=e[1];if(n.status===l.Error)return{status:l.Error};let r=n.payload;const{componentChunkName:a,staticQueryHashes:i=[]}=r,u={},c=Promise.all([this.loadComponent(a),this.loadComponent(a,"head")]).then((t=>{let a,[o,i]=t;return u.createdAt=new Date,!o||o instanceof Error?(u.status=l.Error,u.error=o):(u.status=l.Success,!0===n.notFound&&(u.notFound=!0),r=Object.assign(r,{webpackCompilationHash:e[0]?e[0].webpackCompilationHash:""}),a=f(r,o,i)),a})),s=Promise.all(i.map((e=>{if(this.staticQueryDb[e]){const t=this.staticQueryDb[e];return{staticQueryHash:e,jsonPayload:t}}return this.memoizedGet("/page-data/sq/d/"+e+".json").then((t=>{const n=JSON.parse(t.responseText);return{staticQueryHash:e,jsonPayload:n}})).catch((()=>{throw new Error("We couldn't load \"/page-data/sq/d/"+e+'.json"')}))}))).then((e=>{const t={};return e.forEach((e=>{let{staticQueryHash:n,jsonPayload:r}=e;t[n]=r,this.staticQueryDb[n]=r})),t}));return Promise.all([c,s]).then((e=>{let n,[r,a]=e;return r&&(n={...r,staticQueryResults:a},u.payload=n,o.default.emit("onPostLoadPageResources",{page:n,pageResources:n})),this.pageDb.set(t,u),u.error?{error:u.error,status:u.status}:n})).catch((e=>({error:e,status:l.Error})))})),n.then((()=>{this.inFlightDb.delete(t)})).catch((e=>{throw this.inFlightDb.delete(t),e})),this.inFlightDb.set(t,n),n}loadPageSync(e,t){void 0===t&&(t={});const n=(0,i.findPath)(e);if(this.pageDb.has(n)){var r;const e=this.pageDb.get(n);if(e.payload)return e.payload;if(null!==(r=t)&&void 0!==r&&r.withErrorDetails)return{error:e.error,status:e.status}}}shouldPrefetch(e){return!!(()=>{if("connection"in navigator&&void 0!==navigator.connection){if((navigator.connection.effectiveType||"").includes("2g"))return!1;if(navigator.connection.saveData)return!1}return!0})()&&((!navigator.userAgent||!s.test(navigator.userAgent))&&!this.pageDb.has(e))}prefetch(e){if(!this.shouldPrefetch(e))return{then:e=>e(!1),abort:()=>{}};if(this.prefetchTriggered.has(e))return{then:e=>e(!0),abort:()=>{}};const t={resolve:null,reject:null,promise:null};t.promise=new Promise(((e,n)=>{t.resolve=e,t.reject=n})),this.prefetchQueued.push([e,t]);const n=new AbortController;return n.signal.addEventListener("abort",(()=>{const t=this.prefetchQueued.findIndex((t=>{let[n]=t;return n===e}));-1!==t&&this.prefetchQueued.splice(t,1)})),this.isPrefetchQueueRunning||(this.isPrefetchQueueRunning=!0,setTimeout((()=>{this._processNextPrefetchBatch()}),3e3)),{then:(e,n)=>t.promise.then(e,n),abort:n.abort.bind(n)}}_processNextPrefetchBatch(){(window.requestIdleCallback||(e=>setTimeout(e,0)))((()=>{const e=this.prefetchQueued.splice(0,4),t=Promise.all(e.map((e=>{let[t,n]=e;return this.prefetchTriggered.has(t)||(this.apiRunner("onPrefetchPathname",{pathname:t}),this.prefetchTriggered.add(t)),this.prefetchDisabled?n.resolve(!1):this.doPrefetch((0,i.findPath)(t)).then((()=>{this.prefetchCompleted.has(t)||(this.apiRunner("onPostPrefetchPathname",{pathname:t}),this.prefetchCompleted.add(t)),n.resolve(!0)}))})));this.prefetchQueued.length?t.then((()=>{setTimeout((()=>{this._processNextPrefetchBatch()}),3e3)})):this.isPrefetchQueueRunning=!1}))}doPrefetch(e){const t=u(e);return(0,a.default)(t,{crossOrigin:"anonymous",as:"fetch"}).then((()=>this.loadPageDataJson(e)))}hovering(e){this.loadPage(e)}getResourceURLsForPathname(e){const t=(0,i.findPath)(e),n=this.pageDataDb.get(t);if(n){const e=f(n.payload);return[...d(e.page.componentChunkName),u(t)]}return null}isPageNotFound(e){const t=(0,i.findPath)(e),n=this.pageDb.get(t);return!n||n.notFound}loadAppData(e){return void 0===e&&(e=0),this.memoizedGet("/page-data/app-data.json").then((t=>{const{status:n,responseText:r}=t;let a;if(200!==n&&e<3)return this.loadAppData(e+1);if(200===n)try{const e=JSON.parse(r);if(void 0===e.webpackCompilationHash)throw new Error("not a valid app-data response");a=e}catch(o){}return a}))}}t.BaseLoader=h;const d=e=>(window.___chunkMapping[e]||[]).map((e=>""+e));let p;t.ProdLoader=class extends h{constructor(e,t,n){super((function(t,n){if(void 0===n&&(n="components"),!e[n="components"][t])throw new Error("We couldn't find the correct component chunk with the name \""+t+'"');return e[n][t]().catch((e=>e))}),t),n&&this.pageDataDb.set((0,i.findPath)(n.path),{pagePath:n.path,payload:n,status:"success"})}doPrefetch(e){return super.doPrefetch(e).then((e=>{if(e.status!==l.Success)return Promise.resolve();const t=e.payload,n=t.componentChunkName,r=d(n);return Promise.all(r.map(a.default)).then((()=>t))}))}loadPageDataJson(e){return super.loadPageDataJson(e).then((t=>t.notFound?c(e,"HEAD").then((e=>200===e.status?{status:l.Error}:t)):t))}loadPartialHydrationJson(e){return super.loadPartialHydrationJson(e).then((t=>t.notFound?c(e,"HEAD").then((e=>200===e.status?{status:l.Error}:t)):t))}};t.setLoader=e=>{p=e};const m=t.publicLoader={enqueue:e=>p.prefetch(e),getResourceURLsForPathname:e=>p.getResourceURLsForPathname(e),loadPage:e=>p.loadPage(e),loadPageSync:function(e,t){return void 0===t&&(t={}),p.loadPageSync(e,t)},prefetch:e=>p.prefetch(e),isPageNotFound:e=>p.isPageNotFound(e),hovering:e=>p.hovering(e),loadAppData:()=>p.loadAppData()};t.default=m},9010:function(e,t,n){"use strict";var r=n(4994);t.__esModule=!0,t.RouteUpdates=void 0,t.init=function(){h.globalHistory.listen((e=>{e.location.action=e.action})),window.___push=e=>b(e,{replace:!1}),window.___replace=e=>b(e,{replace:!0}),window.___navigate=(e,t)=>b(e,t)},t.shouldUpdateScroll=function(e,t){let{location:n}=t;const{pathname:r,hash:a}=n,o=(0,u.apiRunner)("shouldUpdateScroll",{prevRouterProps:e,pathname:r,routerProps:{location:n},getSavedScrollPosition:e=>[0,this._stateStorage.read(e,e.key)]});if(o.length>0)return o[o.length-1];if(e){const{location:{pathname:t}}=e;if(t===r)return a?decodeURI(a.slice(1)):[0,0]}return!0};var a=r(n(6540)),o=r(n(5556)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(n(4939)),l=n(3072);t.maybeGetBrowserRedirect=l.maybeGetBrowserRedirect;var u=n(20),c=r(n(4980)),s=n(6858),f=n(1693),h=n(3350),d=n(7078);function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function m(e){const t=(0,l.maybeGetBrowserRedirect)(e),{hash:n,search:r}=window.location;return null!=t&&(window.___replace(t.toPath+r+n),!0)}let g="";window.addEventListener("unhandledrejection",(e=>{/loading chunk \d* failed./i.test(e.reason)&&g&&(window.location.pathname=g)}));const v=(e,t)=>{m(e.pathname)||(g=e.pathname,(0,u.apiRunner)("onPreRouteUpdate",{location:e,prevLocation:t}))},y=(e,t)=>{m(e.pathname)||(0,u.apiRunner)("onRouteUpdate",{location:e,prevLocation:t})},b=function(e,t){if(void 0===t&&(t={}),"number"==typeof e)return void h.globalHistory.navigate(e);const{pathname:n,search:r,hash:a}=(0,d.parsePath)(e),o=(0,l.maybeGetBrowserRedirect)(n);if(o&&(e=o.toPath+r+a),window.___swUpdated)return void(window.location=n+r+a);const s=setTimeout((()=>{c.default.emit("onDelayedLoadPageResources",{pathname:n}),(0,u.apiRunner)("onRouteUpdateDelayed",{location:window.location})}),1e3);i.default.loadPage(n+r).then((o=>{if(!o||o.status===i.PageResourceStatus.Error)return window.history.replaceState({},"",location.href),window.location=n,void clearTimeout(s);o&&o.page.webpackCompilationHash!==window.___webpackCompilationHash&&("serviceWorker"in navigator&&null!==navigator.serviceWorker.controller&&"activated"===navigator.serviceWorker.controller.state&&navigator.serviceWorker.controller.postMessage({gatsbyApi:"clearPathResources"}),window.location=n+r+a),(0,f.navigate)(e,t),clearTimeout(s)}))};class w extends a.default.Component{constructor(e){super(e),this.announcementRef=a.default.createRef()}componentDidUpdate(e,t){requestAnimationFrame((()=>{let e="new page at "+this.props.location.pathname;document.title&&(e=document.title);const t=document.querySelectorAll("#gatsby-focus-wrapper h1");t&&t.length&&(e=t[0].textContent);const n="Navigated to "+e;if(this.announcementRef.current){this.announcementRef.current.innerText!==n&&(this.announcementRef.current.innerText=n)}}))}render(){return a.default.createElement("div",Object.assign({},s.RouteAnnouncerProps,{ref:this.announcementRef}))}}const _=(e,t)=>{var n,r;return e.href!==t.href||(null==e||null===(n=e.state)||void 0===n?void 0:n.key)!==(null==t||null===(r=t.state)||void 0===r?void 0:r.key)};class E extends a.default.Component{constructor(e){super(e),v(e.location,null)}componentDidMount(){y(this.props.location,null)}shouldComponentUpdate(e){return!!_(e.location,this.props.location)&&(v(this.props.location,e.location),!0)}componentDidUpdate(e){_(e.location,this.props.location)&&y(this.props.location,e.location)}render(){return a.default.createElement(a.default.Fragment,null,this.props.children,a.default.createElement(w,{location:location}))}}t.RouteUpdates=E,E.propTypes={location:o.default.object.isRequired}},8957:function(e,t){"use strict";t.__esModule=!0,t.default=void 0;t.default=e=>{if(void 0===e)return e;let[t,n=""]=e.split("?");return n&&(n="?"+n),"/"===t?"/"+n:"/"===t.charAt(t.length-1)?t.slice(0,-1)+n:t+n}},11:function(e,t,n){"use strict";var r=n(4994);t.__esModule=!0,t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(n(6540)),o=r(n(5556)),i=n(20),l=n(4283),u=n(1728);function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function s(e){const t={...e,params:{...(0,l.grabMatchParams)(e.location.pathname),...e.pageResources.json.pageContext.__params}};let n;var r;n=e.pageResources.partialHydration?e.pageResources.partialHydration:(0,a.createElement)((r=e.pageResources.component)&&r.default||r,{...t,key:e.path||e.pageResources.page.path});const o=e.pageResources.head;(0,u.headHandlerForBrowser)({pageComponent:o,staticQueryResults:e.pageResources.staticQueryResults,pageComponentProps:t});return(0,i.apiRunner)("wrapPageElement",{element:n,props:t},n,(e=>{let{result:n}=e;return{element:n,props:t}})).pop()}s.propTypes={location:o.default.object.isRequired,pageResources:o.default.object.isRequired,data:o.default.object,pageContext:o.default.object.isRequired};t.default=s},9959:function(e,t){"use strict";t.__esModule=!0,t.default=void 0;const n=function(e){if("undefined"==typeof document)return!1;const t=document.createElement("link");try{if(t.relList&&"function"==typeof t.relList.supports)return t.relList.supports(e)}catch(n){return!1}return!1}("prefetch")?function(e,t){return new Promise(((n,r)=>{if("undefined"==typeof document)return void r();const a=document.createElement("link");a.setAttribute("rel","prefetch"),a.setAttribute("href",e),Object.keys(t).forEach((e=>{a.setAttribute(e,t[e])})),a.onload=n,a.onerror=r;(document.getElementsByTagName("head")[0]||document.getElementsByName("script")[0].parentNode).appendChild(a)}))}:function(e){return new Promise(((t,n)=>{const r=new XMLHttpRequest;r.open("GET",e,!0),r.onload=()=>{200===r.status?t():n()},r.send(null)}))},r={};t.default=function(e,t){return new Promise((a=>{r[e]?a():n(e,t).then((()=>{a(),r[e]=!0})).catch((()=>{}))}))}},1973:function(e,t,n){"use strict";var r=n(4994),a=n(20),o=r(n(6540)),i=n(1693),l=n(7035),u=n(1532),c=n(9010),s=r(n(4980)),f=r(n(11)),h=r(n(6877)),d=n(4939),p=r(n(8238)),m=r(n(8797)),g=r(n(551)),v=n(9732);const y=new d.ProdLoader(h.default,g.default,window.pageData);(0,d.setLoader)(y),y.setApiRunner(a.apiRunner);const{render:b,hydrate:w}=(0,v.reactDOMUtils)();window.asyncRequires=h.default,window.___emitter=s.default,window.___loader=d.publicLoader,(0,c.init)();const _="gatsby-reload-compilation-hash-match";(0,a.apiRunnerAsync)("onClientEntry").then((()=>{(0,a.apiRunner)("registerServiceWorker").filter(Boolean).length>0&&n(626);const e=e=>o.default.createElement(i.BaseContext.Provider,{value:{baseuri:"/",basepath:"/"}},o.default.createElement(f.default,e)),t=o.default.createContext({});class r extends o.default.Component{render(){const{children:e}=this.props;return o.default.createElement(i.Location,null,(n=>{let{location:r}=n;return o.default.createElement(p.default,{location:r},(n=>{let{pageResources:r,location:a}=n;if(r.partialHydration)return o.default.createElement(t.Provider,{value:{pageResources:r,location:a}},e);{const n=(0,d.getStaticQueryResults)();return o.default.createElement(u.StaticQueryContext.Provider,{value:n},o.default.createElement(t.Provider,{value:{pageResources:r,location:a}},e))}}))}))}}class s extends o.default.Component{render(){return o.default.createElement(t.Consumer,null,(t=>{let{pageResources:n,location:r}=t;return o.default.createElement(c.RouteUpdates,{location:r},o.default.createElement(l.ScrollContext,{location:r,shouldUpdateScroll:c.shouldUpdateScroll},o.default.createElement(i.Router,{basepath:"",location:r,id:"gatsby-focus-wrapper"},o.default.createElement(e,Object.assign({path:"/404.html"===n.page.path||"/500.html"===n.page.path?(0,m.default)(r.pathname,""):encodeURI((n.page.matchPath||n.page.path).split("?")[0])},this.props,{location:r,pageResources:n},n.json)))))}))}}const{pagePath:h,location:g}=window;h&&""+h!==g.pathname+(h.includes("?")?g.search:"")&&!(y.findMatchPath((0,m.default)(g.pathname,""))||h.match(/^\/(404|500)(\/?|.html)$/)||h.match(/^\/offline-plugin-app-shell-fallback\/?$/))&&(0,i.navigate)(""+h+(h.includes("?")?"":g.search)+g.hash,{replace:!0});const v=()=>{try{return sessionStorage}catch{return null}};d.publicLoader.loadPage(g.pathname+g.search).then((e=>{var t;const n=v();if(null!=e&&null!==(t=e.page)&&void 0!==t&&t.webpackCompilationHash&&e.page.webpackCompilationHash!==window.___webpackCompilationHash&&("serviceWorker"in navigator&&null!==navigator.serviceWorker.controller&&"activated"===navigator.serviceWorker.controller.state&&navigator.serviceWorker.controller.postMessage({gatsbyApi:"clearPathResources"}),n)){if(!("1"===n.getItem(_)))return n.setItem(_,"1"),void window.location.reload(!0)}if(n&&n.removeItem(_),!e||e.status===d.PageResourceStatus.Error){const t="page resources for "+g.pathname+" not found. Not rendering React";if(e&&e.error)throw console.error(t),e.error;throw new Error(t)}const i=(0,a.apiRunner)("wrapRootElement",{element:o.default.createElement(s,null)},o.default.createElement(s,null),(e=>{let{result:t}=e;return{element:t}})).pop(),l=function(){const e=o.default.useRef(!1);return o.default.useEffect((()=>{e.current||(e.current=!0,performance.mark&&performance.mark("onInitialClientRender"),(0,a.apiRunner)("onInitialClientRender"))}),[]),o.default.createElement(r,null,i)},u=document.getElementById("gatsby-focus-wrapper");let c=b;u&&u.children.length&&(c=w);const f=(0,a.apiRunner)("replaceHydrateFunction",void 0,c)[0];function h(){const e="undefined"!=typeof window?document.getElementById("___gatsby"):null;f(o.default.createElement(l,null),e)}const p=document;if("complete"===p.readyState||"loading"!==p.readyState&&!p.documentElement.doScroll)setTimeout((function(){h()}),0);else{const e=function(){p.removeEventListener("DOMContentLoaded",e,!1),window.removeEventListener("load",e,!1),h()};p.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)}}))}))},963:function(e,t,n){"use strict";var r=n(4994);t.__esModule=!0,t.default=void 0;var a=r(n(6540)),o=r(n(5556)),i=r(n(4939)),l=r(n(11));const u=e=>{let{location:t}=e;const n=i.default.loadPageSync(t.pathname);return n?a.default.createElement(l.default,{location:t,pageResources:n,...n.json}):null};u.propTypes={location:o.default.shape({pathname:o.default.string.isRequired}).isRequired};t.default=u},2549:function(e,t,n){var r;e.exports=(r=n(963))&&r.default||r},9732:function(e,t,n){"use strict";t.__esModule=!0,t.reactDOMUtils=function(){let e,t;{const r=n(961);e=r.render,t=r.hydrate}return{render:e,hydrate:t}};new WeakMap},6566:function(e,t){t.M=e=>e},3072:function(e,t,n){"use strict";var r=n(4994);t.__esModule=!0,t.maybeGetBrowserRedirect=function(e){let t=o.get(e);t||(t=i.get(e.toLowerCase()));return t};var a=r(n(1324));const o=new Map,i=new Map;a.default.forEach((e=>{e.ignoreCase?i.set(e.fromPath,e):o.set(e.fromPath,e)}))},626:function(e,t,n){"use strict";var r=n(20);"https:"!==window.location.protocol&&"localhost"!==window.location.hostname?console.error("Service workers can only be used over HTTPS, or on localhost for development"):"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").then((function(e){e.addEventListener("updatefound",(()=>{(0,r.apiRunner)("onServiceWorkerUpdateFound",{serviceWorker:e});const t=e.installing;console.log("installingWorker",t),t.addEventListener("statechange",(()=>{switch(t.state){case"installed":navigator.serviceWorker.controller?(window.___swUpdated=!0,(0,r.apiRunner)("onServiceWorkerUpdateReady",{serviceWorker:e}),window.___failedResources&&(console.log("resources failed, SW updated - reloading"),window.location.reload())):(console.log("Content is now available offline!"),(0,r.apiRunner)("onServiceWorkerInstalled",{serviceWorker:e}));break;case"redundant":console.error("The installing service worker became redundant."),(0,r.apiRunner)("onServiceWorkerRedundant",{serviceWorker:e});break;case"activated":(0,r.apiRunner)("onServiceWorkerActive",{serviceWorker:e})}}))}))})).catch((function(e){console.error("Error during service worker registration:",e)}))},6858:function(e,t){"use strict";t.__esModule=!0,t.RouteAnnouncerProps=void 0;t.RouteAnnouncerProps={id:"gatsby-announcer",style:{position:"absolute",top:0,width:1,height:1,padding:0,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:0},"aria-live":"assertive","aria-atomic":"true"}},8883:function(e,t,n){"use strict";var r=n(4994);t.__esModule=!0,t.useStaticQuery=t.StaticQueryServerContext=t.StaticQueryContext=t.StaticQuery=void 0;var a=r(n(6540)),o=r(n(5556));const i=t.StaticQueryContext=a.default.createContext({});let l=t.StaticQueryServerContext=null;function u(e){let{staticQueryData:t,data:n,query:r,render:o}=e;const i=n?n.data:t[r]&&t[r].data;return a.default.createElement(a.default.Fragment,null,i&&o(i),!i&&a.default.createElement("div",null,"Loading (StaticQuery)"))}a.default.createServerContext&&(t.StaticQueryServerContext=l=a.default.createServerContext("StaticQuery",{}));const c=e=>{const{data:t,query:n,render:r,children:o}=e;return a.default.createElement(i.Consumer,null,(e=>a.default.createElement(u,{data:t,query:n,render:r||o,staticQueryData:e})))};t.StaticQuery=c,c.propTypes={data:o.default.object,query:o.default.string.isRequired,render:o.default.func,children:o.default.func};t.useStaticQuery=e=>{var t;let n;if(a.default.useContext,n=l&&Object.keys(l._currentValue).length?a.default.useContext(l):a.default.useContext(i),isNaN(Number(e)))throw new Error("useStaticQuery was called with a string but expects to be called using `graphql`. Try this:\n\nimport { useStaticQuery, graphql } from 'gatsby';\n\nuseStaticQuery(graphql`"+e+"`);\n");if(null!==(t=n[e])&&void 0!==t&&t.data)return n[e].data;throw new Error("The result of this StaticQuery could not be fetched.\n\nThis is likely a bug in Gatsby and if refreshing the page does not fix it, please open an issue in https://github.com/gatsbyjs/gatsby/issues")}},8797:function(e,t){"use strict";t.__esModule=!0,t.default=function(e,t){void 0===t&&(t="");if(!t)return e;if(e===t)return"/";if(e.startsWith(t+"/"))return e.slice(t.length);return e}},8108:function(e,t,n){n(7488)},7914:function(e,t,n){"use strict";n.r(t),n.d(t,{onRouteUpdate:function(){return r}});n(1532),n(4598);const r=function(e,t){let{location:n}=e}},4598:function(e,t,n){"use strict";var r=n(1532)},3136:function(e,t,n){"use strict";var r=n(4994);t.__esModule=!0,t.default=void 0;var a=n(2793),o=r(n(6540));function i(e){const t=Object.assign({h2:"h2",a:"a",div:"div",p:"p",img:"img",code:"code",ol:"ol",li:"li"},(0,a.useMDXComponents)(),e.components);return o.default.createElement(o.default.Fragment,null,o.default.createElement(t.h2,{id:"backticks-are-fantastic",style:{position:"relative"}},o.default.createElement(t.a,{href:"#backticks-are-fantastic","aria-label":"backticks are fantastic permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Backticks Are Fantastic"),"\n",o.default.createElement(t.p,null,"I mean, ",o.default.createElement(t.a,{href:"http://www.refining-linux.org/archives/44/ZSH-Gem-10-Backtick-expansion/"},"legit\nawesome"),".\nHere's a contrived recreation of a real-world example I encountered:"),"\n",o.default.createElement(t.p,null,o.default.createElement(t.img,{src:"../../ln_backticks.gif",alt:"animated demonstration of backtick expansion in zsh"})),"\n",o.default.createElement(t.p,null,"Let's break this down. When making a symbolic link, you have to type out the absolute path to the\nlink target. There are reasons for that (though I'd prefer ",o.default.createElement(t.code,null,"ln")," just expanded relative links before\nmaking the symlink, tbh), but a lot of directory names are a hassle to type out. Everyone who's\nworked in a JVM language feels me."),"\n",o.default.createElement(t.p,null,"Two things help:"),"\n",o.default.createElement(t.ol,null,"\n",o.default.createElement(t.li,null,"If, as is often the case, you want to link to go in your current directory, you can totally omit the second argument"),"\n",o.default.createElement(t.li,null,"Typing some shell expression inside backticks which generates the path. If you use ",o.default.createElement(t.code,null,"bash"),", you just have to trust your short-term memory, but hitting ",o.default.createElement(t.code,null,"tab")," expands that expression interactively in ",o.default.createElement(t.code,null,"zsh"),". You use ",o.default.createElement(t.code,null,"zsh"),", right?"),"\n"),"\n",o.default.createElement(t.p,null,"Some would argue that the ",o.default.createElement(t.code,null,"$()")," subshell operator has strictly more powerful semantics than\nbackticks because it can be nested; they are, of course, correct. Other people like subshells\nbecause when you nest them, it reads just like lisp code; they are, of course, nerds[^1]. When you don't\nhave to nest anything, though, backticks have a killer advantage over subshells:"),"\n",o.default.createElement(t.ol,null,"\n",o.default.createElement(t.li,null,"33% fewer keystrokes"),"\n"),"\n",o.default.createElement(t.p,null,"Choose your own adventure."),"\n",o.default.createElement(t.p,null,"[^1]:"),"\n",o.default.createElement(t.p,null,"When it comes to lisp, I am, of course, ",o.default.createElement(t.a,{href:"https://github.com/ambirdsall/moon-phase"},"a gigantic\nnerd")," myself."))}t.default=function(e){void 0===e&&(e={});const{wrapper:t}=Object.assign({},(0,a.useMDXComponents)(),e.components);return t?o.default.createElement(t,e,o.default.createElement(i,e)):i(e)}},5828:function(e,t,n){"use strict";var r=n(4994);t.__esModule=!0,t.default=void 0;var a=n(2793),o=r(n(6540));function i(e){const t=Object.assign({p:"p",a:"a",hr:"hr",h2:"h2",div:"div",blockquote:"blockquote"},(0,a.useMDXComponents)(),e.components);return o.default.createElement(o.default.Fragment,null,o.default.createElement(t.p,null,"Taken from the ",o.default.createElement(t.a,{href:"http://www.aosabook.org/en/bdb.html"},"Berkeley DB")," section of\n",o.default.createElement(t.a,{href:"http://www.aosabook.org/en/index.html"},"The Architecture of Open-Source\nApplications"),", which breaks up its\ndiscussion of the application's specific architecture with general lessons\nand aphorisms. Read the whole thing, it's great."),"\n",o.default.createElement(t.p,null,"There's a grimness to these that I find utterly charming: ",o.default.createElement(t.a,{href:"#design-lesson-3"},"lesson\n3"),' warns "[s]oftware architecture degrades in direct\nproportion to the number of changes made to the software: bug fixes corrode the\nlayering and new features stress design." It\'s an approach that treats software\ndesign in general and object orientation in specific (OO as in "code that goes\n\'not my job, you figure it out\'", not as in "code that is organized with\nclasses") not like a matter of artistic composition so much as intellectual\nsanitation. It\'s a dirty world out there: wash your ass.'),"\n",o.default.createElement(t.hr),"\n",o.default.createElement(t.h2,{id:"design-lesson-1",style:{position:"relative"}},o.default.createElement(t.a,{href:"#design-lesson-1","aria-label":"design lesson 1 permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Design Lesson 1"),"\n",o.default.createElement(t.blockquote,null,"\n",o.default.createElement(t.p,null,"It is vital for any complex software package's testing and maintenance that the\nsoftware be designed and built as a cooperating set of modules with\nwell-defined API boundaries. The boundaries can (and should!) shift as needs\ndictate, but they always need to be there. The existence of those boundaries\nprevents the software from becoming an unmaintainable pile of spaghetti. Butler\nLampson once said that all problems in computer science can be solved by\nanother level of indirection. More to the point, when asked what it meant for\nsomething to be object-oriented, Lampson said it meant being able to have\nmultiple implementations behind an API. The Berkeley DB design and\nimplementation embody this approach of permitting multiple implementations\nbehind a common interface, providing an object-oriented look and feel, even\nthough the library is written in C."),"\n"),"\n",o.default.createElement(t.h2,{id:"design-lesson-2",style:{position:"relative"}},o.default.createElement(t.a,{href:"#design-lesson-2","aria-label":"design lesson 2 permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Design Lesson 2"),"\n",o.default.createElement(t.blockquote,null,"\n",o.default.createElement(t.p,null,"A software design is simply one of several ways to force yourself to think\nthrough the entire problem before attempting to solve it. Skilled programmers\nuse different techniques to this end: some write a first version and throw it\naway, some write extensive manual pages or design documents, others fill out a\ncode template where every requirement is identified and assigned to a specific\nfunction or comment. For example, in Berkeley DB, we created a complete set of\nUnix-style manual pages for the access methods and underlying components before\nwriting any code. Regardless of the technique used, it's difficult to think\nclearly about program architecture after code debugging begins, not to mention\nthat large architectural changes often waste previous debugging effort.\nSoftware architecture requires a different mind set from debugging code, and\nthe architecture you have when you begin debugging is usually the architecture\nyou'll deliver in that release."),"\n"),"\n",o.default.createElement(t.h2,{id:"design-lesson-3",style:{position:"relative"}},o.default.createElement(t.a,{href:"#design-lesson-3","aria-label":"design lesson 3 permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Design Lesson 3"),"\n",o.default.createElement(t.blockquote,null,"\n",o.default.createElement(t.p,null,"Software architecture does not age gracefully. Software architecture degrades\nin direct proportion to the number of changes made to the software: bug fixes\ncorrode the layering and new features stress design. Deciding when the software\narchitecture has degraded sufficiently that you should re-design or re-write a\nmodule is a hard decision. On one hand, as the architecture degrades,\nmaintenance and development become more difficult and at the end of that path\nis a legacy piece of software maintainable only by having an army of\nbrute-force testers for every release, because nobody understands how the\nsoftware works inside. On the other hand, users will bitterly complain over the\ninstability and incompatibilities that result from fundamental changes. As a\nsoftware architect, your only guarantee is that someone will be angry with you\nno matter which path you choose."),"\n"),"\n",o.default.createElement(t.h2,{id:"design-lesson-4",style:{position:"relative"}},o.default.createElement(t.a,{href:"#design-lesson-4","aria-label":"design lesson 4 permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Design Lesson 4"),"\n",o.default.createElement(t.blockquote,null,"\n",o.default.createElement(t.p,null,'It doesn\'t matter how you name your variables, methods, functions, or what\ncomments or code style you use; that is, there are a large number of formats\nand styles that are "good enough." What does matter, and matters very much, is\nthat naming and style be consistent. Skilled programmers derive a tremendous\namount of information from code format and object naming. You should view\nnaming and style inconsistencies as some programmers investing time and effort\nto lie to the other programmers, and vice versa. Failing to follow house coding\nconventions is a firing offense.'),"\n"),"\n",o.default.createElement(t.h2,{id:"design-lesson-5",style:{position:"relative"}},o.default.createElement(t.a,{href:"#design-lesson-5","aria-label":"design lesson 5 permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Design Lesson 5"),"\n",o.default.createElement(t.blockquote,null,"\n",o.default.createElement(t.p,null,"Software architects must choose their upgrade battles carefully: users will\naccept minor changes to upgrade to new releases (if you guarantee compile-time\nerrors, that is, obvious failures until the upgrade is complete; upgrade\nchanges should never fail in subtle ways). But to make truly fundamental\nchanges, you must admit it's a new code base and requires a port of your user\nbase. Obviously, new code bases and application ports are not cheap in time or\nresources, but neither is angering your user base by telling them a huge\noverhaul is really a minor upgrade."),"\n"),"\n",o.default.createElement(t.h2,{id:"design-lesson-6",style:{position:"relative"}},o.default.createElement(t.a,{href:"#design-lesson-6","aria-label":"design lesson 6 permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Design Lesson 6"),"\n",o.default.createElement(t.blockquote,null,"\n",o.default.createElement(t.p,null,"In library design, respect for the namespace is vital. Programmers who use your\nlibrary should not need to memorize dozens of reserved names for functions,\nconstants, structures, and global variables to avoid naming collisions between\nan application and the library."),"\n"),"\n",o.default.createElement(t.h2,{id:"design-lesson-7",style:{position:"relative"}},o.default.createElement(t.a,{href:"#design-lesson-7","aria-label":"design lesson 7 permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Design Lesson 7"),"\n",o.default.createElement(t.blockquote,null,"\n",o.default.createElement(t.p,null,"Before we wrote a shared-memory linked-list package, Berkeley DB engineers\nhand-coded a variety of different data structures in shared memory, and these\nimplementations were fragile and difficult to debug. The shared-memory list\npackage, modeled after the BSD list package (queue.h), replaced all of those\nefforts. Once it was debugged, we never had to debug another shared memory\nlinked-list problem. This illustrates three important design principles: First,\nif you have functionality that appears more than once, write the shared\nfunctions and use them, because the mere existence of two copies of any\nspecific functionality in your code guarantees that one of them is incorrectly\nimplemented. Second, when you develop a set of general purpose routines, write\na test suite for the set of routines, so you can debug them in isolation.\nThird, the harder code is to write, the more important for it to be separately\nwritten and maintained; it's almost impossible to keep surrounding code from\ninfecting and corroding a piece of code."),"\n"),"\n",o.default.createElement(t.h2,{id:"design-lesson-8",style:{position:"relative"}},o.default.createElement(t.a,{href:"#design-lesson-8","aria-label":"design lesson 8 permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Design Lesson 8"),"\n",o.default.createElement(t.blockquote,null,"\n",o.default.createElement(t.p,null,"Write-ahead logging is another example of providing encapsulation and layering,\neven when the functionality is never going to be useful to another piece of\nsoftware: after all, how many programs care about LSNs in the cache?\nRegardless, the discipline is useful and makes the software easier to maintain,\ntest, debug and extend."),"\n"),"\n",o.default.createElement(t.h2,{id:"design-lesson-9",style:{position:"relative"}},o.default.createElement(t.a,{href:"#design-lesson-9","aria-label":"design lesson 9 permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Design Lesson 9"),"\n",o.default.createElement(t.blockquote,null,"\n",o.default.createElement(t.p,null,"Berkeley DB's choice to use page-level locking was made for good reasons, but\nwe've found that choice to be problematic at times. Page-level locking limits\nthe concurrency of the application as one thread of control modifying a record\non a database page will prevent other threads of control from modifying other\nrecords on the same page, while record-level locks permit such concurrency as\nlong as the two threads of control are not modifying the same record.\nPage-level locking enhances stability as it limits the number of recovery paths\nthat are possible (a page is always in one of a couple of states during\nrecovery, as opposed to the infinite number of possible states a page might be\nin if multiple records are being added and deleted to a page). As Berkeley DB\nwas intended for use as an embedded system where no database administrator\nwould be available to fix things should there be corruption, we chose stability\nover increased concurrency."),"\n"),"\n",o.default.createElement(t.h2,{id:"design-lesson-10",style:{position:"relative"}},o.default.createElement(t.a,{href:"#design-lesson-10","aria-label":"design lesson 10 permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Design Lesson 10"),"\n",o.default.createElement(t.blockquote,null,"\n",o.default.createElement(t.p,null,"Berkeley DB's general-purpose design was well rewarded when we added concurrent\ndata store functionality. Initially Berkeley DB provided only two modes of\noperation: either you ran without any write concurrency or with full\ntransaction support. Transaction support carries a certain degree of complexity\nfor the developer and we found some applications wanted improved concurrency\nwithout the overhead of full transactional support. To provide this feature, we\nadded support for API-level locking that allows concurrency, while guaranteeing\nno deadlocks. This required a new and different lock mode to work in the\npresence of cursors. Rather than adding special purpose code to the lock\nmanager, we were able to create an alternate lock matrix that supported only\nthe lock modes necessary for the API-level locking. Thus, simply by configuring\nthe lock manager differently, we were able provide the locking support we\nneeded. (Sadly, it was not as easy to change the access methods; there are\nstill significant parts of the access method code to handle this special mode\nof concurrent access.)"),"\n"),"\n",o.default.createElement(t.h2,{id:"design-lesson-11",style:{position:"relative"}},o.default.createElement(t.a,{href:"#design-lesson-11","aria-label":"design lesson 11 permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Design Lesson 11"),"\n",o.default.createElement(t.blockquote,null,"\n",o.default.createElement(t.p,null,"When you find an architectural problem you don't want to fix \"right now\" and\nthat you're inclined to just let go, remember that being nibbled to death by\nducks will kill you just as surely as being trampled by elephants. Don't be too\nhesitant to change entire frameworks to improve software structure, and when\nyou make the changes, don't make a partial change with the idea that you'll\nclean up later—do it all and then move forward. As has been often repeated, \"If\nyou don't have the time to do it right now, you won't find the time to do it\nlater.\" And while you're changing the framework, write the test structure as\nwell."),"\n"),"\n",o.default.createElement(t.h2,{id:"design-lesson-12",style:{position:"relative"}},o.default.createElement(t.a,{href:"#design-lesson-12","aria-label":"design lesson 12 permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Design Lesson 12"),"\n",o.default.createElement(t.blockquote,null,"\n",o.default.createElement(t.p,null,"Mpool and Log use internal handle methods to facilitate write-ahead logging,\nand in some cases, the method declaration is longer than the code it runs,\nsince the code is often comparing two integral values and nothing more. Why\nbother with such insignificant methods, just to maintain consistent layering?\nBecause if your code is not so object-oriented as to make your teeth hurt, it\nis not object-oriented enough. Every piece of code should do a small number of\nthings and there should be a high-level design encouraging programmers to build\nfunctionality out of smaller chunks of functionality, and so on. If there's\nanything we have learned about software development in the past few decades, it\nis that our ability to build and maintain significant pieces of software is\nfragile. Building and maintaining significant pieces of software is difficult\nand error-prone, and as the software architect, you must do everything that you\ncan, as early as you can, as often as you can, to maximize the information\nconveyed in the structure of your software."),"\n"),"\n",o.default.createElement(t.h2,{id:"design-lesson-13",style:{position:"relative"}},o.default.createElement(t.a,{href:"#design-lesson-13","aria-label":"design lesson 13 permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Design Lesson 13"),"\n",o.default.createElement(t.blockquote,null,"\n",o.default.createElement(t.p,null,"There is rarely such thing as an unimportant bug. Sure, there's a typo now and\nthen, but usually a bug implies somebody didn't fully understand what they were\ndoing and implemented the wrong thing. When you fix a bug, don't look for the\nsymptom: look for the underlying cause, the misunderstanding, if you will,\nbecause that leads to a better understanding of the program's architecture as\nwell as revealing fundamental underlying flaws in the design itself."),"\n"),"\n",o.default.createElement(t.h2,{id:"design-lesson-14",style:{position:"relative"}},o.default.createElement(t.a,{href:"#design-lesson-14","aria-label":"design lesson 14 permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Design Lesson 14"),"\n",o.default.createElement(t.blockquote,null,"\n",o.default.createElement(t.p,null,"Database recovery is a complex topic, difficult to write and harder to debug\nbecause recovery simply shouldn't happen all that often. In his Turing Award\nLecture, Edsger Dijkstra argued that programming was inherently difficult and\nthe beginning of wisdom is to admit we are unequal to the task. Our goal as\narchitects and programmers is to use the tools at our disposal: design, problem\ndecomposition, review, testing, naming and style conventions, and other good\nhabits, to constrain programming problems to problems we can solve."),"\n"))}t.default=function(e){void 0===e&&(e={});const{wrapper:t}=Object.assign({},(0,a.useMDXComponents)(),e.components);return t?o.default.createElement(t,e,o.default.createElement(i,e)):i(e)}},6853:function(e,t,n){"use strict";var r=n(4994);t.__esModule=!0,t.default=void 0;var a=n(2793),o=r(n(6540));function i(e){const t=Object.assign({p:"p",h2:"h2",a:"a",div:"div",code:"code",pre:"pre",ol:"ol",li:"li"},(0,a.useMDXComponents)(),e.components);return o.default.createElement(o.default.Fragment,null,o.default.createElement(t.p,null,"It came to pass that after 3 years of neglect, I wanted to revive my old\nwebsite. I figured I'd add a post or two, maybe tweak a few things about the\nHTML and CSS, and then I could rewrite it in a different stack at my leisure.\nI think a lot of things that are wrong, though."),"\n",o.default.createElement(t.h2,{id:"problem-i-had-a-new-computer-and-my-webpage-had-a-fussy-development-env",style:{position:"relative"}},o.default.createElement(t.a,{href:"#problem-i-had-a-new-computer-and-my-webpage-had-a-fussy-development-env","aria-label":"problem i had a new computer and my webpage had a fussy development env permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Problem: I had a new computer and my webpage had a fussy development env;"),"\n",o.default.createElement(t.p,null,"I tried to run the development build, but ran into an error: I needed the right\nruby version. I've never done ruby development on this operating system, so I\ndon't have any tool in place to manage ruby versions. To fix things, I needed to\ninstall one of ",o.default.createElement(t.code,null,"chruby"),"/",o.default.createElement(t.code,null,"rbenv"),"/",o.default.createElement(t.code,null,"rvm"),"; setup ",o.default.createElement(t.code,null,"nix")," or ",o.default.createElement(t.code,null,"guix")," with ",o.default.createElement(t.code,null,"direnv"),"; or\nmaybe I could use ",o.default.createElement(t.code,null,"asdf")," or fuck if I know what the cool kids are doing these\ndays. Oy, what a hassle. Still, I eventually got on the version of ruby\nspecified in the Gemfile and I got a different error. Progress, right?"),"\n",o.default.createElement(t.p,null,"I needed to upgrade bundler, so I ran ",o.default.createElement(t.code,null,"bundle update --bundler"),". This, it seems,\novershot the mark: I needed to downgrade bundler, which is a bigger hassle than\nupgrading. Whatever: I uninstalled the new version and installed the specific\nolder one that was compatible with the rest of the project."),"\n",o.default.createElement(t.p,null,"With this, I could actually run the site locally! All was not well, though: it\nlooked like crap. It turned out that only some of the stylesheets I was loading\nfrom a ruby gem were available in practice, and the icon font I had been using\nwas nowhere to be found[^1]. At this point, I gave up: none of these problems were\ninsurmountable, but why go to all that effort when I wanted to rewrite it\nanyway?"),"\n",o.default.createElement(t.h2,{id:"and-having-been-exposed-to-jsx",style:{position:"relative"}},o.default.createElement(t.a,{href:"#and-having-been-exposed-to-jsx","aria-label":"and having been exposed to jsx permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"and, having been exposed to JSX,"),"\n",o.default.createElement(t.p,null,"In the ruby version, I used ",o.default.createElement(t.code,null,".erb")," files to handle dynamic data and a few bits\nof html boilerplate. The way ",o.default.createElement(t.code,null,".erb")," files treat the non-logic contents as a dumb\ntext stream, not something with a tree structure, makes it fundamentally a worse\nfit for modeling HTML than the tree structure of JSX templates[^3]. Having\nworked with react and angular, I don't want to go back to the bad old days of\nwrangling HTML as raw text, I want to compose and encapsulate HTML using\ncomponents; and having used JSX, embedding the structural logic of the template\nwithin the content has begun to feel inside out. I didn't want to use another\ntemplating system."),"\n",o.default.createElement(t.h2,{id:"and-wanting-to-maintain-a-statically-generated-site",style:{position:"relative"}},o.default.createElement(t.a,{href:"#and-wanting-to-maintain-a-statically-generated-site","aria-label":"and wanting to maintain a statically generated site permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"and wanting to maintain a statically-generated site,"),"\n",o.default.createElement(t.p,null,"(While ",o.default.createElement(t.code,null,"create-react-app")," is dope and all, there is zero dynamic content on this\nwhole site.)"),"\n",o.default.createElement(t.h2,{id:"the-choice-of-gatsby-seemed-good-so-i-set-to-work",style:{position:"relative"}},o.default.createElement(t.a,{href:"#the-choice-of-gatsby-seemed-good-so-i-set-to-work","aria-label":"the choice of gatsby seemed good so i set to work permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"the choice of gatsby seemed good, so I set to work."),"\n",o.default.createElement(t.p,null,"First I made the page shell; that was just porting some html to react\ncomponents. It happened that all I needed were well-documented, ",o.default.createElement(t.a,{href:"https://www.gatsbyjs.org/plugins/"},"easily\nsearchable plugins")," to ",o.default.createElement(t.a,{href:"https://www.gatsbyjs.org/packages/gatsby-transformer-remark/"},"render\nmarkdown"),"\ninto pages via a template; with ",o.default.createElement(t.a,{href:"https://www.gatsbyjs.org/packages/gatsby-remark-prismjs/"},"colorized code\nblocks"),";\nwith ",o.default.createElement(t.a,{href:"https://www.gatsbyjs.org/packages/gatsby-remark-autolink-headers/"},"autolinked\nheaders"),";\nwith\n",o.default.createElement(t.a,{href:"https://www.gatsbyjs.org/packages/gatsby-remark-footnotes/"},"footnotes"),"."),"\n",o.default.createElement(t.p,null,"As a sidenote, pour one out for good sidenotes. I'm still holding out hope I\nfind a decent plugin I can use to finagle sidenotes from markdown without\nneeding to go all the way on some Tufte CSS theme. I don't think I'm likely to\ngo to the effort of coding one up myself anytime soon, though."),"\n",o.default.createElement(t.p,null,"Anyway, I had the existing posts rendering acceptably to HTML from pure\nmarkdown, getting autolinking and asides without needing any .erb equivalent."),"\n",o.default.createElement(t.h2,{id:"i-had-to-figure-out-how-to-sort-a-list-of-posts",style:{position:"relative"}},o.default.createElement(t.a,{href:"#i-had-to-figure-out-how-to-sort-a-list-of-posts","aria-label":"i had to figure out how to sort a list of posts permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"I had to figure out how to sort a list of posts;"),"\n",o.default.createElement(t.p,null,"This was straightforward: I wanted to group by topic, sort each topic by date,\nand sort the set of topics by date of most recent post. All the data I needed\nwas easily queryable from the markdown frontmatter via graphQL. You'll notice\nthat the remark plugin which renders the markdown exposes the list of rendered\nposts under a property named ",o.default.createElement(t.code,null,"edges")," and, to be honest, I'm not sure why: the\nname seems to describe the data's underlying topology rather than its API.\nWhatever."),"\n",o.default.createElement(t.pre,null,o.default.createElement(t.code,{className:"language-javascript"},"// the page component's props are destructured like so:\n// ({\n//   data: {\n//     allMarkdownRemark: { edges },\n//     site: { siteMetadata: { title }},\n//   },\n// })\nconst postsByTopic = edges\n  .filter(e => !e.node.frontmatter.draft)\n  .map(e => e.node)\n  .reduce((topics, n) => {\n    const { topic } = n.frontmatter\n\n    // nobody likes to evaluate `undefined.push(n)`\n    topics[topic] = topics[topic] ? topics[topic] : []\n\n    topics[topic].push(n)\n    topics[topic].sort((a, b) => newestFirst(a, b))\n\n    return topics\n  }, {})\n\n// Order the topics by date of most recent post\nconst Posts = Object.values(postsByTopic)\n  .sort((a, b) => newestFirst(a[0], b[0]))\n  .map(renderSingleTopic)\n")),"\n",o.default.createElement(t.p,null,"Before you ask, yes, I know that sorting topics each time a new post is added is\nan ",o.default.createElement(t.code,null,"O(n²)")," algorithm, yes, I know that's improvable, and no, I don't care to\nmake it more efficient: posts are sorted once at build time, and I'd have to\npublish a post ever day for years (if not decades) before that ",o.default.createElement(t.code,null,"n")," gets big\nenough to be a problem. When efficiency is not important, always take the\napproach that's simplest to understand."),"\n",o.default.createElement(t.p,null,"I found it was significantly nicer to do the filtering in javascript than ruby.\nI was surprised by that, because I really love ruby's ",o.default.createElement(t.code,null,"Enumerable")," methods. But\njs objects are up with cons cells among my very favorite data structures to work\nwith, first-class functions make custom sorting comparators easy to add as\narguments, and ",o.default.createElement(t.code,null,"Array.prototype")," methods are just as chainable as\n",o.default.createElement(t.code,null,"Enumerable"),"s[^4]. The definition of that ",o.default.createElement(t.code,null,"newestFirst")," comparator function is\nleft as an exercise to the reader, that's already a fair chunk of code."),"\n",o.default.createElement(t.h2,{id:"then-how-to-update-the-d3-triangle-thing-to-modern-d3-using-es6-imports",style:{position:"relative"}},o.default.createElement(t.a,{href:"#then-how-to-update-the-d3-triangle-thing-to-modern-d3-using-es6-imports","aria-label":"then how to update the d3 triangle thing to modern d3 using es6 imports permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"then how to update the d3 triangle thing to modern d3 using es6 imports"),"\n",o.default.createElement(t.p,null,"This wasn't too bad: I changed all the ",o.default.createElement(t.code,null,"var")," statements to ",o.default.createElement(t.code,null,"const"),"; fixed the\none variable I mutate in place (it's the easiest way to implement the algorithm)\nto use ",o.default.createElement(t.code,null,"let")," instead; and imported ",o.default.createElement(t.code,null,"d3"),". Modern versions of ",o.default.createElement(t.code,null,"d3")," export their\nconstituent parts as named exports, for ease of tree-shaking, so I had change\nthe code to import the functions I actually used instead of relying on the ",o.default.createElement(t.code,null,"d3"),"\nobject to have everything. ",o.default.createElement(t.code,null,"d3.scale.linear()")," had become ",o.default.createElement(t.code,null,"d3.scaleLinear()"),",\nbut otherwise this was a pretty mechanical translation."),"\n",o.default.createElement(t.h2,{id:"then-how-to-embed-a-d3-controlled-element-in-a-react-component",style:{position:"relative"}},o.default.createElement(t.a,{href:"#then-how-to-embed-a-d3-controlled-element-in-a-react-component","aria-label":"then how to embed a d3 controlled element in a react component permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"then how to embed a d3-controlled element in a react component"),"\n",o.default.createElement(t.p,null,"Figuring this part out was kind of fun! The basic 2-step to mounting a\nself-contained ",o.default.createElement(t.code,null,"d3")," visualization inside of a react app:"),"\n",o.default.createElement(t.ol,null,"\n",o.default.createElement(t.li,null,o.default.createElement(t.code,null,"const domElementRef = useRef(null)")),"\n",o.default.createElement(t.li,null,o.default.createElement(t.code,null,"useEffect(() => d3.select(domElementRef.current).doStuffWith(props.data), [props.data])")),"\n"),"\n",o.default.createElement(t.p,null,"That's the general approach, since usually a ",o.default.createElement(t.code,null,"d3")," visualization is based on some\ninput data and should rerender when and if the data changes; mine uses\nrandomly-generated data, though, so I didn't even need the dependency array."),"\n",o.default.createElement(t.p,null,"Regardless, it's much nicer to do with hooks than lifecycle methods, where you'd\nneed to use both ",o.default.createElement(t.code,null,"componentDidMount")," and ",o.default.createElement(t.code,null,"componentDidUpdate")," to ensure the\nvisualization ran at all the appropriate times."),"\n",o.default.createElement(t.h2,{id:"and-then-i-had-a-site",style:{position:"relative"}},o.default.createElement(t.a,{href:"#and-then-i-had-a-site","aria-label":"and then i had a site permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"and then I had a site!"),"\n",o.default.createElement(t.p,null,"I hope you like it."),"\n",o.default.createElement(t.p,null,"[^1]:"),"\n",o.default.createElement(t.p,null,"It is very popular to try to dunk on the javascript ecosystem in various parts\nof programmer culture[^2], and one of the very most popular ways is to clown on\nthe size of the ",o.default.createElement(t.code,null,"node_modules")," directory. Since ",o.default.createElement(t.code,null,"npm")," installs every package on\na per-project basis; since it errs on the side of having multiple (potentially\nincompatible) versions of transitive dependencies rather than forcing you to\njust choose one; and since javascript itself has a very small standard library,\nleading to heavy use of library code; it's common to have large ",o.default.createElement(t.code,null,"node_modules"),"\ndirectories on your hard drive. Clown all you want, but the self-containment of\nthat approach would have saved me a bunch of hassle here. Or maybe I just had a\nbadly-written ",o.default.createElement(t.code,null,"Gemfile"),"."),"\n",o.default.createElement(t.p,null,"[^2]:"),"\n",o.default.createElement(t.p,null,"I have the strong impression that this is at least in\npart sub-rosa sexism: frontend work, being user-facing and visual, fits\nstereotypes of women's work, and indeed many female programmers are channeled\ninto frontend work regardless of their specific interests or abilities.\nNeckbeards huddle together discussing the manly arts of functional programming,\nasynchronous logic, optimizing dependency graphs, and distributed computing,\nnever pausing to consider that those are all part and\n",o.default.createElement(t.a,{href:"https://parceljs.org/"},"parcel")," of frontend work. But I digress."),"\n",o.default.createElement(t.p,null,"[^3]:"),"\n",o.default.createElement(t.p,null,"I have an intuition that this has to do with the ol' Chomsky hierarchy,\nakin to how regular expression can scan text streams in sophisticated ways but\ncan't validate structural features like valid nesting or pairing."),"\n",o.default.createElement(t.p,null,"[^4]:"),"\n",o.default.createElement(t.p,null,"A rant: what the fuck is up with how ",o.default.createElement(t.code,null,"sort")," mutates the array in place?\nIt's totally out of character with the rest of the ",o.default.createElement(t.code,null,"Array.prototype")," chainable\nmethods, which return new arrays, and its idiosyncracy offers no benefit: it's\njust a footgun which makes it easy to mutate your application data behind your\nown back. I realize backwards compatibility means we're stuck with a mutating\n",o.default.createElement(t.code,null,"sort"),", but I really do think the next iteration of the language should add a\nnew ",o.default.createElement(t.code,null,"Array.prototype.sorted")," method which returns a new sorted array."))}t.default=function(e){void 0===e&&(e={});const{wrapper:t}=Object.assign({},(0,a.useMDXComponents)(),e.components);return t?o.default.createElement(t,e,o.default.createElement(i,e)):i(e)}},8915:function(e,t,n){"use strict";var r=n(4994);t.__esModule=!0,t.default=void 0;var a=n(2793),o=r(n(6540));function i(e){const t=Object.assign({h2:"h2",a:"a",div:"div",p:"p",ol:"ol",li:"li",img:"img",code:"code",pre:"pre"},(0,a.useMDXComponents)(),e.components);return o.default.createElement(o.default.Fragment,null,o.default.createElement(t.h2,{id:"a-cool-ass-photo-album",style:{position:"relative"}},o.default.createElement(t.a,{href:"#a-cool-ass-photo-album","aria-label":"a cool ass photo album permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"A Cool-ass photo album"),"\n",o.default.createElement(t.p,null,"Our wedding photographer was a little slow in getting us our images, so I got\nto thinking about what to do. I decided I wanted a static image gallery, and I\nwanted it to be easy for anyone who came to get copies of photos they like,\nwhether for online use or making prints. For prints, people should be able to\ndownload the high-resolution originals, and those are such big files, it makes\nsense to zip the files before downloading. For digital use, there should be\nsmaller image files for download[^1],\nbut that could easily be handled entirely client-side."),"\n",o.default.createElement(t.p,null,'I decided that, in addition to normal "download this photo" usage, I wanted the\nability to'),"\n",o.default.createElement(t.ol,null,"\n",o.default.createElement(t.li,null,"Select any given subset of the images easily; and"),"\n",o.default.createElement(t.li,null,"Download that set of images as a zip file"),"\n"),"\n",o.default.createElement(t.p,null,"This is a kinda fun UI problem AND has a fun backend problem despite dealing\nwith static data. Which is great: since we're not barring our photos from\nanyone, there's no need to implement any auth, which simplifies things."),"\n",o.default.createElement(t.p,null,"The zipping part means there needs to be some server code running; I decided to use\na rails app hosted on elastic beanstalk. I was already hosting the images on\ns3, and AWS designs all their services for easy interop (naturally, to keep all\nyour money going their way); besides, I had never hosted an app that way and I\nwanted to learn."),"\n",o.default.createElement(t.p,null,"Admittedly, for the initial version of this gallery, rails was overkill: just\nwithin the world of ruby development, Sinatra would be plenty for just an image\ngallery and a single zipping endpoint. But server-side overkill isn't\nnecessarily bad: as lost as it's fast and I don't mind paying for it (let's be\nreal, my family photos aren't going to get millions of distinct views any day\nsoon), there's no real downside[^2]. Besides:"),"\n",o.default.createElement(t.ol,null,"\n",o.default.createElement(t.li,null,"I have notions of extending the app with the ability to search and filter by\nname, and rails makes building out the additional models down the line quite\nstraightforward; and"),"\n",o.default.createElement(t.li,null,"I wanted to practice working in and testing rails code for professional reasons"),"\n"),"\n",o.default.createElement(t.p,null,"So fuck it, rails it is."),"\n",o.default.createElement(t.h2,{id:"open-zipper",style:{position:"relative"}},o.default.createElement(t.a,{href:"#open-zipper","aria-label":"open zipper permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Open zipper?"),"\n",o.default.createElement(t.p,null,'I searched for "zip" on ',o.default.createElement(t.a,{href:"https://www.ruby-toolbox.com/search?q=zip"},"Ruby\nToolbox"),", and found two projects\nthat seemed to actually be intended for zipping files:"),"\n",o.default.createElement(t.p,null,o.default.createElement(t.img,{src:"../../rubyzip-gem-stats.png",alt:"Rubyzip gem stats"})),"\n",o.default.createElement(t.p,null,o.default.createElement(t.img,{src:"../../zip-gem-stats.png",alt:"Zip gem stats"})),"\n",o.default.createElement(t.p,null,"I don't know how a popularity rating is calculated, but it has a Science Beaker\nicon, so it must be important. ",o.default.createElement(t.a,{href:"https://github.com/rubyzip/rubyzip"},"Rubyzip"),",\nit seems, is the gem for me."),"\n",o.default.createElement(t.h2,{id:"zip-it-up",style:{position:"relative"}},o.default.createElement(t.a,{href:"#zip-it-up","aria-label":"zip it up permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Zip it up."),"\n",o.default.createElement(t.p,null,"That repo's ",o.default.createElement(t.code,null,"README.md")," has some intro-type example code:"),"\n",o.default.createElement(t.pre,null,o.default.createElement(t.code,{className:"language-ruby"},"require 'rubygems'\nrequire 'zip'\n\nfolder = \"Users/me/Desktop/stuff_to_zip\"\ninput_filenames = ['image.jpg', 'description.txt', 'stats.csv']\n\nzipfile_name = \"/Users/me/Desktop/archive.zip\"\n\nZip::File.open(zipfile_name, Zip::File::CREATE) do |zipfile|\n  input_filenames.each do |filename|\n    # Two arguments:\n    # - The name of the file as it will appear in the archive\n    # - The original file, including the path to find it\n    zipfile.add(filename, folder + '/' + filename)\n  end\n  zipfile.get_output_stream(\"myFile\") { |os| os.write \"myFile contains just this\" }\nend\n")),"\n",o.default.createElement(t.p,null,"It's not clear from the example alone what files do and don't need to already\nexist to get this to work. I fiddled around until I got a minimal POC working,\nwhich looked something like this:"),"\n",o.default.createElement(t.pre,null,o.default.createElement(t.code,{className:"language-ruby"},"# In the Gemfile, mind, you need\n#   gem 'rubyzip'\nrequire 'zip'\n\nfolder = \"/Users/ambirdsall/Desktop/actual_preexisting_directory\"\ninput_filenames = ['actual_preexisting_file.png']\n\nzipfile_name = \"/Users/ambirdsall/Desktop/not_yet_existing_archive_file.zip\"\n\nZip::File.open(zipfile_name, Zip::File::CREATE) do |zipfile|\n  input_filenames.each do |filename|\n    # Two arguments:\n    # - The name of the file as it will appear in the archive\n    # - The original file, including the path to find it\n    zipfile.add(filename, folder + '/' + filename)\n  end\n  zipfile.get_output_stream(\"new_filename_for_streamed_data.txt\") do |os|\n    os.write \"I'm a dynamically-created plain text file\"\n  end\nend\n")),"\n",o.default.createElement(t.p,null,"To work inside a filesystem like this, ",o.default.createElement(t.code,null,"rubyzip")," needs a full path to the\nsource files and the zipfile's directory (that all throws a big error if the\npath given to ",o.default.createElement(t.code,null,"zipfile.add")," isn't valid); but the ",o.default.createElement(t.code,null,"zipfile_name")," doesn't need to\nexist yet."),"\n",o.default.createElement(t.p,null,"More significantly, that ",o.default.createElement(t.code,null,'"new_filename_for_streamed_data"')," business implies\nthat the filesystem can be skipped altogether for data which can be\nstreamed—from a database, say, ",o.default.createElement(t.a,{href:"https://github.com/ambirdsall/wedding_photos/blob/383ddcb249c657bfbf944533373d7d560cea11ab/app/actors/photo_fetcher.rb#L12-L16"},"or s3"),"."),"\n",o.default.createElement(t.p,null,"This is plenty to work with: just get a list of selected images from the UI;\nuse that list to generate the corresponding s3 URLs; and then stream the\ncontents of each photo into a zipfile which is then sent to the user's browser\nfor download. The ",o.default.createElement(t.code,null,"zipfile.get_output_stream")," trick can be used for a friendly\nindex.txt file down the line, after I've mapped each photo to the names of the\npeople in it."),"\n",o.default.createElement(t.h2,{id:"coming-soon",style:{position:"relative"}},o.default.createElement(t.a,{href:"#coming-soon","aria-label":"coming soon permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Coming Soon..."),"\n",o.default.createElement(t.p,null,"I'll dive into the design of the UI and of the server code soon, each in its own post."),"\n",o.default.createElement(t.p,null,"[^1]:"),"\n",o.default.createElement(t.p,null,"I whipped up some ",o.default.createElement(t.code,null,"imagemagick")," scripts to do batch resizing and\noptimizing, and hosted all the photos as public-read files in an s3 bucket."),"\n",o.default.createElement(t.p,null,"[^2]:"),"\n",o.default.createElement(t.p,null,"Certainly nothing compared to sites that make you download megabytes of\njavascript before the first paint on mobile."))}t.default=function(e){void 0===e&&(e={});const{wrapper:t}=Object.assign({},(0,a.useMDXComponents)(),e.components);return t?o.default.createElement(t,e,o.default.createElement(i,e)):i(e)}},2050:function(e,t,n){"use strict";var r=n(4994);t.__esModule=!0,t.default=void 0;var a=n(2793),o=r(n(6540));function i(e){const t=Object.assign({p:"p",code:"code",h2:"h2",a:"a",div:"div",pre:"pre",ol:"ol",li:"li",em:"em",img:"img",h3:"h3"},(0,a.useMDXComponents)(),e.components);return o.default.createElement(o.default.Fragment,null,o.default.createElement(t.p,null,"I thought it would be cool to get my computer to automatically run ",o.default.createElement(t.code,null,"brew update")," every so often in the background and email me if anything went wrong. I\nthought it would be pretty simple! It was not, in fact, prety simple: I ran\ninto a bunch of super frustrating errors, usually because I was taking some\naspect of my normal terminal environment for granted (the ",o.default.createElement(t.code,null,"$PATH")," variable that\ntells the shell where to look to find commands; email protocols and\nauthentication; ssh authentication; error handling in the shell; etc etc etc)."),"\n",o.default.createElement(t.p,null,"But I learned a bunch in the process! So kick back, pour yourself a drink, and\nlearn about ",o.default.createElement(t.code,null,"cron"),", the old-school unix tool you can use to run programs behind\nyour own back."),"\n",o.default.createElement(t.h2,{id:"what-is-a-cron-and-how-does-it-cron",style:{position:"relative"}},o.default.createElement(t.a,{href:"#what-is-a-cron-and-how-does-it-cron","aria-label":"what is a cron and how does it cron permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"What is a ",o.default.createElement(t.code,null,"cron")," and how does it... cron?"),"\n",o.default.createElement(t.p,null,"Cron is an old unix program used to run commands repeatedly on a schedule.\nThere are two main parts to the cron system: there is the cron daemon, a\nprogram that (once set up) is constantly running in the background; and there\nis the crontab file, which keeps the schedule of programs to run [^1]. Once every minute\non the minute, assuming your computer is awake and running, the cron daemon (the system\nautomatically launches ",o.default.createElement(t.code,null,"cron")," after you save your first valid crontab file, and on boot\nafterwards) evaluates each line of all of the relevant installed crontab files, running\nany commands whose schedules match on the current minute. Any output to ",o.default.createElement(t.code,null,"$STDERR")," is\nassumed to be an error and is mailed to you: ",o.default.createElement(t.code,null,"cron"),"'s default mailing strategy is a local\n\"mailbox\" originally used for pre-internet user-to-user messages within a multi-user\nsystem, but if you're fancy with the google, it's pretty manageable to teach it to use\nsomething like gmail instead."),"\n",o.default.createElement(t.h2,{id:"the-crontab-file",style:{position:"relative"}},o.default.createElement(t.a,{href:"#the-crontab-file","aria-label":"the crontab file permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"The ",o.default.createElement(t.code,null,"crontab")," file"),"\n",o.default.createElement(t.p,null,"You edit the crontab file with the command ",o.default.createElement(t.code,null,"crontab -e"),", regardless of where\nyou are in the filesystem. You need to do some config to use this; more on that\nlater."),"\n",o.default.createElement(t.p,null,"Each line either contains a shell variable definition, in which case ",o.default.createElement(t.code,null,"cron"),"\nupdates its environment accordingly[^2], or a\nscheduled command. Scheduled commands are structured like this:"),"\n",o.default.createElement(t.pre,null,o.default.createElement(t.code,null,"* * * * *  /absolute/path/of/command/to/execute\n│ │ │ │ │\n│ │ │ │ └─── day of week (0 - 7) (0 to 6 are Sunday to Saturday, or use names; 7 is Sunday, the same as 0)\n│ │ │ └──────── month (1 - 12)\n│ │ └───────────── day of month (1 - 31)\n│ └────────────────── hour (0 - 23)\n└─────────────────────── min (0 - 59)\n")),"\n",o.default.createElement(t.p,null,"For any element of a schedule (hours, minutes, etc), you can use:"),"\n",o.default.createElement(t.pre,null,o.default.createElement(t.code,null,"*  matches every value\n-  defines a range, like `9-17` for every hour from 9AM to 5PM\n,  separates multiple individual values, such as `MON,WED,FRI`\n")),"\n",o.default.createElement(t.p,null,"So, for example ",o.default.createElement(t.code,null,"0 9-17 * * 1-5")," matches each hour from 9AM to 5PM on the hour,\neach weekday, with no restrictions by month or day of month."),"\n",o.default.createElement(t.h2,{id:"editing-crontab-takes-special-config-because-life-is-suffering",style:{position:"relative"}},o.default.createElement(t.a,{href:"#editing-crontab-takes-special-config-because-life-is-suffering","aria-label":"editing crontab takes special config because life is suffering permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Editing ",o.default.createElement(t.code,null,"crontab")," takes special config, because life is suffering"),"\n",o.default.createElement(t.p,null,"So ",o.default.createElement(t.code,null,"crontab -e")," opens the file with whatever your have set to ",o.default.createElement(t.code,null,"$EDITOR")," in your\nshell session. I use vim, which is secretly a problem: the ",o.default.createElement(t.code,null,"crontab")," program\nsets some rules about how you save the file, and vim's defaults work\ndifferently."),"\n",o.default.createElement(t.p,null,"Specifically, when vim writes changes to a file, it first saves them as a\nbackup file, then overwrites the original. This helps vim be more confident it\nwon't corrupt data if it crashes partway through writing, but ",o.default.createElement(t.code,null,"crontab")," won't\nlet you write to anything but the file itself, in-place. To get around this,\nadd to ",o.default.createElement(t.code,null,"~/.vimrc"),":"),"\n",o.default.createElement(t.pre,null,o.default.createElement(t.code,{className:"language-vim"},"autocmd filetype crontab setlocal nobackup nowritebackup\n")),"\n",o.default.createElement(t.h2,{id:"cron-doesnt-have-a-lot-of-things-i-took-for-granted-about-the-shell-environment",style:{position:"relative"}},o.default.createElement(t.a,{href:"#cron-doesnt-have-a-lot-of-things-i-took-for-granted-about-the-shell-environment","aria-label":"cron doesnt have a lot of things i took for granted about the shell environment permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),o.default.createElement(t.code,null,"cron")," doesn't have a lot of things I took for granted about the shell environment"),"\n",o.default.createElement(t.p,null,"This isn't that bad to deal with once you get your head around it, but it took\nme a while to realize just how much implicit environment I rely on when working\nin a terminal. The main one is the ",o.default.createElement(t.code,null,"$PATH")," variable: for every command that\nisn't built-in shell syntax, odds are good you'll need to prepend the ",o.default.createElement(t.code,null,"/bin/"),"\nor ",o.default.createElement(t.code,null,"/usr/local/bin/")," or ",o.default.createElement(t.code,null,"/usr/sbin/")," or what have you. If you don't know the\nfull path of some command you use a lot, for example, ",o.default.createElement(t.code,null,"git"),", pop open a\nterminal and run ",o.default.createElement(t.code,null,"which git"),"."),"\n",o.default.createElement(t.p,null,"My first instinct was to make one of my ",o.default.createElement(t.code,null,"crontab")," file's first lines something like"),"\n",o.default.createElement(t.pre,null,o.default.createElement(t.code,{className:"language-bash"},"PATH=/Users/ambirdsall/bin:/usr/local/bin:/usr/bin:/bin:/I/dunno/maybe/sbin:/other/things/I'm/used/to/also\n")),"\n",o.default.createElement(t.p,null,"If my crontab environment has access to all the same stuff I use everyday in my\nterminal, then writing a cron command is just like writing any old terminal\ncommand. But I think that's the wrong approach, for two reasons:"),"\n",o.default.createElement(t.ol,null,"\n",o.default.createElement(t.li,null,"Anything more complicated than a one-liner (and even many of those), you're\nbetter off just saving in a shell script"),"\n",o.default.createElement(t.li,null,"If you succeed, you've just hidden from yourself how things work under the\nhood AND made it easier for part of your terminal-based life to get out of\nsync."),"\n"),"\n",o.default.createElement(t.p,null,"If you feel a little lost when working with the full absolute paths of programs\nand would like a better handle on why different programs live in ",o.default.createElement(t.code,null,"/bin")," vs\n'/sbin' vs ",o.default.createElement(t.code,null,"/usr/sbin")," vs ",o.default.createElement(t.code,null,"/usr/local/bin"),"—or even why some programs live in\nmore than one of those places—just run ",o.default.createElement(t.code,null,"man hier")," in your terminal and give it\na quick read."),"\n",o.default.createElement(t.h2,{id:"lets-put-almost-all-of-it-together",style:{position:"relative"}},o.default.createElement(t.a,{href:"#lets-put-almost-all-of-it-together","aria-label":"lets put almost all of it together permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Let's put almost all of it together"),"\n",o.default.createElement(t.p,null,"Disclaimer: we're skipping over some hoops I had to jump through to send actual\nemails to my gmail account from the command line (google it) and the way\nthornier issue of how to authenticate an SSH connection with github (which is\nwhere ",o.default.createElement(t.code,null,"brew"),' searches for updates) in a bare-bones scripting environment\n(google "askpass" or go ',o.default.createElement(t.em,null,"really")," HAM and learn to use ",o.default.createElement(t.code,null,"expect"),"). So:"),"\n",o.default.createElement(t.pre,null,o.default.createElement(t.code,{className:"language-bash"},"0 * * * * /usr/local/bin/brew update\n")),"\n",o.default.createElement(t.p,null,"will run ",o.default.createElement(t.code,null,"brew update")," every hour on the hour, every single day, with zero\nconscious effort on my part. Awesome! Awesome."),"\n",o.default.createElement(t.p,null,"Wait, this ",o.default.createElement(t.em,null,"is")," actually awesome, right?"),"\n",o.default.createElement(t.p,null,o.default.createElement(t.img,{src:"../../dumb-cron-error-email.png",alt:"A dumb cron error email"})),"\n",o.default.createElement(t.p,null,"Goddamn it."),"\n",o.default.createElement(t.h2,{id:"okay-lets-just-go-through-one-of-the-dumb-problems",style:{position:"relative"}},o.default.createElement(t.a,{href:"#okay-lets-just-go-through-one-of-the-dumb-problems","aria-label":"okay lets just go through one of the dumb problems permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Okay, let's just go through ",o.default.createElement(t.em,null,"one")," of the dumb problems"),"\n",o.default.createElement(t.p,null,"Here's what was going on:"),"\n",o.default.createElement(t.ol,null,"\n",o.default.createElement(t.li,null,"If everything is up to date, ",o.default.createElement(t.code,null,"brew")," exits with a heads-up to ",o.default.createElement(t.code,null,"$STDERR")),"\n",o.default.createElement(t.li,null,"Seeing a message in the error stream, ",o.default.createElement(t.code,null,"cron")," emailed me"),"\n",o.default.createElement(t.li,null,"I don't want email alerts every hour that things are still up-to-date"),"\n"),"\n",o.default.createElement(t.p,null,"So:"),"\n",o.default.createElement(t.pre,null,o.default.createElement(t.code,{className:"language-bash"},"/usr/local/bin/brew update 2>&1 > /dev/null | grep -v 'up-to-date' >&2\n")),"\n",o.default.createElement(t.p,null,"First, a quick note: I use ",o.default.createElement(t.code,null,"zsh"),", not ",o.default.createElement(t.code,null,"bash"),", and there are a few differences\nin how the two shells handle redirection, so if you use ",o.default.createElement(t.code,null,"bash"),", you might\nneed to make a few changes to get it working properly\n[^3]. Let's break this down:"),"\n",o.default.createElement(t.pre,null,o.default.createElement(t.code,{className:"language-bash"},"2>&1 > /dev/null\n")),"\n",o.default.createElement(t.p,null,"The ",o.default.createElement(t.code,null,"2>&1")," redirects ",o.default.createElement(t.code,null,"$STDERR")," to ",o.default.createElement(t.code,null,"$STDOUT"),". The ",o.default.createElement(t.code,null,"> /dev/null")," redirects\n",o.default.createElement(t.code,null,"$STDOUT")," to the Pit of Despair. If you think this seems like it will redirect\nEVERYTHING to ",o.default.createElement(t.code,null,"/dev/null"),", leaving you nothing useful to work with, you think\nlike I do. But it doesn't! Whatever redirections you specify don't take effect\nuntil the next pipe (or the end of the pipeline if there is no next pipe). It\nmakes sense: this system lets you redirect a bunch of things\n[^4] to each\nothers' old handles at the same time without having to worry too much about\noverwriting important data streams because of accidental collisions along the\nway."),"\n",o.default.createElement(t.pre,null,o.default.createElement(t.code,{className:"language-bash"},"grep -v 'up-to-date'\n")),"\n",o.default.createElement(t.p,null,"So it's the contents of ",o.default.createElement(t.code,null,"$STDERR")," alone going through that pipe. Nice. ",o.default.createElement(t.code,null,"grep"),"'s\n",o.default.createElement(t.code,null,"-v")," flag reverses the pattern, meaning lines that DON'T contain 'up-to-date'\nare printed. Effectively, this filters out the 'up-to-date' error while letting\nother errors pass through."),"\n",o.default.createElement(t.pre,null,o.default.createElement(t.code,{className:"language-bash"},">&2\n")),"\n",o.default.createElement(t.p,null,"The last token there, ",o.default.createElement(t.code,null,">&2"),", redirects this filtered error stream from ",o.default.createElement(t.code,null,"$STDOUT"),"\nback to ",o.default.createElement(t.code,null,"$STDERR"),"; if anything else goes wrong, ",o.default.createElement(t.code,null,"cron")," will email as it should,\nbut it won't spam my inbox with nonsense just because I'm already good."),"\n",o.default.createElement(t.h3,{id:"nice",style:{position:"relative"}},o.default.createElement(t.a,{href:"#nice","aria-label":"nice permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"NICE."),"\n",o.default.createElement(t.p,null,"[^1]:"),"\n",o.default.createElement(t.p,null,"Depending on your operating system, there might be both system-wide\ncrontabs and user-specific crontab files; I'm only going to discuss systems\nwith a single crontab file here."),"\n",o.default.createElement(t.p,null,"[^2]:"),"\n",o.default.createElement(t.p,null,"Setting ",o.default.createElement(t.code,null,"$SHELL"),", ",o.default.createElement(t.code,null,"$PATH"),", and ",o.default.createElement(t.code,null,"$MAILTO")," correctly is quite important, and\nworth some googling if you have questions."),"\n",o.default.createElement(t.p,null,"[^3]:"),"\n",o.default.createElement(t.p,null,"If you don't know what shell you're using, it's probably ",o.default.createElement(t.code,null,"bash"),", but you\ncan check by running ",o.default.createElement(t.code,null,"echo $SHELL"),"."),"\n",o.default.createElement(t.p,null,"[^4]:"),"\n",o.default.createElement(t.p,null,"There's no rule that says ",o.default.createElement(t.code,null,"$STDIN"),", ",o.default.createElement(t.code,null,"$STDOUT"),", and ",o.default.createElement(t.code,null,"$STDERR")," are the only\n",o.default.createElement(t.a,{href:"https://en.wikipedia.org/wiki/File_descriptor"},"file descriptors")," your\nprocess can have open, after all."))}t.default=function(e){void 0===e&&(e={});const{wrapper:t}=Object.assign({},(0,a.useMDXComponents)(),e.components);return t?o.default.createElement(t,e,o.default.createElement(i,e)):i(e)}},76:function(e,t,n){"use strict";var r=n(4994);t.__esModule=!0,t.default=void 0;var a=n(2793),o=r(n(6540));function i(e){const t=Object.assign({p:"p",ol:"ol",li:"li",code:"code",pre:"pre",em:"em",h2:"h2",a:"a",div:"div",h3:"h3",h4:"h4"},(0,a.useMDXComponents)(),e.components);return o.default.createElement(o.default.Fragment,null,o.default.createElement(t.p,null,"Emacs has a few unusual properties which work together really well, making for a\nsuper powerful, flexible system that's easier to bend to your will in\nsophisticated ways than almost anything else around. That might sound like a lot\nof work, but most day-to-day emacs usage isn't reinventing the world; when you\nwant to do something custom, though, the power is right at your fingertips.\nLiterally."),"\n",o.default.createElement(t.p,null,"What are those properties? Well:"),"\n",o.default.createElement(t.ol,null,"\n",o.default.createElement(t.li,null,"\n",o.default.createElement(t.p,null,"Emacs is configured with a full-fledged, high-level programming language,\nwith functions, control flow, etc. Emacs lisp is a dynamic functional\nlanguage; the syntax is out of the ordinary, but under the hood, it's a\nlittle like old-school javascript with an emphasis on linked lists, strings,\nand text buffers. Except for macros, which are powerful like magic, only\nless… magical."),"\n"),"\n",o.default.createElement(t.li,null,"\n",o.default.createElement(t.p,null,'Literally everything you can do in emacs, including really basic stuff like\n"move the cursor forwards 15 characters" and "insert the text ',o.default.createElement(t.code,null,'function fo() { return "haha this was not named foo" }'),'" can be scripted with emacs lisp.\nHere:'),"\n",o.default.createElement(t.pre,null,o.default.createElement(t.code,{className:"language-emacs-lisp"},'(forward-char 15)\n(insert "function fo() { return \\"haha this was not named foo\\" }")\n')),"\n"),"\n",o.default.createElement(t.li,null,"\n",o.default.createElement(t.p,null,"Literally every user interaction follows the same model: you hit a key (or\nequivalent, like clicking the mouse), which triggers some lisp function."),"\n"),"\n",o.default.createElement(t.li,null,"\n",o.default.createElement(t.p,null,"You can look up, at any time you want, the name of the function bound to any\nkey; the full documentation for any function (with a hyperlink to its source\ncode, so you can dig as deep as you want); and the value of any variable.\nJust type ",o.default.createElement(t.code,null,"C-h")," and then one of ",o.default.createElement(t.code,null,"k"),", ",o.default.createElement(t.code,null,"f"),", or ",o.default.createElement(t.code,null,"v")," (guess which is which).\n(There are lots more help options under that ",o.default.createElement(t.code,null,"C-h")," prefix, too.)"),"\n"),"\n",o.default.createElement(t.li,null,"\n",o.default.createElement(t.p,null,"Literally any keystroke and combination can be bound to any function you\nwant."),"\n"),"\n"),"\n",o.default.createElement(t.p,null,'I know I used "literally" a lot in there, but lots of programs make sweeping\n"[verb] any [noun]!"-type claims that are only ',o.default.createElement(t.em,null,"mostly")," true."),"\n",o.default.createElement(t.p,null,"Anyway, once you internalize the logic of this system, you have superpowers! Did\nsomething weird just happen? Type ",o.default.createElement(t.code,null,"C-h k"),", then hit the same keystroke again to\nfind out what function is responsible. Want to change what that keystroke does?\nYou can, on the fly. You always open the same file, so you want a shortcut?\nThat's like a 30-second customization, once you're used to emacs. Want to do\nsomething fancy, but you don't know what the right function is named? Just\nsearch for all the available function names with ",o.default.createElement(t.code,null,"C-h f"),", and if one sounds\nright, select it to check its documentation. Faster than google, and always, by\ndefinition, up-to-date with your specific emacs instance."),"\n",o.default.createElement(t.p,null,"Emacs has a lot of janky and/or bullshit characteristics, due to its long\nhistory, survivor bias, and occasionally just due to the intransigence of the\nmaintainers (if any emacs maintainers read this, a sincere thank you for all you\ndo and all you have done! Now please, for the love of humans, approve some PRs\nto make the default UI more beginner-friendly and update its looks). No emacs\nuser is beholden to those neckbeards, though: if you don't like it, you can\nchange it. Or if you're not feeling like all that work, you can usually find\nsomeone else who already changed it the way you want and put that shit on\ngithub."),"\n",o.default.createElement(t.h2,{id:"seriously-before-you-get-started-remap-caps-lock-to-control",style:{position:"relative"}},o.default.createElement(t.a,{href:"#seriously-before-you-get-started-remap-caps-lock-to-control","aria-label":"seriously before you get started remap caps lock to control permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"seriously, before you get started: remap caps lock to control"),"\n",o.default.createElement(t.p,null,"Caps lock is useless. Control is ",o.default.createElement(t.em,null,"constantly")," used in emacs. As a bonus, lots of\nstandard emacs shortcuts for text navigation (",o.default.createElement(t.code,null,"C-a")," to jump to start of line;\n",o.default.createElement(t.code,null,"C-e")," to jump to end of line; ",o.default.createElement(t.code,null,"C-k")," to delete from the cursor to the end of text\nor the next newline, whichever comes first; ",o.default.createElement(t.code,null,"C-t"),' to "transpose" two characters\nwhen you make a tyop; ',o.default.createElement(t.code,null,"C-n")," and ",o.default.createElement(t.code,null,"C-p")," to go down/up one line) work in the shell\nand in almost all OSX text fields. If control is where caps lock was, all this\nis right on home row, super easy and ergonomic to use. If not, you sort of end\nup making weird claw hands all the time."),"\n",o.default.createElement(t.h2,{id:"okay-with-that-out-of-the-way-quick-start",style:{position:"relative"}},o.default.createElement(t.a,{href:"#okay-with-that-out-of-the-way-quick-start","aria-label":"okay with that out of the way quick start permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"okay, with that out of the way: quick start"),"\n",o.default.createElement(t.p,null,"Lots of people will tell you that stock emacs sucks. That is because stock emacs\nkind of sucks. We can do better than that."),"\n",o.default.createElement(t.h3,{id:"install-a-version-of-emacs-that-isnt-awful",style:{position:"relative"}},o.default.createElement(t.a,{href:"#install-a-version-of-emacs-that-isnt-awful","aria-label":"install a version of emacs that isnt awful permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Install a version of emacs that isn't awful"),"\n",o.default.createElement(t.p,null,"If you're on a mac, there is an ",o.default.createElement(t.code,null,"emacs")," pre-installed, but it's like 10 years\nout of date and only works in the terminal. It's good for one thing:"),"\n",o.default.createElement(t.pre,null,o.default.createElement(t.code,{className:"language-shell"},"# haha, good luck figuring out how to close emacs\nemacs -q --no-splash -f tetris\n")),"\n",o.default.createElement(t.p,null,"Tetris? Remember, you can rebind any keystroke to run your own code, and emacs\nwill do any song and dance you're clever/patient enough to write. Web browsers\nwere originally just for viewing documents, too."),"\n",o.default.createElement(t.p,null,"For your non-tetris needs, you'll want to do one of these"),"\n",o.default.createElement(t.pre,null,o.default.createElement(t.code,{className:"language-shell"},"## good, but ought to be better\nbrew install emacs\n\n## much better, unless connecting to your running emacs from the terminal is important to you\n## (and if it is, you probably don't need introductory notes?)\nbrew tap railwaycat/emacsmacport\nbrew install emacs-mac\n")),"\n",o.default.createElement(t.p,null,'Why is the normal emacs not the best choice for mac? Because the Free Software\nFoundation people are assholes about everything but linux. Sorry, "GNU/linux".\nSo some guy forked emacs so he could add e.g. native OSX smooth scrolling and\nshit.'),"\n",o.default.createElement(t.h3,{id:"install-a-starter-kit",style:{position:"relative"}},o.default.createElement(t.a,{href:"#install-a-starter-kit","aria-label":"install a starter kit permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Install a starter kit"),"\n",o.default.createElement(t.p,null,"These have gotten popular these days. Basically, these are community-maintained\nconfigurations on top of emacs. They add in useful third-party libraries (in\nsome cases, so useful they have become de facto standards), update the styling\nso emacs looks like it's from the present, instead of the mid-90s, and usually\noffer a bunch of variables you can tweak to easily toggle features and stuff.\nThey're generally intended to be a more powerful and beautiful \"batteries\nincluded\" starting point for people. To install a starter kit, just clone the\nproject repository to ",o.default.createElement(t.code,null,"~/.emacs.d"),"; when you next start emacs, it will\nautomatically load that code."),"\n",o.default.createElement(t.h4,{id:"if-you-like-piña-coladas-and-getting-stuck-in-a-vim-session",style:{position:"relative"}},o.default.createElement(t.a,{href:"#if-you-like-pi%C3%B1a-coladas-and-getting-stuck-in-a-vim-session","aria-label":"if you like piña coladas and getting stuck in a vim session permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"If you like piña coladas, and getting stuck in a vim session"),"\n",o.default.createElement(t.p,null,"My favorite is ",o.default.createElement(t.a,{href:"https://github.com/doomemacs/doomemacs"},"doom emacs"),". It's quite possibly the most\npopular, with excellent documentation and community. Doom is written by and for people who like vim's\ncommand language (which is an insanely good fit for emacs' keybinding model,\nactually), but you don't need to use it in a vimmy way. Most people do, because\nit's insanely good like that, but you do you. Doom has a wonderful system\nof mnemonic commands that you access via a universal prefix key (inspired by ",o.default.createElement(t.a,{href:"https://github.com/syl20bnr/spacemacs"},"spacemacs"),", which is also quite good), which is the\nspace bar if you use vim keybindings and something else if you don't. Even if you choose\nnot to use vim bindings at all, I'd recommend doom: the out-of-the-box experience is miles\nbetter than stock emacs, it's well-organized and documented, and Henrik's hand-rolled,\nnix-inspired package management system absolutely shines if you ever want to keep things\nin sync between a personal and work computer."),"\n",o.default.createElement(t.h4,{id:"if-you-want-something-more-traditionally-emacsy-because-you-dont-give-a-fuck-about-vim",style:{position:"relative"}},o.default.createElement(t.a,{href:"#if-you-want-something-more-traditionally-emacsy-because-you-dont-give-a-fuck-about-vim","aria-label":"if you want something more traditionally emacsy because you dont give a fuck about vim permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"If you want something more traditionally emacsy, because you don't give a fuck about vim"),"\n",o.default.createElement(t.p,null,"A venerable starter kit that's a bit more mainline emacs is\n",o.default.createElement(t.a,{href:"https://github.com/bbatsov/prelude"},"Prelude"),". I haven't used it, so I can't comment on it\nmuch, but I've heard very good things, and its primary maintainer is pretty legit."),"\n",o.default.createElement(t.h4,{id:"if-you-want-to-be-fancy",style:{position:"relative"}},o.default.createElement(t.a,{href:"#if-you-want-to-be-fancy","aria-label":"if you want to be fancy permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"If you want to be FANCY"),"\n",o.default.createElement(t.p,null,"A new one is ",o.default.createElement(t.a,{href:"https://github.com/seagle0128/.emacs.d"},"Centaur"),". Centaur is very\npretty and into normal modern UI stuff like file trees with icons and tabs and\nstuff."),"\n",o.default.createElement(t.p,null,"Oh yeah, emacs doesn't really even have decent tab support? At the time of\nwriting, in the year of our lord 2019, it's only a first-class UI feature in the\ncutting edge versions and hasn't even made it to a stable release. Centaur tabs\nare clever, but a hack. I dunno, y'all, nothing's perfect."),"\n",o.default.createElement(t.p,null,"Cool, you have a modern version of emacs, and now it looks adequate. Let's get\noriented."),"\n",o.default.createElement(t.h3,{id:"a-quick-tour-of-essential-emacs-keybindings",style:{position:"relative"}},o.default.createElement(t.a,{href:"#a-quick-tour-of-essential-emacs-keybindings","aria-label":"a quick tour of essential emacs keybindings permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"A quick tour of essential emacs keybindings"),"\n",o.default.createElement(t.p,null,"You can remap any key in any mode, but the defaults are around until and unless\nyou change them, so they're worth knowing. I'm assuming you didn't install\nspacemacs in vim mode; if you did, a few parts of this won't generally apply."),"\n",o.default.createElement(t.p,null,"By convention, emacs documents keystrokes (in all of its documentation and when\nreporting what keys a function is bound to) a certain way. I've already used it\nabove. Here's a more complicated keybinding:"),"\n",o.default.createElement(t.pre,null,o.default.createElement(t.code,null,"C-x c\n")),"\n",o.default.createElement(t.p,null,'This means "hold control and type x; then type c". You never hit control except\nin combination with other keys, so the "c" character is unambiguous in both\nspots there. In keybinding notation, dashes mean "hit these two keys together"\nand spaces mean "after typing key X, release the keys and then type key Y".'),"\n",o.default.createElement(t.p,null,"Two modifier keys are king in emacs: control, which is the control key, and\nmeta, which is the alt key. It's weird, but emacs literally predates the alt key\nbeing standard. Meta is ",o.default.createElement(t.code,null,"M-[something]")," in keybinding notation."),"\n",o.default.createElement(t.p,null,"If you're a hipster like me, you might switch things up so that the mac command\nkey is meta instead of alt. Emacs is what you make it."),"\n",o.default.createElement(t.h4,{id:"first-command-to-learn-m-x-lets-you-run-commands-by-name",style:{position:"relative"}},o.default.createElement(t.a,{href:"#first-command-to-learn-m-x-lets-you-run-commands-by-name","aria-label":"first command to learn m x lets you run commands by name permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"First command to learn: ",o.default.createElement(t.code,null,"M-x")," lets you run commands by name"),"\n",o.default.createElement(t.p,null,"A decent starter configuration will give you a nice fuzzy search interface when\nyou hit ",o.default.createElement(t.code,null,"M-x"),". Start typing, and when the command you want comes up in the\nresults, you can use the arrow keys and enter to execute that command. Don't\nremember the keybinding for some functionality? Hit ",o.default.createElement(t.code,null,"M-x")," and start typing its\nname. Since keyboard space is finite, some commands can only be run like this.\nFor example, ",o.default.createElement(t.code,null,"M-x snake")," starts a game of snake, and ",o.default.createElement(t.code,null,"M-x doctor")," starts a\npsychotherapy session with everyone's favorite 1960s chatbot ELIZA."),"\n",o.default.createElement(t.h4,{id:"first-commands-to-learn-what-to-do-when-you-panic",style:{position:"relative"}},o.default.createElement(t.a,{href:"#first-commands-to-learn-what-to-do-when-you-panic","aria-label":"first commands to learn what to do when you panic permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"First commands to learn: what to do when you panic"),"\n",o.default.createElement(t.p,null,o.default.createElement(t.code,null,"C-x C-c")," closes the program. It's good to know, especially if you run it in a\nterminal."),"\n",o.default.createElement(t.p,null,"Within a session, if emacs freezes, or starts acting weird, or you mistype and\nfind yourself halfway into the wrong key sequence, start spamming ",o.default.createElement(t.code,null,"C-g")," to\ncancel out of whatever the current thing is. The downside to letting people run\ntheir own code is that sometimes they write dumb code and have stuff like\ninfinite loops. In cases like this, ",o.default.createElement(t.code,null,"C-g")," is your friend. You can also spam the\nescape key: on the rare occasion ",o.default.createElement(t.code,null,"C-g")," doesn't work, three escapes usually will."),"\n",o.default.createElement(t.h4,{id:"theres-a-method-to-the-madness",style:{position:"relative"}},o.default.createElement(t.a,{href:"#theres-a-method-to-the-madness","aria-label":"theres a method to the madness permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"There's a method to the madness"),"\n",o.default.createElement(t.p,null,"Really quick commands you will do while you type code/prose/emails/whatever are\nbound to control [something] or meta [something], so you can just bust them out\nquickly. Commands that are common but that you're less likely to use in quick\nsuccession, like saving, managing your windows, quitting emacs, etc, are under\nthe ",o.default.createElement(t.code,null,"C-x"),' prefix (the "x" is for "execute command": Emacs tries to make stuff\nmnemonic). Commands that are less common than that (or when you remember the\nname but not the keybinding), you can type ',o.default.createElement(t.code,null,"M-x"),' and find them by name. The\nsimilarity of the two "execute command" keybindings, ',o.default.createElement(t.code,null,"C-x")," and ",o.default.createElement(t.code,null,"M-x,")," is not a\ncoincidence. Mnemonic, remember?"),"\n",o.default.createElement(t.p,null,"That's a decent intro to the standardish sort-of-hierarchy for what different\nmodifier keys mean with the same key. ",o.default.createElement(t.code,null,"C-f")," goes forwards one character; ",o.default.createElement(t.code,null,"M-f"),"\ngoes forwards one word; ",o.default.createElement(t.code,null,"C-M-f")," goes forward one semantic unit (paired quotes or\nbraces, a code block, or whatever: different language modes can define what a\nsemantic unit is, and emacs has some more-or-less sensible global defaults).\nWhen \"same thing, but with a wider scope\" doesn't make sense, sometimes control\nand meta do opposite versions of the same thing. I don't want to bog you down\nwith examples, though: you can get by for a while using arrow keys, the mouse,\nand a small handful of memorized commands."),"\n",o.default.createElement(t.p,null,"The file menu is a nice way to find commands at first, too, though you'll\nprobably leave it behind as you internalize a more keyboard-driven workflow."),"\n",o.default.createElement(t.h3,{id:"what-is-a-mode-even",style:{position:"relative"}},o.default.createElement(t.a,{href:"#what-is-a-mode-even","aria-label":"what is a mode even permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"what is a mode, even"),"\n",o.default.createElement(t.p,null,"Modes are how emacs lets you apply or remove related configurations and\nkeybindings en masse. Functions that manipulate ruby code only make sense if\nyou're editing a ruby file; so those keybindings only apply when ",o.default.createElement(t.code,null,"ruby-mode")," is\nactive. ",o.default.createElement(t.code,null,"ruby-mode")," is a ",o.default.createElement(t.em,null,"major")," mode."),"\n",o.default.createElement(t.p,null,"Every buffer has one (1) major mode. This says what kind of thing that buffer\nis. Is it a file of some programming language? Each programming language has its\nown major mode (sometimes you even have a couple options, because open source).\nIs the buffer an interactive feature, like a game of tetris or a git dashboard?\nIs it some elisp function's documentation? That's the major mode. You can use\n",o.default.createElement(t.code,null,"M-x")," to change the major mode (they're just functions, under the hood), and\ninteract with the buffer contents in a different way, but you almost never have\nto."),"\n",o.default.createElement(t.p,null,"You can only have one major mode per buffer, but you can have as many minor\nmodes as you want. Minor modes tend to wrap a few related functions and settings\ninto some feature, so you can easily toggle the feature by (de)activating the\nminor mode. Autocomplete is a minor mode. Spell-check is a minor mode.\n",o.default.createElement(t.a,{href:"https://elpa.gnu.org/packages/rainbow-mode.html"},"rainbow-mode")," is a minor mode,\nand makes writing CSS so much nicer. A ",o.default.createElement(t.a,{href:"https://github.com/TeMPOraL/nyan-mode"},"nyan cat status\nbar")," to tell you how far into a buffer\nyou are? Minor mode. Most features are implemented as minor modes."),"\n",o.default.createElement(t.h3,{id:"one-of-the-killer-apps-org-mode",style:{position:"relative"}},o.default.createElement(t.a,{href:"#one-of-the-killer-apps-org-mode","aria-label":"one of the killer apps org mode permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"[one of] the killer app[s]: org-mode"),"\n",o.default.createElement(t.p,null,o.default.createElement(t.code,null,"org-mode")," is sort of like markdown on steroids. You can rearrange the order and\nlevel of headings interactively on the fly; edit code snippets as if they were\nactual files, with full language support; edit tables like a spreadsheet; export\nyour notes to pdf, html, LaTeX, github-flavored markdown (although github parses\n",o.default.createElement(t.code,null,".org")," files just like it does ",o.default.createElement(t.code,null,".md")," ones), or a reveal.js slideshow; and so, so\nmuch more. I wrote this page as some quick-and-dirty notes in ",o.default.createElement(t.code,null,"org-mode"),"\n(seriously: if you replace ",o.default.createElement(t.code,null,"index.html")," with ",o.default.createElement(t.code,null,"index.org"),", you can see the raw\nsource). ",o.default.createElement(t.code,null,"org-mode")," started out life as a third-party package for emacs, but it\nis so good and became so popular that it's included with emacs now."),"\n",o.default.createElement(t.p,null,"The basics (slightly different markdown with magic table formatting and built-in\ntodo list support!) are simple to learn and legitimately powerful on their own;\nbut its feature set is so deep, you can spend years learning it and still not\nknow everything. Even if you never use emacs for anything else, ",o.default.createElement(t.code,null,"org-mode")," is\nworth it."),"\n",o.default.createElement(t.p,null,"Honest-to-god: take 30ish minutes of your life (you don't need to watch the Q\nand A for pete's sake) and watch this presentation that Carsten Dominik, the\nGerman astronomer who authored org-mode, gave at google:"),"\n",o.default.createElement("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/oJTwQvgfgMM",frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}))}t.default=function(e){void 0===e&&(e={});const{wrapper:t}=Object.assign({},(0,a.useMDXComponents)(),e.components);return t?o.default.createElement(t,e,o.default.createElement(i,e)):i(e)}},2944:function(e,t,n){"use strict";var r=n(4994);t.__esModule=!0,t.default=void 0;var a=n(2793),o=r(n(6540));function i(e){const t=Object.assign({p:"p",a:"a",em:"em",code:"code",h2:"h2",div:"div",pre:"pre",ol:"ol",li:"li",img:"img",ul:"ul"},(0,a.useMDXComponents)(),e.components);return o.default.createElement(o.default.Fragment,null,o.default.createElement(t.p,null,"I've been reading ",o.default.createElement(t.a,{href:"http://pages.cs.wisc.edu/~remzi/OSTEP"},"Operating Systems: Three Easy\nPieces"),". I highly recommend the book if\nyou're cool fiddling with C a bit. Actually, scratch that: I recommend the book\nif you ever write code that runs on a server or any other linux/osx environment,\n",o.default.createElement(t.em,null,"especially")," if you feel a little out of your depth with C. The code examples\nare not that intimidating, even if you don't know from typecasting or a pointer\n(okay, learning the difference between ",o.default.createElement(t.code,null,"foo"),", ",o.default.createElement(t.code,null,"*foo")," and ",o.default.createElement(t.code,null,"&foo")," is useful, but\nnot knowing it doesn't prevent you from getting the gist of the code samples),\nand getting a deeper understanding of the environment your code works in will\nmake a lot of known unknowns come into a bit more focus. Honest."),"\n",o.default.createElement(t.p,null,"The first of the three parts was memory virtualization: that is, how computing\ntime and resources get divvied up amongst processes. There was some fascinating\nstuff in there: the API for forking a new process, for instance, is weirder and\ncooler than I expected, and learning the topography of the boundary between the\nOS and application code (such as ",o.default.createElement(t.code,null,"ls")," or ",o.default.createElement(t.code,null,"Google Chrome.app"),") is rad. And then\nthere are parts that are totally internal, though vital, to the kernel. Nothing\nagainst free space management, segmentation, or the five whole chapters on\nmemory paging, but I'm just not as interested in the kernel's implementation as\nits interface."),"\n",o.default.createElement(t.p,null,"I kept wondering if I would be better off just jumping straight to concurrency,\nbecause that's what I was really pumped to learn. Would I be missing out on some\nlogically necessary information if I skipped them?? (Nope.) Learn from my\nmistake and jump to the shit you find interesting, because someday you're going\nto die. So: ",o.default.createElement(t.a,{href:"http://pages.cs.wisc.edu/~remzi/OSTEP/threads-locks.pdf"},"locks"),"!"),"\n",o.default.createElement(t.h2,{id:"i-dont-need-no-stinkin-lock",style:{position:"relative"}},o.default.createElement(t.a,{href:"#i-dont-need-no-stinkin-lock","aria-label":"i dont need no stinkin lock permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"I Don't Need No Stinkin' Lock"),"\n",o.default.createElement(t.p,null,"Locks are what keep multiple threads, running in parallel, from fucking each\nother up when dealing with a shared bit of state. There is almost no operation\ntoo small for these little bastards to mess up, given the chance. Take this:"),"\n",o.default.createElement(t.pre,null,o.default.createElement(t.code,{className:"language-c"},"static volatile int counter = 0;\n\nvoid *mythread(void *arg) {\n  int i;\n  for (i = 0; i < 100000; i++) {\n    counter++;\n  }\n  return NULL;\n}\n")),"\n",o.default.createElement(t.p,null,"Because I had to look it up: ",o.default.createElement(t.code,null,"volatile")," is a keyword that prevents certain\ncompiler optimizations from happening, specifically for things like this shared\ncounter."),"\n",o.default.createElement(t.p,null,"So, there's a shared counter and there's a procedure that uses it suitable for\ngiving to a couple threads. I extracted all the code dealing with that shared\nbit of state:"),"\n",o.default.createElement(t.pre,null,o.default.createElement(t.code,{className:"language-c"},"counter++\n")),"\n",o.default.createElement(t.p,null,"That's it! A single line, with a single unary operator. How unsafe can THAT be?\nLet's add some logging and fire up a couple threads:"),"\n",o.default.createElement(t.pre,null,o.default.createElement(t.code,{className:"language-c"},'#include <stdio.h>\n#include <pthread.h>\n\nstatic volatile int counter = 0;\n\nvoid *mythread(void *arg) {\n  printf("%s: begin\\n", (char *) arg);\n  int i;\n  for (i = 0; i < 100000; i++) {\n    counter++;\n  }\n  printf("%s: end\\n", (char *) arg);\n  return NULL;\n}\n\nint main(int argc, char *argv[]) {\n  pthread_t p1, p2;\n  printf("main: begin (counter = %d)\\n", counter);\n\n  pthread_create(&p1, NULL, mythread, "A");\n  pthread_create(&p2, NULL, mythread, "B");\n\n  // wait for them fucks to finish\n  pthread_join(p1, NULL);\n  pthread_join(p2, NULL);\n\n  printf("main: done with both (counter = %d)", counter);\n  return 0;\n}\n')),"\n",o.default.createElement(t.p,null,"So. ",o.default.createElement(t.code,null,"counter")," starts at 0, and then two threads each run ",o.default.createElement(t.code,null,"counter++")," 100,000\ntimes apiece. That makes 200,000, right?"),"\n",o.default.createElement(t.pre,null,o.default.createElement(t.code,null,"main: begin (counter = 0)\nA: begin\nB: begin\nB: end\nA: end\nmain: done with both (counter = 100745)\n")),"\n",o.default.createElement(t.p,null,"INTERESTING."),"\n",o.default.createElement(t.p,null,"The trouble is that ",o.default.createElement(t.code,null,"counter++")," is ",o.default.createElement(t.em,null,"three")," operations, not one:"),"\n",o.default.createElement(t.ol,null,"\n",o.default.createElement(t.li,null,"Get the value of ",o.default.createElement(t.code,null,"counter")," out of whatever register it's stored in"),"\n",o.default.createElement(t.li,null,"Increment that value by one"),"\n",o.default.createElement(t.li,null,"Store the new value in that register"),"\n"),"\n",o.default.createElement(t.p,null,"So ",o.default.createElement(t.code,null,"p2")," reads the value of ",o.default.createElement(t.code,null,"counter"),"'s register at, e.g., 17; then it increments\nthe value to 18; at the same time as ",o.default.createElement(t.code,null,"p2")," is doing that incrementing, one core\nover, ",o.default.createElement(t.code,null,"p1")," reads that same register, which is still 17. In parallel, each adds\none to the value it read and stores that new value in the register, and lo: 17 +\n1 + 1 = 18."),"\n",o.default.createElement(t.h2,{id:"lock-that-shit-down",style:{position:"relative"}},o.default.createElement(t.a,{href:"#lock-that-shit-down","aria-label":"lock that shit down permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Lock That Shit Down"),"\n",o.default.createElement(t.p,null,"So let's suppose you give a shit about the integrity of basic arithmetic in\nyour code. The above nonsense won't do at all. I ran it eight times (you can,\ntoo! Just stick the code above in a file (say, ",o.default.createElement(t.code,null,"bad_math.c"),"), compile it with\nsomething like ",o.default.createElement(t.code,null,"gcc -o bad_math bad_math.c"),", and go hog wild), with the following\nresults:"),"\n",o.default.createElement(t.pre,null,o.default.createElement(t.code,null,"ABAB 127499\nABAB 144926\nABAB 116942\nABBA 102988\nABBA 100745\nABAB 114188\nAABB 200000\nABBA 104161\n\navg. 126431\n")),"\n",o.default.createElement(t.p,null,"I'm honestly pretty shocked that one run actually got 200,000. (As a sidenote,\nit looks like the ",o.default.createElement(t.code,null,"ABAB")," pattern of thread starts/finishes performs better than\n",o.default.createElement(t.code,null,"ABBA"),", with respective averages of 125888 and 102631. ",o.default.createElement(t.code,null,"AABB"),", of course, will\nalways get 200,000 (as would ",o.default.createElement(t.code,null,"BBAA"),", but ",o.default.createElement(t.code,null,"A")," gets kicked off first by\nsynchronous code).)"),"\n",o.default.createElement(t.p,null,"So let's lock this shit down. ",o.default.createElement(t.code,null,"main")," doesn't need to change at all: we just need\nto initialize a commonly available lock, and use it in the ",o.default.createElement(t.code,null,"mythread")," procedure\nto ensure that only one thread at a time can access the critical section (that's\nthe term, coined by Dijkstra, for a section of code dealing with shared memory;\nhere, ",o.default.createElement(t.code,null,"counter++"),"). Here's the most vanilla implementation for a POSIX system:"),"\n",o.default.createElement(t.pre,null,o.default.createElement(t.code,{className:"language-c"},'static volatile int counter = 0;\npthread_mutex_t lock = PTHREAD_MUTEX_INITIALIZER;\n\nvoid *mythread(void *arg) {\n  printf("%s: begin\\n", (char *) arg);\n  int i;\n  for (i = 0; i < 100000; i++) {\n    pthread_mutex_lock(&lock);\n    counter += 1;\n    pthread_mutex_unlock(&lock);\n  }\n  printf("%s: end\\n", (char *) arg);\n  return NULL;\n}\n')),"\n",o.default.createElement(t.p,null,"No need for extra headers; as you probably gathered from the naming, that\nlocking mechanism is part of ",o.default.createElement(t.code,null,"pthread.h"),". When any thread calls\n",o.default.createElement(t.code,null,"pthread_mutex_lock(&foo)")," for a lock ",o.default.createElement(t.code,null,"foo"),", one of two things happens: if no\none else has the lock, it runs the critical section; or, if another thread has\nthe lock, it waits for that thread to call ",o.default.createElement(t.code,null,"pthread_mutex_unlock(&foo)")," and THEN\ndoes its thing."),"\n",o.default.createElement(t.p,null,"As you might expect, this version gets 200,000 every time (but don't believe\nme...). So what's going on under the hood?"),"\n",o.default.createElement(t.h2,{id:"under-the-hood",style:{position:"relative"}},o.default.createElement(t.a,{href:"#under-the-hood","aria-label":"under the hood permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Under The Hood"),"\n",o.default.createElement(t.p,null,"A huge disclaimer before we start playing around with implementing our own\nlocks: this shit does not work. Checking some value to determine if a lock is in\nuse and updating that value to secure that lock takes multiple operations, and\nat the application level, there's no way to ensure that that happens atomically.\nIn a real lock, the hardware exposes a prebundled set of operations that can be\ncalled from a C API."),"\n",o.default.createElement(t.p,null,"Depending on your machine, those prebundled operations might look, if you\nsquint, a little something like this:"),"\n",o.default.createElement(t.pre,null,o.default.createElement(t.code,{className:"language-c"},"typedef struct __lock_t {\n  int flag;\n} lock_t;\n\nvoid init(lock_t *lock) {\n  // 0 => lock is available, 1 => lock is held\n  lock->flag = 0;\n}\n\nint compare_and_swap(int *old_ptr, int expected, int new) {\n  int actual = *old_ptr;\n  if (actual == expected)\n    *old_ptr = new;\n  return actual;\n}\n\nvoid lock(lock_t *lock) {\n  /* while (compare_and_swap(&lock->flag, 0, 1) == 1) */\n  while (compare_and_swap(&lock->flag, 0, 1) == 1)\n    ; // do butt-ass nothing until that lock gets released\n}\n\nvoid unlock(lock_t *lock) {\n  lock->flag = 0;\n}\n")),"\n",o.default.createElement(t.p,null,"This is a shitty lock for a few reasons:"),"\n",o.default.createElement(t.ol,null,"\n",o.default.createElement(t.li,null,"If the lock is taken, the thread just wastes CPU cycles until the CPU\nscheduler decides to let the locking thread finish its work"),"\n",o.default.createElement(t.li,null,'It\'s possible to have a thread that "starves": i.e. never, ever gets the lock'),"\n",o.default.createElement(t.li,null,"It does not work."),"\n"),"\n",o.default.createElement(t.p,null,"But ",o.default.createElement(t.em,null,"how badly")," does it not work?"),"\n",o.default.createElement(t.pre,null,o.default.createElement(t.code,null,"ABAB 156000\nABAB 103114\nABAB 129168\nABBA 101519\nABBA 114152\nABAB 103095\nABBA 100576\nABAB 101809\n\navg. 113679\n")),"\n",o.default.createElement(t.p,null,"So, I mean, that's a worse average than no lock at all, but there was that fluky\n200,000 in there. Without the outlier, it would look a lot wors-"),"\n",o.default.createElement(t.pre,null,o.default.createElement(t.code,null,"avg. 115921\n")),"\n",o.default.createElement(t.p,null,"Oh. From an analytical perspective, there are more steps in ",o.default.createElement(t.code,null,"compare_and_swap"),"\nthan in ",o.default.createElement(t.code,null,"counter++"),', so there are more places for a malicious CPU scheduler to\nfuck with things; from a statistical perspective, we\'re nowhere near solid\nground for declaring a winner in the contest of "no locks vs useless locks";\nfrom an engineering perspective, please just use ',o.default.createElement(t.code,null,"pthread_mutex_t")," locks."),"\n",o.default.createElement(t.p,null,"There is a glimmer of hope in the book before we totally close the book on\nsoftware locking:"),"\n",o.default.createElement(t.p,null,o.default.createElement(t.img,{src:"../../better_lock.png",alt:"A lock written from x86 assembly instructions"})),"\n",o.default.createElement(t.p,null,"Seems easy enough. Take the busted lock, swap in the new ",o.default.createElement(t.code,null,"CompareAndSwap"),"\nimplementation, however the fuck that works (looks like its evaluating literal\nstrings as assembly language, but I'm in way over my head here), and give that a\ntest run:"),"\n",o.default.createElement(t.pre,null,o.default.createElement(t.code,null,"ABAB 141034\nABAB 128868\nABAB 149149\nABAB 133336\nABAB 165496\nABAB 130632\nABAB 163608\nABAB 163309\n\navg. 146929\n")),"\n",o.default.createElement(t.p,null,"Not half bad*!"),"\n",o.default.createElement(t.p,null,"* Almost exactly half bad"),"\n",o.default.createElement(t.p,null,"That's all I got rght now on locks."),"\n",o.default.createElement(t.h2,{id:"a-brief-aside-about-c",style:{position:"relative"}},o.default.createElement(t.a,{href:"#a-brief-aside-about-c","aria-label":"a brief aside about c permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"A Brief Aside About C"),"\n",o.default.createElement(t.p,null,"Working in C feels like working with a database to me: the fundamental way to\ndefine the shape of your data is a struct: a behaviorless mapping of typed data\nfields to names, just like a table in a relational database."),"\n",o.default.createElement(t.p,null,"Now, it's more complicated than that, of course, and C is a good bit more\nexpressive than SQL. For instance, you could use the convention of pointing\ncertain fields at integers that are pointers to the memory address of functions\nand use them to call those functions (I believe that's how C++ classes work\nunder the hood, but don't quote me on that as an authority)."),"\n",o.default.createElement(t.h2,{id:"stuff-in-this-chapter-that-i-left-out",style:{position:"relative"}},o.default.createElement(t.a,{href:"#stuff-in-this-chapter-that-i-left-out","aria-label":"stuff in this chapter that i left out permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Stuff In This Chapter That I Left Out"),"\n",o.default.createElement(t.ul,null,"\n",o.default.createElement(t.li,null,'Various tradeoffs in balancing fairness and performance while maintaining\nmutual exclusion (thus, incidentally, the term "mutex")'),"\n",o.default.createElement(t.li,null,"Some interesting historical locking mechanisms"),"\n",o.default.createElement(t.li,null,"Some background on what the hardware does and doesn't do, and what that means\nfor the OS"),"\n",o.default.createElement(t.li,null,"A cool-ass locking implementation from the linux kernel that tracks both the\nstatus of the lock and the size of its queue with a single integer"),"\n"))}t.default=function(e){void 0===e&&(e={});const{wrapper:t}=Object.assign({},(0,a.useMDXComponents)(),e.components);return t?o.default.createElement(t,e,o.default.createElement(i,e)):i(e)}},5865:function(e,t,n){"use strict";var r=n(4994);t.__esModule=!0,t.default=void 0;var a=n(2793),o=r(n(6540)),i=r(n(2801)),l=r(n(5022)),u=r(n(996));function c(e){const t=Object.assign({p:"p",ol:"ol",li:"li",h2:"h2",a:"a",div:"div",code:"code",pre:"pre",em:"em"},(0,a.useMDXComponents)(),e.components);return o.default.createElement(o.default.Fragment,null,o.default.createElement(i.default),"\n",o.default.createElement(t.p,null,"Play around with it a little—it's kind of cool, right? I can never decide if I prefer the\nsparsely- and densely-populated version."),"\n",o.default.createElement(t.p,null,"It's also sentimental for me. Let's go back in time a little: in 2013, I was earning an\nextremely meager living running an after-school art program at a local elementary school.\nMy original dream of a tenure-track professorship in the humanities had foundered on the\nsharp realities of the great recession and the increasingly exploitative academic job\nmarket for teachers of every subject that lacked a corresponding industry to provide\nnegotiating leverage. I had no clue what might be a sustainable long-term career, but I\nknew that status quo wasn't it; and though I love children, after spending so many of my\nwaking hours dealing with 10-year-olds and their  10-year-old thoughts, I could feel the\nsharp edges of my brain beginning to dull [^1]. I needed to find something I could do with\nmy brain that would be"),"\n",o.default.createElement(t.ol,null,"\n",o.default.createElement(t.li,null,"difficult enough to be interesting, and"),"\n",o.default.createElement(t.li,null,"remunerative;"),"\n"),"\n",o.default.createElement(t.p,null,"and by and by my search lead me to enroll in CS101 at a local community college. I didn't enroll with the thought of becoming a programmer per se—I just thought it would help if I ended up doing any kind of work crunching numbers. But I loved it, I was good at it, and it really did transform my life. But this isn't about all that: this is about an Extremely Cool demo the teacher ran one day in class."),"\n",o.default.createElement(t.h2,{id:"the-setup",style:{position:"relative"}},o.default.createElement(t.a,{href:"#the-setup","aria-label":"the setup permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"The setup"),"\n",o.default.createElement(t.p,null,"The teacher walked us through a very simple C++ program. It imported some graphics library\nheaders, the details of which were glossed over (it was a 101 course, after all), and then\ndefined a very simple initial state:"),"\n",o.default.createElement(t.ol,null,"\n",o.default.createElement(t.li,null,"a small cartesian grid"),"\n",o.default.createElement(t.li,null,"an array of three points on that grid corresponding to the vertices of a triangle, each defined as a two-element array of ",o.default.createElement(t.code,null,"float"),"s"),"\n",o.default.createElement(t.li,null,"another point near the middle of the other three, assigned to a variable like ",o.default.createElement(t.code,null,"currentPoint")),"\n"),"\n",o.default.createElement(t.p,null,"If we were to stop here and only render the initial state, it would look something like this:"),"\n",o.default.createElement(l.default),"\n",o.default.createElement(t.p,null,"Not very exciting yet, I admit."),"\n",o.default.createElement(t.h2,{id:"complex-behaviors-can-emerge-from-simple-rules-or-lets-hang-some-mathy-flesh-on-those-bones",style:{position:"relative"}},o.default.createElement(t.a,{href:"#complex-behaviors-can-emerge-from-simple-rules-or-lets-hang-some-mathy-flesh-on-those-bones","aria-label":"complex behaviors can emerge from simple rules or lets hang some mathy flesh on those bones permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Complex behaviors can emerge from simple rules, or: let's hang some mathy flesh on those bones"),"\n",o.default.createElement(t.p,null,"To expand on this rather spartan, boring starting point, there was a single ",o.default.createElement(t.code,null,"for")," loop, which did the following steps a few thousand times:"),"\n",o.default.createElement(t.ol,null,"\n",o.default.createElement(t.li,null,"select a random element from the array of vertices"),"\n",o.default.createElement(t.li,null,"calculate the coordinates of the point halfway between ",o.default.createElement(t.code,null,"currentPoint")," and that vertex"),"\n",o.default.createElement(t.li,null,"reassign ",o.default.createElement(t.code,null,"currentPoint")," to that new point"),"\n",o.default.createElement(t.li,null,"draw the new ",o.default.createElement(t.code,null,"currentPoint")),"\n"),"\n",o.default.createElement(t.p,null,"Very simple stuff, maybe 15 lines of code total. A well-read observer may recognize this\nas a simple variant of ",o.default.createElement(t.a,{href:"https://en.wikipedia.org/wiki/Chaos_game"},"the chaos game"),"\nalgorithm; at the time, I didn't recognize shit. But I am the child of a math teacher and\nan older millenial who has been playing Zelda games since the delirious days of Clinton vs\nDole vs Perot, short pants, and gold NES cartridges: the teacher compiled the script, ran\nthe binary, and it sparked joy:"),"\n",o.default.createElement(u.default),"\n",o.default.createElement(t.h2,{id:"but-is-it-web-scale",style:{position:"relative"}},o.default.createElement(t.a,{href:"#but-is-it-web-scale","aria-label":"but is it web scale permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"But is it Web Scale?"),"\n",o.default.createElement(t.p,null,"So, we have the core algorithm for drawing a cool little fractal triforce. Now to stick in in a website!"),"\n",o.default.createElement(t.p,null,"I made a few artistic choices:"),"\n",o.default.createElement(t.ol,null,"\n",o.default.createElement(t.li,null,"inverting the triangle makes it look like it's pointing down at the content below in a nice way"),"\n",o.default.createElement(t.li,null,"naively adding points fills in the triangle with monotonically increasing density, the visual effect of which has sharply diminishing returns; pushing the points into a FIFO queue with a max size preserves the negative space it needs to look sparse, dynamic, and alive"),"\n",o.default.createElement(t.li,null,"I wanted users to be able to  interactively adjust the number of dots in the visualization: it leans into the dynamic nature of the web as a medium; it allows folks to experience both the frenetic movement and staticky geometric ambiguity of a sparsely-populated queue of points and the fractal beauty of a denser one; and it shows potential employers that I am reasonably competent at connecting user inputs to dynamic logic, which, I mean, ain't nothing."),"\n",o.default.createElement(t.li,null,"The gold color (",o.default.createElement(t.code,null,"#aa9668"),", for those of you who are curious but don't actually want to pin down an ephemeral svg ",o.default.createElement(t.code,null,"<circle>")," in your browser's devtools) goes nicely with the rest of the site"),"\n"),"\n",o.default.createElement(t.p,null,"The last order of business, then, was to actually render those dots. This site is built on\ntop of a react-based static site generator; while there is a lot to like about react, it's\nnot a great choice for making performant little mathy visualizations. I decided to use d3\nfor that. However, d3 and react both want to control the rendering of your html. How to\nmake them play nicely together? Like this:"),"\n",o.default.createElement(t.pre,null,o.default.createElement(t.code,{className:"language-js"},"export default function D3Wrapper({ d3RenderFn, className }) {\n  // d3 needs an actual DOM node to do its thing on, so let's give it one\n  const el = useRef(null)\n\n  // Render the d3 visualization. If the d3 visualization is already in the DOM, though,\n  // do not recreate it; this avoids duplicated element shenanigans with hot module\n  // reloading during development.\n  useEffect(() => {\n    if (!window.d3Embeds) {\n      window.d3Embeds = new Map()\n    }\n\n    if (!window.d3Embeds.get(d3RenderFn)) {\n      d3RenderFn(el.current)\n      window.d3Embeds.set(d3RenderFn, true)\n    }\n  }, [d3RenderFn])\n\n  return <div className={className} ref={el} />\n}\n")),"\n",o.default.createElement(t.p,null,"And really, that's it. A cute little bit of web-based art that makes me happy."),"\n",o.default.createElement(t.p,null,"[^1]: I should note here that this is not a fundamental fact of dealing with kids: parents and school teachers have the chance (the obligation, even) to engage more deeply with their kids, and tracking those longer-term educational goals to the kids' intellectual and emotional development provides as deep an intellectual challenge as you care to make it. Hanging out for two hours doodling on butcher paper and helping with the stultifying abolination that is second-grade homework [^2], though? I needed more."),"\n",o.default.createElement(t.p,null,"[^2]: Up until ",o.default.createElement(t.em,null,"at least")," the start of adolescence, children's intellectual and social development requires free, exploratory play, not rote drilling of skills; and their emotional and executive regulation is not strong enough to get any long-term benefit from the discipline of finishing their daily assignments. But by all means, if you want to force parents to force their kids into boring, tedious chorework, keep it coming!"))}t.default=function(e){void 0===e&&(e={});const{wrapper:t}=Object.assign({},(0,a.useMDXComponents)(),e.components);return t?o.default.createElement(t,e,o.default.createElement(c,e)):c(e)}},3200:function(e,t,n){"use strict";var r=n(4994);t.__esModule=!0,t.default=void 0;var a=n(2793),o=r(n(6540));function i(e){const t=Object.assign({p:"p",a:"a",h2:"h2",div:"div",blockquote:"blockquote",code:"code",em:"em"},(0,a.useMDXComponents)(),e.components);return o.default.createElement(o.default.Fragment,null,o.default.createElement(t.p,null,o.default.createElement(t.a,{href:"http://www.theestablishment.co/2016/09/29/the-dangerous-myth-of-media-objectivity/"},"This"),"\nis a timely and important article, and it drove me absolutely crazy. Before I\nquote anything, I think I need to do some conceptual prep work. The problem, you\nsee, is that the article suffers from a fatal fault—in calling out a false\nnotion of objectivity, it leaves unquestioned its right to be framed as\n\"objectivity\". Look, I know I might sound ridiculous, but goddamn it, ideas\nmatter. It's not so much a problem because that false objectivity is bad per se\n(though it is); it's a problem because a better alternative exists and I think\ngetting it right is really, really important."),"\n",o.default.createElement(t.h2,{id:"science-is-not-what-but-how",style:{position:"relative"}},o.default.createElement(t.a,{href:"#science-is-not-what-but-how","aria-label":"science is not what but how permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Science is not what, but how"),"\n",o.default.createElement(t.blockquote,null,"\n",o.default.createElement(t.p,null,'"The first principle is that you must not fool yourself–and you are the easiest person\nto fool."'),"\n",o.default.createElement(t.p,null,"–Richard Feynman"),"\n"),"\n",o.default.createElement(t.p,null,"Human brains have all sorts of shortcuts for finding patterns. It's our greatest talent,\nand it's what's behind the best of us. Here are some ways to conceive of various shortcuts\nfor finding patterns: jumping to a conclusion; conceptual leaps, both the creative\nparallel kind and the brilliant insight kind; optical illusions; artistic license;\nintuition; suspicions; logical fallacies; madness."),"\n",o.default.createElement(t.p,null,"Basically every social interaction we have, every use of language, is running on hardware\nthat, when you get down to it, is just doing a bunch of sloppy pattern matching[^1]. And\nwe're ridiculously good at it! It has literally taken us to ",o.default.createElement(t.a,{href:"http://joshworth.com/dev/pixelspace/pixelspace_solarsystem.html"},"the\nmoon"),". But if jumping to\nconclusions is fundamental to being an alive human, it means we're never going to not be\nwrong about some stuff. You, me, Einstein, Pedro Martinez, Aristotle, Lupita Nyong'o:\neveryone who ever has or will live is wrong about a ton of shit."),"\n",o.default.createElement(t.p,null,"This is almost all you need to acquire a deep understanding of science. The other part is\na way out: using statistics and measurements of the actual world to verify\nstuff. Human perception isn't perfect, but it's still pretty good, and the\nphysical universe makes sense. You take your flawed conceptions as a starting\npoint, and you see which ones you can try to disprove. I say \"try\", because a\nlot of times, you can't even do that: the world is full of questions that have\na single true, reality-based answer that there's no way to find out. Got to\nhope there's Wikipedia in Heaven. But sometimes you CAN check. So you do."),"\n",o.default.createElement(t.p,null,"Here's the last catch: you can't really prove anything is true, but sometimes, when the\nfacts cooperate, you can prove things false. So you try to prove everything you believe to\nbe true to be false. Occasionally, to your chagrin, you will be successful. And for\ncenturies, this has been the method of human progress: shuffling painfully towards the\ntruth by discarding convincing bullshit one piece at a time."),"\n",o.default.createElement(t.p,null,"That's the whole trick. That's how we got spaceships and vaccines. Until you go measure\nthe real world, everybody's words are just words, and, as previously discussed, we are all\nwrong about a lot of things. Shit, we didn't even need to bring up intentional lying or\nwillful ignorance: even if everyone is trying their very best, people alone can't be\nrelied on for truth. No folk tradition managed to invent antibiotics, you know?"),"\n",o.default.createElement(t.h2,{id:"what-that-article-means-when-it-says-objectivity",style:{position:"relative"}},o.default.createElement(t.a,{href:"#what-that-article-means-when-it-says-objectivity","aria-label":"what that article means when it says objectivity permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),'What that article means when it says "objectivity"'),"\n",o.default.createElement(t.p,null,'Defining "objectivity" in terms of empirical truth, the following paragraph\nbecomes absurd:'),"\n",o.default.createElement(t.blockquote,null,"\n",o.default.createElement(t.p,null,"Is it the media’s responsibility to cover groups or persons who purposefully use hateful\nand provocative speech as a means to gain attention? In what way should this coverage\nmanifest? And, perhaps most importantly—at what point are journalists obligated to\nrepudiate notions of objectivity for the sake of humanity and morality?"),"\n"),"\n",o.default.createElement(t.p,null,"Humanity and morality are, in general, best served by dilligent, unassuming\nrespect for empirical truth. Furthermore, whether a thing is true or false has\nlittle to do with whether it's good or bad[^2], and vice versa."),"\n",o.default.createElement(t.p,null,"The most frustrating part of writing this is that I haven't found a way not to\ncome down too harshly. The article is talking about the same problem I am, and\nin many ways it's doing quite a good job of it. While it doesn't properly name\nthe concept it targets, it pins it down precisely through a series of incisive\nand well-sourced takedowns of media uncritically airing people who are\ndemonstrably in the wrong:"),"\n",o.default.createElement(t.blockquote,null,"\n",o.default.createElement(t.p,null,"The Milo profile was far from the first time that an outlet has, I’d argue, favored an\nobscure notion of objectivity over the protection of human rights and civil liberties. In\nMay, USA Today ",o.default.createElement(t.a,{href:"http://www.usatoday.com/story/opinion/2016/05/02/boycott-target-american-family-association-editorials-debates/83848878/"},"printed")," an op-ed written by the president of the American Family\nAssociation (AFA), Tim Wildmon, urging readers to boycott the discount retailer Target due\nto their inclusive bathroom ",o.default.createElement(t.a,{href:"https://corporate.target.com/article/2016/04/target-stands-inclusivity#sf45842864"},"policy"),".\nUSA Today neglected to inform its readers that AFA is\n",o.default.createElement(t.a,{href:"https://www.splcenter.org/fighting-hate/extremist-files/group/american-family-association"},"an anti-LGBT hate group"),", while also providing a space for Wildmon to perpetuate the\n“bathroom predator” myth. Not only has this virulent lie been ",o.default.createElement(t.a,{href:"http://mediamatters.org/research/2016/05/05/comprehensive-guide-debunked-bathroom-predator-myth/210200"},"disproven"),", its infectious\nreach has had a documented ",o.default.createElement(t.a,{href:"http://www.advocate.com/transgender/2016/7/13/survey-shows-how-trans-bathroom-predator-myth-hurts-real-people"},"impact")," on the psychological and physical safety of the\ntransgender community."),"\n"),"\n",o.default.createElement(t.p,null,'The problem is that that "obscure notion of objectivity" is neither obscure nor,\nI would argue, objectivity. I suspect, if asked to define "media objectivity", a\nlot of Americans would sketch out a concept similar to this: an objective media\ndoes not try to shape events, it merely reports on them. I suspect FAR more\nstrongly that this is how the American media itself sees its mission. If the\npitfall to be avoided is a thumb on the scales, then you\'re at the mercy of the\nexisting terms of debate; which is at the mercy of what humans believe; which,\nc\'mon, we\'ve been over that already. Like ',o.default.createElement(t.a,{href:"https://www.gutenberg.org/files/5500/5500-h/5500-h.htm"},"400 years\nago"),' already. But for\nall the "obscure notion" shade it\'s trying to throw, the article doesn\'t\nchallenge that as the framework for judging "objectivity". And as long as that\'s\nin place, journalists either have to err on the side of not being to critical or\nthey need to get rid of "objectivity" as the primary standard. And that\'s\nhogwash.'),"\n",o.default.createElement(t.h2,{id:"why-thats-a-problem",style:{position:"relative"}},o.default.createElement(t.a,{href:"#why-thats-a-problem","aria-label":"why thats a problem permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Why that's a problem"),"\n",o.default.createElement(t.p,null,'That definition needs to be demoted to the second concern: the primary metric by which the\nmedia\'s objectivity should be measured is integrity with objective reality as best we can\nmeasure it. Often that means statistics. It means fact-checking is not a "nice-to-have",\nit is fundamental to the whole operation. Really, it means doing some fucking reporting.'),"\n",o.default.createElement(t.p,null,"The article quotes ",o.default.createElement(t.a,{href:"https://thesocietypages.org/socimages/2015/04/09/racial-bias-and-media-coverage-of-violent-crime/"},"Lisa\nWade"),",\na sociology professor at Occidental:"),"\n",o.default.createElement(t.blockquote,null,"\n",o.default.createElement(t.p,null,"“Each time we see a black person on TV who is linked with a violent crime or portrayed\nas a criminal, the neurons in our brain that link blackness with criminality fire. The\nmore often a link is triggered, the stronger it becomes. Disproportionate reporting . . .\nmake the neural links in our brain—its actual physical structure—reflect the racism\ninherent in the reporting itself.”"),"\n"),"\n",o.default.createElement(t.p,null,"The argument, which I find quite compelling, is that repeating socially-backed but\ndamaging, false, or repugnant rhetoric, ESPECIALLY uncritically, reinforces it in the\naudience's minds, corroding truth and/or the common good. But that logic seems awfully\nopen to extension: repeating this implicit notion that objective balance in a conflict is\nprimarily determined by the social force of one or another \"side\", rather than by its\nverifiable truth[^3] literally builds that link in\nreaders' minds. People use words the same way the folks around them do: for the sake of\nthe people around us, America has to step up at using them in service of truth."),"\n",o.default.createElement(t.p,null,"[^1]:"),"\n",o.default.createElement(t.p,null,"European philosophy has spent lifetimes failing to get around this fact,\nwhich is why it is so ",o.default.createElement(t.a,{href:"http://www.fullbooks.com/The-Ethics.html"},"beautiful"),"\nand so\n",o.default.createElement(t.a,{href:"https://tractatus-online.appspot.com/Tractatus/jonathan/index.html"},"tedious"),"."),"\n",o.default.createElement(t.p,null,"[^2]:"),"\n",o.default.createElement(t.p,null,"The most pernicious form this takes is \"we can't change ",o.default.createElement(t.code,null,"$THING")," because\nthat's just the way things are\". Beyond the surface-level problem of\nsquelching analysis of ",o.default.createElement(t.code,null,"$THING")," in good/bad terms because of a tautological\nassertion of its truth value, it nihilistically sweeps away any reasonable\nquestion of the upside risk of attempting to change ",o.default.createElement(t.code,null,"$THING")," ",o.default.createElement(t.em,null,"and")," it's\nalmost always wrong, historically speaking."),"\n",o.default.createElement(t.p,null,"[^3]: It is always both, of course, for we are awash in a sea of opinions."))}t.default=function(e){void 0===e&&(e={});const{wrapper:t}=Object.assign({},(0,a.useMDXComponents)(),e.components);return t?o.default.createElement(t,e,o.default.createElement(i,e)):i(e)}},2355:function(e,t,n){"use strict";var r=n(4994);t.__esModule=!0,t.default=void 0;var a=n(2793),o=r(n(6540));function i(e){const t=Object.assign({p:"p",code:"code",em:"em",h2:"h2",a:"a",div:"div",pre:"pre",ol:"ol",li:"li"},(0,a.useMDXComponents)(),e.components);return o.default.createElement(o.default.Fragment,null,o.default.createElement(t.p,null,"Suppose you want to deal with some dates while building a website. You don't want to roll your own input parsing, so you use ",o.default.createElement(t.code,null,"new Date(inputDateString)"),"; and you want to output datestrings in a format that's clear, readable[^1], and (while we're making a wish list) sorts the same both lexically and chronologically. That is: you want ",o.default.createElement(t.code,null,"YYYY-MM-DD"),". Surely ",o.default.createElement(t.em,null,"that")," is built in, right?"),"\n",o.default.createElement(t.h2,{id:"wrong",style:{position:"relative"}},o.default.createElement(t.a,{href:"#wrong","aria-label":"wrong permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"wrong"),"\n",o.default.createElement(t.p,null,"Oh. Wait, really? Ugh, fine. Just ",o.default.createElement(t.code,null,"npm install date-fns")," or ",o.default.createElement(t.code,null,"dayjs")," or ",o.default.createElement(t.code,null,"moment")," or"),"\n",o.default.createElement(t.h2,{id:"youre-seriously-going-to-make-every-user-download-a-whole-library-just-to-create-one1-common-date-format-with-no-time-zone-logic",style:{position:"relative"}},o.default.createElement(t.a,{href:"#youre-seriously-going-to-make-every-user-download-a-whole-library-just-to-create-one1-common-date-format-with-no-time-zone-logic","aria-label":"youre seriously going to make every user download a whole library just to create one1 common date format with no time zone logic permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"you're seriously going to make every user download a whole library just to create one(1) common date format with no time zone logic."),"\n",o.default.createElement(t.p,null,"FINE. Fine. No."),"\n",o.default.createElement(t.p,null,"At first, I was tempted to cast the date to a predictable, standardized format and then reach for ~good~ old-fashioned string manipulation:"),"\n",o.default.createElement(t.pre,null,o.default.createElement(t.code,{className:"language-js"},"const datestamp = date => new Date(date).toISOString().slice(0, 10)\n")),"\n",o.default.createElement(t.p,null,"But verifying the correctness of that function entails"),"\n",o.default.createElement(t.ol,null,"\n",o.default.createElement(t.li,null,"remembering/inferring/guessing that ",o.default.createElement(t.code,null,"Date.prototype.toISOString")," returns an ISO-8601-formatted date;"),"\n",o.default.createElement(t.li,null,"remembering that ISO 8601 dates start ",o.default.createElement(t.code,null,"YYYY-MM-DD"),";"),"\n",o.default.createElement(t.li,null,"remembering that the ISO 8601 format zero-pads single-digit month and day fields; and"),"\n",o.default.createElement(t.li,null,"walking through a date string counting characters on your fingers like a neanderthal."),"\n"),"\n",o.default.createElement(t.p,null,"Dear reader, you deserve better than that. You deserve a built-in ",o.default.createElement(t.code,null,"strftime"),"-style formatting utility! But since you can't have that, here's a reasonably robust, flexible pattern you can use to extract named, semantically-meaningful parts of the date you can slep into whatever template string you want:"),"\n",o.default.createElement(t.pre,null,o.default.createElement(t.code,{className:"language-js"},'const datestamp = date => {\n  const { year, month, day } = new Intl.DateTimeFormat(undefined, {\n    year: "numeric",\n    month: "2-digit",\n    day: "2-digit",\n  })\n    .formatToParts(new Date(date))\n    .filter(part => part.type !== "literal")\n    .reduce((acc, part) => {\n      acc[part.type] = part.value\n      return acc\n    }, {})\n\n  return `${year}-${month}-${day}`\n}\n')),"\n",o.default.createElement(t.p,null,"[^1]: What's more, you want people the world over to be able to unambiguously parse your output as ",o.default.createElement(t.em,null,"the same")," date, even if happens to be before the 13th day of its month."))}t.default=function(e){void 0===e&&(e={});const{wrapper:t}=Object.assign({},(0,a.useMDXComponents)(),e.components);return t?o.default.createElement(t,e,o.default.createElement(i,e)):i(e)}},9220:function(e,t,n){"use strict";var r=n(4994);t.__esModule=!0,t.default=void 0;var a=n(2793),o=r(n(6540));function i(e){const t=Object.assign({blockquote:"blockquote",p:"p",strong:"strong",code:"code",a:"a",ol:"ol",li:"li",h2:"h2",div:"div",em:"em",pre:"pre"},(0,a.useMDXComponents)(),e.components);return o.default.createElement(o.default.Fragment,null,o.default.createElement(t.blockquote,null,"\n",o.default.createElement(t.p,null,o.default.createElement(t.strong,null,"AUTHOR'S NOTE:")," this post is several years old, but it's a fun time\ncapsule. Professionally I was but a babe, and had just left one of my first\nprogramming jobs, where I had encountered my first truly heinous codebase. I was\nalmost comically thirsty for quality and blessed with a project that was\nconceptually reducible to a pure function. Nonetheless, what is describes\nremains my favorite programming workflow: in a split terminal window, running\n",o.default.createElement(t.code,null,"vim")," or ",o.default.createElement(t.code,null,"emacsclient -nw")," on one side and unit tests on the other."),"\n"),"\n",o.default.createElement(t.p,null,"So. It wasn't until a few months ago that I finally worked on a software\nproject with full test coverage. Now that I have, I'm a little shocked and\nhorrified it took this long: the quality of life is drastically better on\nthis side. The project in question is ",o.default.createElement(t.a,{href:"https://law.cornell.edu/rio"},"RIO"),", an\nES6 legal citation parser I've been building for Cornell Law's LII. I've been\ndeveloping that solo, so I had the liberty of setting the testing mantle up to\nsuit my own workflow: heavily terminal-based, using vim and tmux."),"\n",o.default.createElement(t.p,null,"I've found that it's a massive help to be able to have tests constantly\nrerunning in a splitscreen with vim every time I save a file. The constant\nfeedback means I don't need to keep switching mental context to see if my code\nis correct: I can, while still in my editor, just glance over at a current test\nrun. This has utterly revolutionized how I feel about refactoring: knowing\nexactly when my code breaks and unbreaks as I rearrange things is a massive\nhelp for refactoring, and reveals bugs pretty much the instant they are\nintroduced. I haven't had to write a ",o.default.createElement(t.code,null,"debugger")," in anger in a shockingly long\ntime. I want that confidence and speed when I work on rails projects, too."),"\n",o.default.createElement(t.p,null,"So, to recap, I want"),"\n",o.default.createElement(t.ol,null,"\n",o.default.createElement(t.li,null,"fast tests that"),"\n",o.default.createElement(t.li,null,"run automatically on file save"),"\n",o.default.createElement(t.li,null,"run by a persistent server I can ogle in a tmux split while I vim away in\nthe same terminal window."),"\n"),"\n",o.default.createElement(t.h2,{id:"fast-tests",style:{position:"relative"}},o.default.createElement(t.a,{href:"#fast-tests","aria-label":"fast tests permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Fast tests"),"\n",o.default.createElement(t.p,null,"The speed can be helped by ",o.default.createElement(t.code,null,"spring"),", a gem that comes in rails' default\n",o.default.createElement(t.code,null,"Gemfile")," but which takes a bit of setup. Once you ",o.default.createElement(t.em,null,"have")," set it up, though,\nit's brilliant. After the first command which requires loading your rails app,\n",o.default.createElement(t.code,null,"spring")," keeps running as a background process, with your application\nenvironment loaded into memory. This means that the next time you run a command\nthat requires a loaded app, like your test suite, you get to skip the\nseveral-second wait for rails to bootstrap itself­you only need to run\nthe test files themselves. Out of the box, ",o.default.createElement(t.code,null,"spring")," only knows how to wrap the\n",o.default.createElement(t.code,null,"rails")," and ",o.default.createElement(t.code,null,"rake")," commands to use the preloaded app, but the\n",o.default.createElement(t.code,null,"spring-commands-rspec")," gem expands that set to also wrap ",o.default.createElement(t.code,null,"rspec"),", which I'm\nusing for my tests."),"\n",o.default.createElement(t.p,null,"Incidentally, I've read things which assert that ",o.default.createElement(t.code,null,"minitest")," is a good bit\nfaster than ",o.default.createElement(t.code,null,"rspec"),"; but ",o.default.createElement(t.code,null,"rspec")," has quite a lot of community support, and I've\nbeen writing a ton of ",o.default.createElement(t.code,null,"jasmine")," tests lately, which has wicked similar syntax.\nThe point of this is to lower the cognitive load of testing, after all. With a\nmassive test suite, though, the time savings might be worth switching over. As\nalways, measure: the old command-line standby ",o.default.createElement(t.code,null,"time")," is your friend."),"\n",o.default.createElement(t.h2,{id:"running-automatically-on-file-save",style:{position:"relative"}},o.default.createElement(t.a,{href:"#running-automatically-on-file-save","aria-label":"running automatically on file save permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Running automatically on file save"),"\n",o.default.createElement(t.p,null,o.default.createElement(t.code,null,"guard")," is the gem of choice here. It reads a ",o.default.createElement(t.code,null,"Guardfile")," in the root of your\nproject: in that ",o.default.createElement(t.code,null,"Guardfile"),", which is written in a ruby DSL, you define what\nactions ",o.default.createElement(t.code,null,"guard")," should run for given project files and which files to ignore.\nIf you, like I, are on osx, you should also install ",o.default.createElement(t.code,null,"rb-fsevent"),", which makes\n",o.default.createElement(t.code,null,"guard")," listen to osx's native FSEvents API instead of having to poll the disk\nfor changes (which is slower and takes more work from your CPU). You can\nspecify any command-line callback you like in your ",o.default.createElement(t.code,null,"Guardfile")," with backticks,\nbut there are quite a few guard plugins that automatically set up conventional\nrules for a conventional rails configuration and tool-specific configuration\noptions. Enter ",o.default.createElement(t.code,null,"guard-rspec"),"."),"\n",o.default.createElement(t.p,null,"Here are the versions of all the gems I used when I went through this myself,\nif you're into that sort of thing:"),"\n",o.default.createElement(t.pre,null,o.default.createElement(t.code,null,"guard 2.14.0\nguard-rspec 4.7.3\nrails 4.2.5\nrb-fsevent 0.9.8\nruby 2.3.1\nspring 2.0.0\nspring-command-rspec 1.0.4\n")),"\n",o.default.createElement(t.h2,{id:"lets-set-these-bad-not-specifically-gendered-children-up",style:{position:"relative"}},o.default.createElement(t.a,{href:"#lets-set-these-bad-not-specifically-gendered-children-up","aria-label":"lets set these bad not specifically gendered children up permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Let's set these bad not-specifically-gendered children up"),"\n",o.default.createElement(t.p,null,"In your ",o.default.createElement(t.code,null,"Gemfile"),":"),"\n",o.default.createElement(t.pre,null,o.default.createElement(t.code,{className:"language-ruby"},"group :development, :test do\n  gem 'spring-commands-rspec'\n  gem 'rspec-rails'\n  gem 'guard-rspec'\n  gem 'rb-fsevent' if `uname` =~ /Darwin/\nend\n")),"\n",o.default.createElement(t.p,null,"And"),"\n",o.default.createElement(t.pre,null,o.default.createElement(t.code,{className:"language-shell"},"bundle\n")),"\n",o.default.createElement(t.h2,{id:"setup-spring",style:{position:"relative"}},o.default.createElement(t.a,{href:"#setup-spring","aria-label":"setup spring permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Setup Spring"),"\n",o.default.createElement(t.p,null,"To generate the command wrappers necessary to use the preloaded app, run"),"\n",o.default.createElement(t.pre,null,o.default.createElement(t.code,{className:"language-shell"},"spring binstub --all\n")),"\n",o.default.createElement(t.p,null,"which should generate some output along the lines of"),"\n",o.default.createElement(t.pre,null,o.default.createElement(t.code,{className:"language-shell"},"* bin/rake: spring inserted\n* bin/rspec: spring inserted\n* bin/rails: spring inserted\n")),"\n",o.default.createElement(t.p,null,"If you forgot to rebundle before running this or otherwise need to change the\nconfiguration for ",o.default.createElement(t.code,null,"spring"),", you'll need to stop and restart ",o.default.createElement(t.code,null,"spring")," with"),"\n",o.default.createElement(t.pre,null,o.default.createElement(t.code,{className:"language-shell"},"spring stop\n")),"\n",o.default.createElement(t.p,null,"Otherwise, it will keep reusing the old outdated preloaded environment. And, if you're paranoid:"),"\n",o.default.createElement(t.pre,null,o.default.createElement(t.code,{className:"language-shell"},"spring status\n")),"\n",o.default.createElement(t.p,null,"For those quick tests I mentioned, just run"),"\n",o.default.createElement(t.pre,null,o.default.createElement(t.code,{className:"language-shell"},"bin/rspec\n")),"\n",o.default.createElement(t.p,null,o.default.createElement(t.code,null,"bin/rspec")," is the wrapper script genreated back in the ",o.default.createElement(t.code,null,"spring binstub --all"),"\nstep. You could also run ",o.default.createElement(t.code,null,"rspec")," through ",o.default.createElement(t.code,null,"spring")," manually with"),"\n",o.default.createElement(t.pre,null,o.default.createElement(t.code,{className:"language-shell"},"spring rspec\n")),"\n",o.default.createElement(t.p,null,"Life is full of choices, and many of them don't matter. I timed both on some\nempty spec files I scaffolded (with test output truncated, of course):"),"\n",o.default.createElement(t.pre,null,o.default.createElement(t.code,{className:"language-shell"},"% spring stop\nSpring stopped.\n\n% time bin/rspec\n\n[...]\nFinished in 0.66145 seconds (files took 0.61181 seconds to load)\n32 examples, 0 failures, 18 pending\n\nbin/rspec  0.25s user 0.06s system 4% cpu 6.348 total\n\n% time bin/rspec\n\n[...]\nFinished in 0.59806 seconds (files took 0.58837 seconds to load)\n32 examples, 0 failures, 18 pending\n\nbin/rspec  0.27s user 0.09s system 19% cpu 1.864 total\n\n% spring stop\nSpring stopped.\n\n% time spring rspec\n\n[...]\nFinished in 0.58927 seconds (files took 0.36102 seconds to load)\n32 examples, 0 failures, 18 pending\n\nspring rspec  0.27s user 0.09s system 5% cpu 5.996 total\n\n% time spring rspec\n\n[...]\nFinished in 0.57317 seconds (files took 0.34346 seconds to load)\n32 examples, 0 failures, 18 pending\n\nspring rspec  0.27s user 0.08s system 25% cpu 1.398 total\n")),"\n",o.default.createElement(t.p,null,"Either way, ",o.default.createElement(t.code,null,"spring")," made the tests ",o.default.createElement(t.em,null,"much")," faster after the first run, and\nthose savings persist so long as the spring server is running."),"\n",o.default.createElement(t.h2,{id:"setup-guard",style:{position:"relative"}},o.default.createElement(t.a,{href:"#setup-guard","aria-label":"setup guard permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Setup Guard"),"\n",o.default.createElement(t.p,null,"I assume you already ran"),"\n",o.default.createElement(t.pre,null,o.default.createElement(t.code,{className:"language-shell"},"rails g rspec:install\n")),"\n",o.default.createElement(t.p,null,"but if you didn't yet, do. Then run"),"\n",o.default.createElement(t.pre,null,o.default.createElement(t.code,{className:"language-shell"},"% guard init\n\n01:34:28 - INFO - Writing new Guardfile to /Users/ambirdsall/code/rails/event_scheduler/Guardfile\n01:34:28 - INFO - rspec guard added to Guardfile, feel free to edit it\n")),"\n",o.default.createElement(t.p,null,"Find this line of your new ",o.default.createElement(t.code,null,"Guardfile"),":"),"\n",o.default.createElement(t.pre,null,o.default.createElement(t.code,{className:"language-ruby"},'guard :rspec, cmd: "bundle exec rspec" do\n')),"\n",o.default.createElement(t.p,null,"and change it to"),"\n",o.default.createElement(t.pre,null,o.default.createElement(t.code,{className:"language-ruby"},'guard :rspec, cmd: "bin/rspec" do\n')),"\n",o.default.createElement(t.p,null,"NICE."),"\n",o.default.createElement(t.h2,{id:"there-you-go",style:{position:"relative"}},o.default.createElement(t.a,{href:"#there-you-go","aria-label":"there you go permalink",className:"anchor before"},o.default.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"There you go"),"\n",o.default.createElement(t.p,null,"Now just fire up ",o.default.createElement(t.code,null,"guard")," with the command ",o.default.createElement(t.code,null,"guard"),". Shazam! Your tests will run on save."),"\n",o.default.createElement(t.p,null,"The little prompt ",o.default.createElement(t.code,null,"guard")," gives you is an interactive ruby console, too, which\nis really handy for double-checking the syntax of quick snippets when fixing\ntest failures. Use Ctrl-d to kill it, or just close your terminal."))}t.default=function(e){void 0===e&&(e={});const{wrapper:t}=Object.assign({},(0,a.useMDXComponents)(),e.components);return t?o.default.createElement(t,e,o.default.createElement(i,e)):i(e)}},6774:function(e,t){"use strict";var n=0,r=function(e){var t=window.decodeURI(e.replace("#",""));if(""!==t){var r=document.getElementById(t);if(r){var a=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,o=document.documentElement.clientTop||document.body.clientTop||0,i=window.getComputedStyle(r),l=i.getPropertyValue("scroll-margin-top")||i.getPropertyValue("scroll-snap-margin-top")||"0px";return r.getBoundingClientRect().top+a-parseInt(l,10)-o-n}}return null};t.onInitialClientRender=function(e,t){t.offsetY&&(n=t.offsetY),requestAnimationFrame((function(){var e=r(window.location.hash);null!==e&&window.scrollTo(0,e)}))},t.shouldUpdateScroll=function(e){var t=e.routerProps.location,n=r(t.hash);return null===n||[0,n]}},7688:function(e,t){"use strict";t.DEFAULT_OPTIONS={maxWidth:650,wrapperStyle:"",backgroundColor:"white",linkImagesToOriginal:!0,showCaptions:!1,markdownCaptions:!1,withWebp:!1,withAvif:!1,tracedSVG:!1,loading:"lazy",decoding:"async",disableBgImageOnAlpha:!1,disableBgImage:!1},t.EMPTY_ALT="GATSBY_EMPTY_ALT",t.imageClass="gatsby-resp-image-image",t.imageWrapperClass="gatsby-resp-image-wrapper",t.imageBackgroundClass="gatsby-resp-image-background-image"},5616:function(e,t,n){"use strict";var r=n(7688),a=r.DEFAULT_OPTIONS,o=r.imageClass,i=r.imageBackgroundClass,l=r.imageWrapperClass;t.onRouteUpdate=function(e,t){for(var n=Object.assign({},a,t),r=document.querySelectorAll("."+l),u=function(e){var t=r[e],a=t.querySelector("."+i),l=t.querySelector("."+o),u=function(){a.style.transition="opacity 0.5s 0.5s",l.style.transition="opacity 0.5s",c()},c=function e(){a.style.opacity=0,l.style.opacity=1,l.style.color="inherit",l.style.boxShadow="inset 0px 0px 0px 400px "+n.backgroundColor,l.removeEventListener("load",u),l.removeEventListener("error",e)};l.style.opacity=0,l.addEventListener("load",u),l.addEventListener("error",c),l.complete&&c()},c=0;c<r.length;c++)u(c)}},9895:function(e,t,n){"use strict";var r=n(4994);t.__esModule=!0,t.default=function(e){return o.default.createElement(l,e,o.default.createElement(a.default,e))};var a=r(n(3136)),o=r(n(6540)),i=r(n(6836));function l(e){let{data:t,children:n}=e;const{mdx:r}=t,{frontmatter:a}=r;return o.default.createElement(o.default.Fragment,null,o.default.createElement(i.default,{plaid:!0,withIcons:!1},o.default.createElement("h1",null,a.title),o.default.createElement("h3",{className:"blog-post-date"},new Date(a.date).toDateString())),o.default.createElement("div",{className:"blog-post-container"},o.default.createElement("div",{className:"blog-post"},o.default.createElement("div",{className:"blog-post-content"},n))))}n(6292)},3993:function(e,t,n){"use strict";var r=n(4994);t.__esModule=!0,t.default=function(e){return o.default.createElement(l,e,o.default.createElement(a.default,e))};var a=r(n(5828)),o=r(n(6540)),i=r(n(6836));function l(e){let{data:t,children:n}=e;const{mdx:r}=t,{frontmatter:a}=r;return o.default.createElement(o.default.Fragment,null,o.default.createElement(i.default,{plaid:!0,withIcons:!1},o.default.createElement("h1",null,a.title),o.default.createElement("h3",{className:"blog-post-date"},new Date(a.date).toDateString())),o.default.createElement("div",{className:"blog-post-container"},o.default.createElement("div",{className:"blog-post"},o.default.createElement("div",{className:"blog-post-content"},n))))}n(6292)},8914:function(e,t,n){"use strict";var r=n(4994);t.__esModule=!0,t.default=function(e){return o.default.createElement(l,e,o.default.createElement(a.default,e))};var a=r(n(6853)),o=r(n(6540)),i=r(n(6836));function l(e){let{data:t,children:n}=e;const{mdx:r}=t,{frontmatter:a}=r;return o.default.createElement(o.default.Fragment,null,o.default.createElement(i.default,{plaid:!0,withIcons:!1},o.default.createElement("h1",null,a.title),o.default.createElement("h3",{className:"blog-post-date"},new Date(a.date).toDateString())),o.default.createElement("div",{className:"blog-post-container"},o.default.createElement("div",{className:"blog-post"},o.default.createElement("div",{className:"blog-post-content"},n))))}n(6292)},6924:function(e,t,n){"use strict";var r=n(4994);t.__esModule=!0,t.default=function(e){return o.default.createElement(l,e,o.default.createElement(a.default,e))};var a=r(n(8915)),o=r(n(6540)),i=r(n(6836));function l(e){let{data:t,children:n}=e;const{mdx:r}=t,{frontmatter:a}=r;return o.default.createElement(o.default.Fragment,null,o.default.createElement(i.default,{plaid:!0,withIcons:!1},o.default.createElement("h1",null,a.title),o.default.createElement("h3",{className:"blog-post-date"},new Date(a.date).toDateString())),o.default.createElement("div",{className:"blog-post-container"},o.default.createElement("div",{className:"blog-post"},o.default.createElement("div",{className:"blog-post-content"},n))))}n(6292)},4769:function(e,t,n){"use strict";var r=n(4994);t.__esModule=!0,t.default=function(e){return o.default.createElement(l,e,o.default.createElement(a.default,e))};var a=r(n(2050)),o=r(n(6540)),i=r(n(6836));function l(e){let{data:t,children:n}=e;const{mdx:r}=t,{frontmatter:a}=r;return o.default.createElement(o.default.Fragment,null,o.default.createElement(i.default,{plaid:!0,withIcons:!1},o.default.createElement("h1",null,a.title),o.default.createElement("h3",{className:"blog-post-date"},new Date(a.date).toDateString())),o.default.createElement("div",{className:"blog-post-container"},o.default.createElement("div",{className:"blog-post"},o.default.createElement("div",{className:"blog-post-content"},n))))}n(6292)},2441:function(e,t,n){"use strict";var r=n(4994);t.__esModule=!0,t.default=function(e){return o.default.createElement(l,e,o.default.createElement(a.default,e))};var a=r(n(76)),o=r(n(6540)),i=r(n(6836));function l(e){let{data:t,children:n}=e;const{mdx:r}=t,{frontmatter:a}=r;return o.default.createElement(o.default.Fragment,null,o.default.createElement(i.default,{plaid:!0,withIcons:!1},o.default.createElement("h1",null,a.title),o.default.createElement("h3",{className:"blog-post-date"},new Date(a.date).toDateString())),o.default.createElement("div",{className:"blog-post-container"},o.default.createElement("div",{className:"blog-post"},o.default.createElement("div",{className:"blog-post-content"},n))))}n(6292)},6621:function(e,t,n){"use strict";var r=n(4994);t.__esModule=!0,t.default=function(e){return o.default.createElement(l,e,o.default.createElement(a.default,e))};var a=r(n(2944)),o=r(n(6540)),i=r(n(6836));function l(e){let{data:t,children:n}=e;const{mdx:r}=t,{frontmatter:a}=r;return o.default.createElement(o.default.Fragment,null,o.default.createElement(i.default,{plaid:!0,withIcons:!1},o.default.createElement("h1",null,a.title),o.default.createElement("h3",{className:"blog-post-date"},new Date(a.date).toDateString())),o.default.createElement("div",{className:"blog-post-container"},o.default.createElement("div",{className:"blog-post"},o.default.createElement("div",{className:"blog-post-content"},n))))}n(6292)},7308:function(e,t,n){"use strict";var r=n(4994);t.__esModule=!0,t.default=function(e){return o.default.createElement(l,e,o.default.createElement(a.default,e))};var a=r(n(5865)),o=r(n(6540)),i=r(n(6836));function l(e){let{data:t,children:n}=e;const{mdx:r}=t,{frontmatter:a}=r;return o.default.createElement(o.default.Fragment,null,o.default.createElement(i.default,{plaid:!0,withIcons:!1},o.default.createElement("h1",null,a.title),o.default.createElement("h3",{className:"blog-post-date"},new Date(a.date).toDateString())),o.default.createElement("div",{className:"blog-post-container"},o.default.createElement("div",{className:"blog-post"},o.default.createElement("div",{className:"blog-post-content"},n))))}n(6292)},1219:function(e,t,n){"use strict";var r=n(4994);t.__esModule=!0,t.default=function(e){return o.default.createElement(l,e,o.default.createElement(a.default,e))};var a=r(n(3200)),o=r(n(6540)),i=r(n(6836));function l(e){let{data:t,children:n}=e;const{mdx:r}=t,{frontmatter:a}=r;return o.default.createElement(o.default.Fragment,null,o.default.createElement(i.default,{plaid:!0,withIcons:!1},o.default.createElement("h1",null,a.title),o.default.createElement("h3",{className:"blog-post-date"},new Date(a.date).toDateString())),o.default.createElement("div",{className:"blog-post-container"},o.default.createElement("div",{className:"blog-post"},o.default.createElement("div",{className:"blog-post-content"},n))))}n(6292)},6392:function(e,t,n){"use strict";var r=n(4994);t.__esModule=!0,t.default=function(e){return o.default.createElement(l,e,o.default.createElement(a.default,e))};var a=r(n(2355)),o=r(n(6540)),i=r(n(6836));function l(e){let{data:t,children:n}=e;const{mdx:r}=t,{frontmatter:a}=r;return o.default.createElement(o.default.Fragment,null,o.default.createElement(i.default,{plaid:!0,withIcons:!1},o.default.createElement("h1",null,a.title),o.default.createElement("h3",{className:"blog-post-date"},new Date(a.date).toDateString())),o.default.createElement("div",{className:"blog-post-container"},o.default.createElement("div",{className:"blog-post"},o.default.createElement("div",{className:"blog-post-content"},n))))}n(6292)},6507:function(e,t,n){"use strict";var r=n(4994);t.__esModule=!0,t.default=function(e){return o.default.createElement(l,e,o.default.createElement(a.default,e))};var a=r(n(9220)),o=r(n(6540)),i=r(n(6836));function l(e){let{data:t,children:n}=e;const{mdx:r}=t,{frontmatter:a}=r;return o.default.createElement(o.default.Fragment,null,o.default.createElement(i.default,{plaid:!0,withIcons:!1},o.default.createElement("h1",null,a.title),o.default.createElement("h3",{className:"blog-post-date"},new Date(a.date).toDateString())),o.default.createElement("div",{className:"blog-post-container"},o.default.createElement("div",{className:"blog-post"},o.default.createElement("div",{className:"blog-post-content"},n))))}n(6292)},4921:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){let{d3RenderFn:t,className:n}=e;const a=(0,r.useRef)(null);return(0,r.useEffect)((()=>{window.d3Embeds||(window.d3Embeds=new Map),window.d3Embeds.get(t)||(t(a.current),window.d3Embeds.set(t,!0))}),[t]),r.default.createElement("div",{className:n,ref:a})};var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(r,i,l):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(6540));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}},6836:function(e,t,n){"use strict";var r=n(4994);t.__esModule=!0,t.default=t.Header=t.Footer=void 0;var a=r(n(6540)),o=n(1612),i=r(n(404));n(1659);const l=e=>{let{children:t}=e;return a.default.createElement("span",{className:"shh"},t)},u=e=>a.default.createElement("div",{className:"icon-bar"},a.default.createElement("a",{href:"https:www.github.com/ambirdsall"},a.default.createElement(o.FaGithub,null),a.default.createElement(l,null,"github")),a.default.createElement("a",{href:"https:www.linkedin.com/in/ambirdsall"},a.default.createElement(o.FaLinkedin,null),a.default.createElement(l,null,"linkedin")),a.default.createElement("a",{href:"https:www.twitter.com/gobslapped"},a.default.createElement(o.FaTwitter,null),a.default.createElement(l,null,"twitter"))),c=e=>{let{children:t,plaid:n,withIcons:r}=e;return a.default.createElement("header",{className:n?"plaid":""},a.default.createElement("div",{className:"header-content"},t,r?a.default.createElement(u,null):a.default.createElement(i.default,null)))};t.Header=c;t.Footer=e=>{let{children:t,withIcons:n}=e;return a.default.createElement("footer",{className:"plaid"},a.default.createElement("div",{className:"footer-content"},n?a.default.createElement(u,null):a.default.createElement(i.default,null),"© ",(new Date).getFullYear()," Alex Birdsall",t))};t.default=c},3895:function(e,t,n){"use strict";var r=n(4994);t.__esModule=!0,t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(n(6540)),o=r(n(5556)),i=n(1532),l=n(6836),u=r(n(404));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}n(1106),n(7745);const s=e=>{const t=(0,i.useStaticQuery)("3649515864");return a.default.createElement(l.Header,null,a.default.createElement("h1",null,a.default.createElement(i.Link,{to:"/",style:{textDecoration:"none"}},t.site.siteMetadata.title)))},f=e=>{let{children:t,defaultHeader:n}=e;return(0,a.useEffect)((()=>{("ontouchstart"in window||navigator.maxTouchPoints)&&document.body.classList.add("touch-device")}),[]),a.default.createElement(a.default.Fragment,null,n?a.default.createElement(s,null):a.default.createElement(u.default,null),a.default.createElement("div",{className:"container"},a.default.createElement("main",null,t)),a.default.createElement(l.Footer,{withIcons:!0}))};f.propTypes={children:o.default.node.isRequired};t.default=f},404:function(e,t,n){"use strict";var r=n(4994);t.__esModule=!0,t.default=void 0;var a=r(n(6540));t.default=e=>a.default.createElement(a.default.Fragment,null)},8640:function(e,t,n){"use strict";var r=n(4994);t.__esModule=!0,t.default=void 0;var a=r(n(6540)),o=n(1532);n(709);t.default=e=>{let{post:{frontmatter:{path:t,date:n,title:r}}}=e;return a.default.createElement("div",{className:"post-link"},a.default.createElement(o.Link,{to:t},r),a.default.createElement("span",{className:"post-link-date"},(e=>{const{year:t,month:n,day:r}=new Intl.DateTimeFormat(void 0,{year:"numeric",month:"2-digit",day:"2-digit"}).formatToParts(new Date(e)).filter((e=>"literal"!==e.type)).reduce(((e,t)=>(e[t.type]=t.value,e)),{});return t+"-"+n+"-"+r})(n)))}},7528:function(e,t,n){"use strict";var r=n(4994);t.__esModule=!0,t.default=void 0;var a=r(n(6540)),o=r(n(5556)),i=r(n(9125)),l=n(1532);function u(e){let{description:t,lang:n,meta:r,title:o}=e;const{site:u}=(0,l.useStaticQuery)("63159454"),c=t||u.siteMetadata.description;return a.default.createElement(i.default,{htmlAttributes:{lang:n},title:o,titleTemplate:"%s | "+u.siteMetadata.title,meta:[{name:"description",content:c},{property:"og:title",content:o},{property:"og:description",content:c},{property:"og:type",content:"website"},{name:"twitter:card",content:"summary"},{name:"twitter:creator",content:u.siteMetadata.author},{name:"twitter:title",content:o},{name:"twitter:description",content:c}].concat(r)})}u.defaultProps={lang:"en",meta:[],description:""},u.propTypes={description:o.default.string,lang:o.default.string,meta:o.default.arrayOf(o.default.object),title:o.default.string.isRequired};t.default=u},996:function(e,t,n){"use strict";var r=n(4994);t.__esModule=!0,t.default=void 0;var a=r(n(6540)),o=r(n(4921)),i=r(n(1572));n(2692);const l=e=>{new i.default(e).run()};t.default=()=>a.default.createElement(o.default,{d3RenderFn:l,className:"triangle big-bottom"})},2801:function(e,t,n){"use strict";var r=n(4994);t.__esModule=!0,t.default=function(){const e=(0,a.useCallback)((e=>{new i.default(e).run()}),[]);return a.default.createElement(o.default,{d3RenderFn:e,className:"triangle"})};var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(n(6540)),o=r(n(4921)),i=r(n(1857));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}n(2692)},5022:function(e,t,n){"use strict";var r=n(4994);t.__esModule=!0,t.default=void 0;var a=r(n(6540)),o=r(n(4921)),i=r(n(8045));const l=e=>{const t=new i.default(e);t.update(),t.update()};t.default=()=>a.default.createElement(o.default,{d3RenderFn:l,className:"triangle big-bottom"})},3331:function(e,t,n){"use strict";var r=n(4994);t.__esModule=!0,t.default=void 0;var a=r(n(6540)),o=r(n(3895)),i=r(n(7528));t.default=()=>a.default.createElement(o.default,null,a.default.createElement(i.default,{title:"404: Not found"}),a.default.createElement("h1",null,"NOT FOUND"),a.default.createElement("p",null,"You just hit a route that doesn't exist... the sadness."))},9639:function(e,t,n){"use strict";var r=n(4994);t.__esModule=!0,t.default=void 0;var a=r(n(6540)),o=r(n(3895)),i=r(n(7528)),l=r(n(8640)),u=r(n(2801)),c=r(n(3989));n(7794);t.default=e=>{let{data:{allMdx:{edges:t},site:{siteMetadata:{title:n}}}}=e;const r=t.map((e=>e.node)).reduce(((e,t)=>{const{topic:n}=t.frontmatter;return e[n]=e[n]||[],e[n].push(t),e[n].sort(((e,t)=>(0,c.default)(e,t))),e}),{}),s=Object.values(r).sort(((e,t)=>(0,c.default)(e[0],t[0]))).map((e=>{const{topic:t}=e[0].frontmatter;return a.default.createElement("div",{key:t},a.default.createElement("h3",null,t),a.default.createElement("div",null,e.map((e=>a.default.createElement(l.default,{key:e.id,post:e})))))}));return a.default.createElement(o.default,null,a.default.createElement(i.default,{title:"Home"}),a.default.createElement(u.default,null),a.default.createElement("h2",{className:"subtitle"},"html < thoughts > browser"),s)}},3989:function(e,t){"use strict";t.__esModule=!0,t.default=function(e,t){const[n,r]=[new Date(e.frontmatter.date),new Date(t.frontmatter.date)];return n>r?-1:r>n?1:0}},8045:function(e,t,n){"use strict";var r=n(4994);t.__esModule=!0,t.default=void 0;var a=r(n(3883)),o=r(n(55)),i=n(9253),l=n(8576),u=(0,o.default)("el"),c=(0,o.default)("w"),s=(0,o.default)("h"),f=(0,o.default)("maxSize"),h=(0,o.default)("minSize");t.default=class{constructor(e){Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,c,{writable:!0,value:216.5}),Object.defineProperty(this,s,{writable:!0,value:150}),Object.defineProperty(this,f,{writable:!0,value:2e3}),Object.defineProperty(this,h,{writable:!0,value:1}),(0,a.default)(this,u)[u]=e,this.initPoints(),this.initVisualization()}initPoints(){this.vertices=[(0,l.Point)((0,a.default)(this,c)[c],(0,a.default)(this,s)[s]),(0,l.Point)(0,(0,a.default)(this,s)[s]),(0,l.Point)((0,a.default)(this,c)[c]/2,0)],this.points=new l.Ring([...this.vertices],{maxSize:(0,a.default)(this,f)[f],minSize:(0,a.default)(this,h)[h]}),this.current=(0,l.Point)((0,a.default)(this,c)[c]/2,(0,a.default)(this,s)[s]/2),this.points.push(this.current)}initVisualization(){this.svg=(0,i.select)((0,a.default)(this,u)[u]).insert("svg",".name").attr("width",(0,a.default)(this,c)[c]).attr("height",(0,a.default)(this,s)[s]).attr("style","background: white"),this.x=(0,i.scaleLinear)().domain([0,(0,a.default)(this,c)[c]]).range([10,(0,a.default)(this,c)[c]-10]),this.y=(0,i.scaleLinear)().domain([0,(0,a.default)(this,c)[c]]).range([10,(0,a.default)(this,c)[c]-10])}update(){const e=this.svg.selectAll("circle").data(this.points.data);e.exit().remove(),e.enter().append("circle").attr("r",2).style("fill","#aa9668"),e.attr("cx",(e=>this.x(e.x))).attr("cy",(e=>this.y(e.y)))}}},1572:function(e,t,n){"use strict";var r=n(4994);t.__esModule=!0,t.default=void 0;var a=r(n(3883)),o=r(n(55)),i=n(9253),l=n(8576),u=(0,o.default)("el"),c=(0,o.default)("w"),s=(0,o.default)("h"),f=(0,o.default)("maxSize"),h=(0,o.default)("minSize"),d=(0,o.default)("activeMaxSize");t.default=class{constructor(e){Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,c,{writable:!0,value:216.5}),Object.defineProperty(this,s,{writable:!0,value:150}),Object.defineProperty(this,f,{writable:!0,value:1e4}),Object.defineProperty(this,h,{writable:!0,value:60}),Object.defineProperty(this,d,{writable:!0,value:(0,a.default)(this,f)[f]}),(0,a.default)(this,u)[u]=e,this.initPoints(),this.initVisualization(),this.update(),this.points.resize((0,a.default)(this,f)[f])}initPoints(){this.vertices=[(0,l.Point)((0,a.default)(this,c)[c],(0,a.default)(this,s)[s]),(0,l.Point)(0,(0,a.default)(this,s)[s]),(0,l.Point)((0,a.default)(this,c)[c]/2,0)],this.points=new l.Ring([...this.vertices],{maxSize:(0,a.default)(this,f)[f],minSize:(0,a.default)(this,h)[h]}),this.current=(0,l.Point)((0,a.default)(this,c)[c]/2,(0,a.default)(this,s)[s]/2),this.points.push(this.current)}initVisualization(){this.svg=(0,i.select)((0,a.default)(this,u)[u]).insert("svg",".name").attr("width",(0,a.default)(this,c)[c]).attr("height",(0,a.default)(this,s)[s]).attr("style","background: white"),this.x=(0,i.scaleLinear)().domain([0,(0,a.default)(this,c)[c]]).range([10,(0,a.default)(this,c)[c]-10]),this.y=(0,i.scaleLinear)().domain([0,(0,a.default)(this,c)[c]]).range([10,(0,a.default)(this,c)[c]-10])}update(){const e=this.svg.selectAll("circle").data(this.points.data);e.exit().remove(),e.enter().append("circle").attr("r",1).style("fill","#aa9668"),e.attr("cx",(e=>this.x(e.x))).attr("cy",(e=>this.y(e.y)))}addNextPoint(){const e=this.current,t=(0,l.sample)(this.vertices);this.current=(0,l.halfwayPoint)(e,t),this.points.push(this.current)}drawSomeDots(e){for(let t=0;t<e;++t)this.addNextPoint();this.update()}run(){this.drawSomeDots(1e4),this.update()}}},1857:function(e,t,n){"use strict";var r=n(4994);t.__esModule=!0,t.default=void 0;var a=r(n(3883)),o=r(n(55)),i=n(9253),l=n(8576),u=(0,o.default)("el"),c=(0,o.default)("w"),s=(0,o.default)("h"),f=(0,o.default)("startingSliderValue"),h=(0,o.default)("maxSize"),d=(0,o.default)("minSize"),p=(0,o.default)("activeMaxSize");t.default=class{constructor(e){Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,c,{writable:!0,value:216.5}),Object.defineProperty(this,s,{writable:!0,value:150}),Object.defineProperty(this,f,{writable:!0,value:18}),Object.defineProperty(this,h,{writable:!0,value:2e3}),Object.defineProperty(this,d,{writable:!0,value:60}),Object.defineProperty(this,p,{writable:!0,value:(0,a.default)(this,h)[h]}),this.resize=e=>{const t=e/100*(0,a.default)(this,h)[h];(0,a.default)(this,p)[p]=this.points.safeMax(t)},(0,a.default)(this,u)[u]=e,this.initPoints(),this.initVisualization(),this.points.resize((0,a.default)(this,f)[f]),this.resize((0,a.default)(this,f)[f])}initPoints(){this.vertices=[(0,l.Point)(0,0),(0,l.Point)((0,a.default)(this,c)[c],0),(0,l.Point)((0,a.default)(this,c)[c]/2,(0,a.default)(this,s)[s])],this.points=new l.Ring([...this.vertices],{maxSize:(0,a.default)(this,h)[h],minSize:(0,a.default)(this,d)[d]}),this.current=(0,l.Point)((0,a.default)(this,c)[c]/2,(0,a.default)(this,s)[s]/2),this.points.push(this.current)}initVisualization(){const e=this.resize;this.svg=(0,i.select)((0,a.default)(this,u)[u]).insert("svg",".name").attr("width",(0,a.default)(this,c)[c]).attr("height",(0,a.default)(this,s)[s]);const t=(0,i.select)((0,a.default)(this,u)[u]).insert("div").attr("class","resizer").style("margin-top","2em");this.sliderLabel=t.insert("label").attr("for","triangle-point-selector").style("display","block").style("text-align","center").style("color","rgba(170, 150, 104, 1)"),t.insert("input").attr("type","range").attr("id","triangle-point-selector").style("justify-self","center").style("width","216.5px").attr("value",""+(0,a.default)(this,f)[f]).on("input",(function(){e(+this.value)})).append("span").text((function(){return this.value})),this.x=(0,i.scaleLinear)().domain([0,(0,a.default)(this,c)[c]]).range([10,(0,a.default)(this,c)[c]-10]),this.y=(0,i.scaleLinear)().domain([0,(0,a.default)(this,c)[c]]).range([10,(0,a.default)(this,c)[c]-10])}update(){const e=this.svg.selectAll("circle").data(this.points.data);e.exit().remove(),e.enter().append("circle").attr("r",1).style("fill","#aa9668"),e.attr("cx",(e=>this.x(e.x))).attr("cy",(e=>this.y(e.y))),this.sliderLabel.html((()=>"<i>Number of points:</i> "+this.points.length()))}addNextPoint(){const e=this.current,t=(0,l.sample)(this.vertices);this.current=(0,l.halfwayPoint)(e,t),this.points.push(this.current)}drawSomeDots(e){this.correctSizeBy(e);for(let t=0;t<e;++t)this.addNextPoint();this.update()}correctSizeBy(e){const t=(0,a.default)(this,p)[p]-this.points.maxSize;if(t>0){const n=Math.min(e,t);this.points.resizeBy(n)}else if(t<0){const n=0-Math.min(e,0-t);this.points.resizeBy(n)}}run(){(0,i.interval)((()=>this.drawSomeDots(11)),10)}}},8576:function(e,t,n){"use strict";var r=n(4994);t.__esModule=!0,t.sample=t.halfwayPoint=t.Ring=t.Point=void 0;var a=r(n(3883)),o=r(n(55));const i=(e,t)=>({x:e,y:t});t.Point=i;t.halfwayPoint=(e,t)=>{const n=(e.x+t.x)/2,r=(e.y+t.y)/2;return i(n,r)};t.sample=e=>e[Math.floor(Math.random()*e.length)];var l=(0,o.default)("removeOverflow");function u(){for(;this.data.length>=this.maxSize;)this.data.shift()}t.Ring=class{constructor(e,t){void 0===e&&(e=[]);let{maxSize:n,minSize:r}=t;Object.defineProperty(this,l,{value:u}),this.data=e,this.actualMax=n||2e3,this.actualMin=r||60,this.maxSize=this.actualMax}push(e){this.data.push(e),(0,a.default)(this,l)[l]()}safeMax(e){const t=Math.max(e,this.actualMin);return Math.min(t,this.actualMax)}resize(e){const t=this.safeMax(e);return this.maxSize=t,(0,a.default)(this,l)[l](),t}resizeToPct(e){const t=e/100*this.actualMax;return this.resize(t)}resizeBy(e){return this.resize(this.maxSize+e)}length(){return this.data.length}}},1693:function(e,t,n){"use strict";n.r(t),n.d(t,{BaseContext:function(){return j},Link:function(){return Y},Location:function(){return O},LocationProvider:function(){return H},Match:function(){return K},Redirect:function(){return Z},Router:function(){return z},ServerLocation:function(){return L},createHistory:function(){return E},createMemorySource:function(){return x},globalHistory:function(){return M},isRedirect:function(){return Q},matchPath:function(){return c},navigate:function(){return S},redirectTo:function(){return $},resolve:function(){return s},useLocation:function(){return ee},useMatch:function(){return re},useNavigate:function(){return te},useParams:function(){return ne}});var r=n(6540),a=n(311),o=n.n(a),i=n(6566),l=function(e,t){return e.substr(0,t.length)===t},u=function(e,t){for(var n=void 0,r=void 0,a=t.split("?")[0],i=v(a),l=""===i[0],u=g(e),c=0,s=u.length;c<s;c++){var f=!1,d=u[c].route;if(d.default)r={route:d,params:{},uri:t};else{for(var m=v(d.path),y={},w=Math.max(i.length,m.length),_=0;_<w;_++){var E=m[_],x=i[_];if(p(E)){y[E.slice(1)||"*"]=i.slice(_).map(decodeURIComponent).join("/");break}if(void 0===x){f=!0;break}var k=h.exec(E);if(k&&!l){-1===b.indexOf(k[1])||o()(!1);var M=decodeURIComponent(x);y[k[1]]=M}else if(E!==x){f=!0;break}}if(!f){n={route:d,params:y,uri:"/"+i.slice(0,_).join("/")};break}}}return n||r||null},c=function(e,t){return u([{path:e}],t)},s=function(e,t){if(l(e,"/"))return e;var n=e.split("?"),r=n[0],a=n[1],o=t.split("?")[0],i=v(r),u=v(o);if(""===i[0])return y(o,a);if(!l(i[0],".")){var c=u.concat(i).join("/");return y(("/"===o?"":"/")+c,a)}for(var s=u.concat(i),f=[],h=0,d=s.length;h<d;h++){var p=s[h];".."===p?f.pop():"."!==p&&f.push(p)}return y("/"+f.join("/"),a)},f=function(e,t){var n=e.split("?"),r=n[0],a=n[1],o=void 0===a?"":a,i="/"+v(r).map((function(e){var n=h.exec(e);return n?t[n[1]]:e})).join("/"),l=t.location,u=(l=void 0===l?{}:l).search,c=(void 0===u?"":u).split("?")[1]||"";return i=y(i,o,c)},h=/^:(.+)/,d=function(e){return h.test(e)},p=function(e){return e&&"*"===e[0]},m=function(e,t){return{route:e,score:e.default?0:v(e.path).reduce((function(e,t){return e+=4,!function(e){return""===e}(t)?d(t)?e+=2:p(t)?e-=5:e+=3:e+=1,e}),0),index:t}},g=function(e){return e.map(m).sort((function(e,t){return e.score<t.score?1:e.score>t.score?-1:e.index-t.index}))},v=function(e){return e.replace(/(^\/+|\/+$)/g,"").split("/")},y=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e+((n=n.filter((function(e){return e&&e.length>0})))&&n.length>0?"?"+n.join("&"):"")},b=["uri","path"],w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_=function(e){var t=e.location,n=t.search,r=t.hash,a=t.href,o=t.origin,i=t.protocol,l=t.host,u=t.hostname,c=t.port,s=e.location.pathname;!s&&a&&k&&(s=new URL(a).pathname);return{pathname:encodeURI(decodeURI(s)),search:n,hash:r,href:a,origin:o,protocol:i,host:l,hostname:u,port:c,state:e.history.state,key:e.history.state&&e.history.state.key||"initial"}},E=function(e,t){var n=[],r=_(e),a=!1,o=function(){};return{get location(){return r},get transitioning(){return a},_onTransitionComplete:function(){a=!1,o()},listen:function(t){n.push(t);var a=function(){r=_(e),t({location:r,action:"POP"})};return e.addEventListener("popstate",a),function(){e.removeEventListener("popstate",a),n=n.filter((function(e){return e!==t}))}},navigate:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=i.state,u=i.replace,c=void 0!==u&&u;if("number"==typeof t)e.history.go(t);else{l=w({},l,{key:Date.now()+""});try{a||c?e.history.replaceState(l,null,t):e.history.pushState(l,null,t)}catch(f){e.location[c?"replace":"assign"](t)}}r=_(e),a=!0;var s=new Promise((function(e){return o=e}));return n.forEach((function(e){return e({location:r,action:"PUSH"})})),s}}},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=e.indexOf("?"),n={pathname:t>-1?e.substr(0,t):e,search:t>-1?e.substr(t):""},r=0,a=[n],o=[null];return{get location(){return a[r]},addEventListener:function(e,t){},removeEventListener:function(e,t){},history:{get entries(){return a},get index(){return r},get state(){return o[r]},pushState:function(e,t,n){var i=n.split("?"),l=i[0],u=i[1],c=void 0===u?"":u;r++,a.push({pathname:l,search:c.length?"?"+c:c}),o.push(e)},replaceState:function(e,t,n){var i=n.split("?"),l=i[0],u=i[1],c=void 0===u?"":u;a[r]={pathname:l,search:c},o[r]=e},go:function(e){var t=r+e;t<0||t>o.length-1||(r=t)}}}},k=!("undefined"==typeof window||!window.document||!window.document.createElement),M=E(k?window:x()),S=M.navigate,T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function A(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function N(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var I=function(e,t){var n=(0,r.createContext)(t);return n.displayName=e,n},R=I("Location"),O=function(e){var t=e.children;return r.createElement(R.Consumer,null,(function(e){return e?t(e):r.createElement(H,null,t)}))},H=function(e){function t(){var n,r;C(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=P(this,e.call.apply(e,[this].concat(o))),r.state={context:r.getContext(),refs:{unlisten:null}},P(r,n)}return N(t,e),t.prototype.getContext=function(){var e=this.props.history;return{navigate:e.navigate,location:e.location}},t.prototype.componentDidCatch=function(e,t){if(!Q(e))throw e;(0,this.props.history.navigate)(e.uri,{replace:!0})},t.prototype.componentDidUpdate=function(e,t){t.context.location!==this.state.context.location&&this.props.history._onTransitionComplete()},t.prototype.componentDidMount=function(){var e=this,t=this.state.refs,n=this.props.history;n._onTransitionComplete(),t.unlisten=n.listen((function(){Promise.resolve().then((function(){requestAnimationFrame((function(){e.unmounted||e.setState((function(){return{context:e.getContext()}}))}))}))}))},t.prototype.componentWillUnmount=function(){var e=this.state.refs;this.unmounted=!0,e.unlisten()},t.prototype.render=function(){var e=this.state.context,t=this.props.children;return r.createElement(R.Provider,{value:e},"function"==typeof t?t(e):t||null)},t}(r.Component);H.defaultProps={history:M};var L=function(e){var t=e.url,n=e.children,a=t.indexOf("?"),o=void 0,i="";return a>-1?(o=t.substring(0,a),i=t.substring(a)):o=t,r.createElement(R.Provider,{value:{location:{pathname:o,search:i,hash:""},navigate:function(){throw new Error("You can't call navigate on the server.")}}},n)},j=I("Base",{baseuri:"/",basepath:"/",navigate:M.navigate}),z=function(e){return r.createElement(j.Consumer,null,(function(t){return r.createElement(O,null,(function(n){return r.createElement(D,T({},t,n,e))}))}))},D=function(e){function t(){return C(this,t),P(this,e.apply(this,arguments))}return N(t,e),t.prototype.render=function(){var e=this.props,t=e.location,n=e.navigate,a=e.basepath,o=e.primary,i=e.children,l=(e.baseuri,e.component),c=void 0===l?"div":l,f=A(e,["location","navigate","basepath","primary","children","baseuri","component"]),h=r.Children.toArray(i).reduce((function(e,t){var n=oe(a)(t);return e.concat(n)}),[]),d=t.pathname,p=u(h,d);if(p){var m=p.params,g=p.uri,v=p.route,y=p.route.value;a=v.default?a:v.path.replace(/\*$/,"");var b=T({},m,{uri:g,location:t,navigate:function(e,t){return n(s(e,g),t)}}),w=r.cloneElement(y,b,y.props.children?r.createElement(z,{location:t,primary:o},y.props.children):void 0),_=o?q:c,E=o?T({uri:g,location:t,component:c},f):f;return r.createElement(j.Provider,{value:{baseuri:g,basepath:a,navigate:b.navigate}},r.createElement(_,E,w))}return null},t}(r.PureComponent);D.defaultProps={primary:!0};var B=I("Focus"),q=function(e){var t=e.uri,n=e.location,a=e.component,o=A(e,["uri","location","component"]);return r.createElement(B.Consumer,null,(function(e){return r.createElement(V,T({},o,{component:a,requestFocus:e,uri:t,location:n}))}))},F=!0,U=0,V=function(e){function t(){var n,r;C(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=P(this,e.call.apply(e,[this].concat(o))),r.state={},r.requestFocus=function(e){!r.state.shouldFocus&&e&&e.focus()},P(r,n)}return N(t,e),t.getDerivedStateFromProps=function(e,t){if(null==t.uri)return T({shouldFocus:!0},e);var n=e.uri!==t.uri,r=t.location.pathname!==e.location.pathname&&e.location.pathname===e.uri;return T({shouldFocus:n||r},e)},t.prototype.componentDidMount=function(){U++,this.focus()},t.prototype.componentWillUnmount=function(){0===--U&&(F=!0)},t.prototype.componentDidUpdate=function(e,t){e.location!==this.props.location&&this.state.shouldFocus&&this.focus()},t.prototype.focus=function(){var e=this.props.requestFocus;e?e(this.node):F?F=!1:this.node&&(this.node.contains(document.activeElement)||this.node.focus())},t.prototype.render=function(){var e=this,t=this.props,n=(t.children,t.style),a=(t.requestFocus,t.component),o=void 0===a?"div":a,i=(t.uri,t.location,A(t,["children","style","requestFocus","component","uri","location"]));return r.createElement(o,T({style:T({outline:"none"},n),tabIndex:"-1",ref:function(t){return e.node=t}},i),r.createElement(B.Provider,{value:this.requestFocus},this.props.children))},t}(r.Component);(0,i.M)(V);var G=function(){},W=r.forwardRef;void 0===W&&(W=function(e){return e});var Y=W((function(e,t){var n=e.innerRef,a=A(e,["innerRef"]);return r.createElement(j.Consumer,null,(function(e){e.basepath;var o=e.baseuri;return r.createElement(O,null,(function(e){var i=e.location,u=e.navigate,c=a.to,f=a.state,h=a.replace,d=a.getProps,p=void 0===d?G:d,m=A(a,["to","state","replace","getProps"]),g=s(c,o),v=encodeURI(g),y=i.pathname===v,b=l(i.pathname,v);return r.createElement("a",T({ref:t||n,"aria-current":y?"page":void 0},m,p({isCurrent:y,isPartiallyCurrent:b,href:g,location:i}),{href:g,onClick:function(e){if(m.onClick&&m.onClick(e),ie(e)){e.preventDefault();var t=h;if("boolean"!=typeof h&&y){var n=T({},i.state),r=(n.key,A(n,["key"]));a=T({},f),o=r,t=(l=Object.keys(a)).length===Object.keys(o).length&&l.every((function(e){return o.hasOwnProperty(e)&&a[e]===o[e]}))}u(g,{state:f,replace:t})}var a,o,l}}))}))}))}));function X(e){this.uri=e}Y.displayName="Link";var Q=function(e){return e instanceof X},$=function(e){throw new X(e)},J=function(e){function t(){return C(this,t),P(this,e.apply(this,arguments))}return N(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.navigate,n=e.to,r=(e.from,e.replace),a=void 0===r||r,o=e.state,i=(e.noThrow,e.baseuri),l=A(e,["navigate","to","from","replace","state","noThrow","baseuri"]);Promise.resolve().then((function(){var e=s(n,i);t(f(e,l),{replace:a,state:o})}))},t.prototype.render=function(){var e=this.props,t=(e.navigate,e.to),n=(e.from,e.replace,e.state,e.noThrow),r=e.baseuri,a=A(e,["navigate","to","from","replace","state","noThrow","baseuri"]),o=s(t,r);return n||$(f(o,a)),null},t}(r.Component),Z=function(e){return r.createElement(j.Consumer,null,(function(t){var n=t.baseuri;return r.createElement(O,null,(function(t){return r.createElement(J,T({},t,{baseuri:n},e))}))}))},K=function(e){var t=e.path,n=e.children;return r.createElement(j.Consumer,null,(function(e){var a=e.baseuri;return r.createElement(O,null,(function(e){var r=e.navigate,o=e.location,i=s(t,a),l=c(i,o.pathname);return n({navigate:r,location:o,match:l?T({},l.params,{uri:l.uri,path:t}):null})}))}))},ee=function(){var e=(0,r.useContext)(R);if(!e)throw new Error("useLocation hook was used but a LocationContext.Provider was not found in the parent tree. Make sure this is used in a component that is a child of Router");return e.location},te=function(){var e=(0,r.useContext)(j);if(!e)throw new Error("useNavigate hook was used but a BaseContext.Provider was not found in the parent tree. Make sure this is used in a component that is a child of Router");return e.navigate},ne=function(){var e=(0,r.useContext)(j);if(!e)throw new Error("useParams hook was used but a LocationContext.Provider was not found in the parent tree. Make sure this is used in a component that is a child of Router");var t=ee(),n=c(e.basepath,t.pathname);return n?n.params:null},re=function(e){if(!e)throw new Error("useMatch(path: string) requires an argument of a string to match against");var t=(0,r.useContext)(j);if(!t)throw new Error("useMatch hook was used but a LocationContext.Provider was not found in the parent tree. Make sure this is used in a component that is a child of Router");var n=ee(),a=s(e,t.baseuri),o=c(a,n.pathname);return o?T({},o.params,{uri:o.uri,path:e}):null},ae=function(e){return e.replace(/(^\/+|\/+$)/g,"")},oe=function e(t){return function(n){if(!n)return null;if(n.type===r.Fragment&&n.props.children)return r.Children.map(n.props.children,e(t));var a,i,l;if(n.props.path||n.props.default||n.type===Z||o()(!1),n.type!==Z||n.props.from&&n.props.to||o()(!1),n.type===Z&&(a=n.props.from,i=n.props.to,l=function(e){return d(e)},v(a).filter(l).sort().join("/")!==v(i).filter(l).sort().join("/"))&&o()(!1),n.props.default)return{value:n,default:!0};var u=n.type===Z?n.props.from:n.props.path,c="/"===u?t:ae(t)+"/"+ae(u);return{value:n,default:n.props.default,path:n.props.children?ae(c)+"/*":c}}},ie=function(e){return!e.defaultPrevented&&0===e.button&&!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}},311:function(e){"use strict";e.exports=function(e,t,n,r,a,o,i,l){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,a,o,i,l],s=0;(u=new Error(t.replace(/%s/g,(function(){return c[s++]})))).name="Invariant Violation"}throw u.framesToPop=1,u}}},7488:function(e,t,n){"use strict";n.r(t)},1659:function(e,t,n){"use strict";n.r(t)},1106:function(e,t,n){"use strict";n.r(t)},709:function(e,t,n){"use strict";n.r(t)},7745:function(e,t,n){"use strict";n.r(t)},2692:function(e,t,n){"use strict";n.r(t)},7794:function(e,t,n){"use strict";n.r(t)},6292:function(e,t,n){"use strict";n.r(t)},6720:function(e,t,n){"use strict";n.r(t),t.default=function(e){return e=e||Object.create(null),{on:function(t,n){(e[t]||(e[t]=[])).push(n)},off:function(t,n){e[t]&&e[t].splice(e[t].indexOf(n)>>>0,1)},emit:function(t,n){(e[t]||[]).slice().map((function(e){e(n)})),(e["*"]||[]).slice().map((function(e){e(t,n)}))}}}},1812:function(){},115:function(e){"use strict";var t=Array.isArray,n=Object.keys,r=Object.prototype.hasOwnProperty,a="undefined"!=typeof Element;function o(e,i){if(e===i)return!0;if(e&&i&&"object"==typeof e&&"object"==typeof i){var l,u,c,s=t(e),f=t(i);if(s&&f){if((u=e.length)!=i.length)return!1;for(l=u;0!=l--;)if(!o(e[l],i[l]))return!1;return!0}if(s!=f)return!1;var h=e instanceof Date,d=i instanceof Date;if(h!=d)return!1;if(h&&d)return e.getTime()==i.getTime();var p=e instanceof RegExp,m=i instanceof RegExp;if(p!=m)return!1;if(p&&m)return e.toString()==i.toString();var g=n(e);if((u=g.length)!==n(i).length)return!1;for(l=u;0!=l--;)if(!r.call(i,g[l]))return!1;if(a&&e instanceof Element&&i instanceof Element)return e===i;for(l=u;0!=l--;)if(!("_owner"===(c=g[l])&&e.$$typeof||o(e[c],i[c])))return!1;return!0}return e!=e&&i!=i}e.exports=function(e,t){try{return o(e,t)}catch(n){if(n.message&&n.message.match(/stack|recursion/i)||-2146828260===n.number)return console.warn("Warning: react-fast-compare does not handle circular references.",n.name,n.message),!1;throw n}}},9125:function(e,t,n){t.__esModule=!0,t.Helmet=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=f(n(6540)),i=f(n(5556)),l=f(n(2098)),u=f(n(115)),c=n(9628),s=n(3752);function f(e){return e&&e.__esModule?e:{default:e}}function h(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var d,p,m,g=(0,l.default)(c.reducePropsToState,c.handleClientStateChange,c.mapStateOnServer)((function(){return null})),v=(d=g,m=p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.shouldComponentUpdate=function(e){return!(0,u.default)(this.props,e)},t.prototype.mapNestedChildrenToProps=function(e,t){if(!t)return null;switch(e.type){case s.TAG_NAMES.SCRIPT:case s.TAG_NAMES.NOSCRIPT:return{innerHTML:t};case s.TAG_NAMES.STYLE:return{cssText:t}}throw new Error("<"+e.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},t.prototype.flattenArrayTypeChildren=function(e){var t,n=e.child,a=e.arrayTypeChildren,o=e.newChildProps,i=e.nestedChildren;return r({},a,((t={})[n.type]=[].concat(a[n.type]||[],[r({},o,this.mapNestedChildrenToProps(n,i))]),t))},t.prototype.mapObjectTypeChildren=function(e){var t,n,a=e.child,o=e.newProps,i=e.newChildProps,l=e.nestedChildren;switch(a.type){case s.TAG_NAMES.TITLE:return r({},o,((t={})[a.type]=l,t.titleAttributes=r({},i),t));case s.TAG_NAMES.BODY:return r({},o,{bodyAttributes:r({},i)});case s.TAG_NAMES.HTML:return r({},o,{htmlAttributes:r({},i)})}return r({},o,((n={})[a.type]=r({},i),n))},t.prototype.mapArrayTypeChildrenToProps=function(e,t){var n=r({},t);return Object.keys(e).forEach((function(t){var a;n=r({},n,((a={})[t]=e[t],a))})),n},t.prototype.warnOnInvalidChildren=function(e,t){return!0},t.prototype.mapChildrenToProps=function(e,t){var n=this,r={};return o.default.Children.forEach(e,(function(e){if(e&&e.props){var a=e.props,o=a.children,i=h(a,["children"]),l=(0,c.convertReactPropstoHtmlAttributes)(i);switch(n.warnOnInvalidChildren(e,o),e.type){case s.TAG_NAMES.LINK:case s.TAG_NAMES.META:case s.TAG_NAMES.NOSCRIPT:case s.TAG_NAMES.SCRIPT:case s.TAG_NAMES.STYLE:r=n.flattenArrayTypeChildren({child:e,arrayTypeChildren:r,newChildProps:l,nestedChildren:o});break;default:t=n.mapObjectTypeChildren({child:e,newProps:t,newChildProps:l,nestedChildren:o})}}})),t=this.mapArrayTypeChildrenToProps(r,t)},t.prototype.render=function(){var e=this.props,t=e.children,n=h(e,["children"]),a=r({},n);return t&&(a=this.mapChildrenToProps(t,a)),o.default.createElement(d,a)},a(t,null,[{key:"canUseDOM",set:function(e){d.canUseDOM=e}}]),t}(o.default.Component),p.propTypes={base:i.default.object,bodyAttributes:i.default.object,children:i.default.oneOfType([i.default.arrayOf(i.default.node),i.default.node]),defaultTitle:i.default.string,defer:i.default.bool,encodeSpecialCharacters:i.default.bool,htmlAttributes:i.default.object,link:i.default.arrayOf(i.default.object),meta:i.default.arrayOf(i.default.object),noscript:i.default.arrayOf(i.default.object),onChangeClientState:i.default.func,script:i.default.arrayOf(i.default.object),style:i.default.arrayOf(i.default.object),title:i.default.string,titleAttributes:i.default.object,titleTemplate:i.default.string},p.defaultProps={defer:!0,encodeSpecialCharacters:!0},p.peek=d.peek,p.rewind=function(){var e=d.rewind();return e||(e=(0,c.mapStateOnServer)({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),e},m);v.renderStatic=v.rewind,t.Helmet=v,t.default=v},3752:function(e,t){t.__esModule=!0;t.ATTRIBUTE_NAMES={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"};var n=t.TAG_NAMES={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"},r=(t.VALID_TAG_NAMES=Object.keys(n).map((function(e){return n[e]})),t.TAG_PROPERTIES={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src"},t.REACT_TAG_MAP={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"});t.HELMET_PROPS={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},t.HTML_TAG_MAP=Object.keys(r).reduce((function(e,t){return e[r[t]]=t,e}),{}),t.SELF_CLOSING_TAGS=[n.NOSCRIPT,n.SCRIPT,n.STYLE],t.HELMET_ATTRIBUTE="data-react-helmet"},9628:function(e,t,n){t.__esModule=!0,t.warn=t.requestAnimationFrame=t.reducePropsToState=t.mapStateOnServer=t.handleClientStateChange=t.convertReactPropstoHtmlAttributes=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=u(n(6540)),i=u(n(8828)),l=n(3752);function u(e){return e&&e.__esModule?e:{default:e}}var c,s=function(e){return!1===(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},f=function(e){var t=g(e,l.TAG_NAMES.TITLE),n=g(e,l.HELMET_PROPS.TITLE_TEMPLATE);if(n&&t)return n.replace(/%s/g,(function(){return t}));var r=g(e,l.HELMET_PROPS.DEFAULT_TITLE);return t||r||void 0},h=function(e){return g(e,l.HELMET_PROPS.ON_CHANGE_CLIENT_STATE)||function(){}},d=function(e,t){return t.filter((function(t){return void 0!==t[e]})).map((function(t){return t[e]})).reduce((function(e,t){return a({},e,t)}),{})},p=function(e,t){return t.filter((function(e){return void 0!==e[l.TAG_NAMES.BASE]})).map((function(e){return e[l.TAG_NAMES.BASE]})).reverse().reduce((function(t,n){if(!t.length)for(var r=Object.keys(n),a=0;a<r.length;a++){var o=r[a].toLowerCase();if(-1!==e.indexOf(o)&&n[o])return t.concat(n)}return t}),[])},m=function(e,t,n){var a={};return n.filter((function(t){return!!Array.isArray(t[e])||(void 0!==t[e]&&_("Helmet: "+e+' should be of type "Array". Instead found type "'+r(t[e])+'"'),!1)})).map((function(t){return t[e]})).reverse().reduce((function(e,n){var r={};n.filter((function(e){for(var n=void 0,o=Object.keys(e),i=0;i<o.length;i++){var u=o[i],c=u.toLowerCase();-1===t.indexOf(c)||n===l.TAG_PROPERTIES.REL&&"canonical"===e[n].toLowerCase()||c===l.TAG_PROPERTIES.REL&&"stylesheet"===e[c].toLowerCase()||(n=c),-1===t.indexOf(u)||u!==l.TAG_PROPERTIES.INNER_HTML&&u!==l.TAG_PROPERTIES.CSS_TEXT&&u!==l.TAG_PROPERTIES.ITEM_PROP||(n=u)}if(!n||!e[n])return!1;var s=e[n].toLowerCase();return a[n]||(a[n]={}),r[n]||(r[n]={}),!a[n][s]&&(r[n][s]=!0,!0)})).reverse().forEach((function(t){return e.push(t)}));for(var o=Object.keys(r),u=0;u<o.length;u++){var c=o[u],s=(0,i.default)({},a[c],r[c]);a[c]=s}return e}),[]).reverse()},g=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];if(r.hasOwnProperty(t))return r[t]}return null},v=(c=Date.now(),function(e){var t=Date.now();t-c>16?(c=t,e(t)):setTimeout((function(){v(e)}),0)}),y=function(e){return clearTimeout(e)},b="undefined"!=typeof window?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||v:n.g.requestAnimationFrame||v,w="undefined"!=typeof window?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||y:n.g.cancelAnimationFrame||y,_=function(e){return console&&"function"==typeof console.warn&&console.warn(e)},E=null,x=function(e,t){var n=e.baseTag,r=e.bodyAttributes,a=e.htmlAttributes,o=e.linkTags,i=e.metaTags,u=e.noscriptTags,c=e.onChangeClientState,s=e.scriptTags,f=e.styleTags,h=e.title,d=e.titleAttributes;S(l.TAG_NAMES.BODY,r),S(l.TAG_NAMES.HTML,a),M(h,d);var p={baseTag:T(l.TAG_NAMES.BASE,n),linkTags:T(l.TAG_NAMES.LINK,o),metaTags:T(l.TAG_NAMES.META,i),noscriptTags:T(l.TAG_NAMES.NOSCRIPT,u),scriptTags:T(l.TAG_NAMES.SCRIPT,s),styleTags:T(l.TAG_NAMES.STYLE,f)},m={},g={};Object.keys(p).forEach((function(e){var t=p[e],n=t.newTags,r=t.oldTags;n.length&&(m[e]=n),r.length&&(g[e]=p[e].oldTags)})),t&&t(),c(e,m,g)},k=function(e){return Array.isArray(e)?e.join(""):e},M=function(e,t){void 0!==e&&document.title!==e&&(document.title=k(e)),S(l.TAG_NAMES.TITLE,t)},S=function(e,t){var n=document.getElementsByTagName(e)[0];if(n){for(var r=n.getAttribute(l.HELMET_ATTRIBUTE),a=r?r.split(","):[],o=[].concat(a),i=Object.keys(t),u=0;u<i.length;u++){var c=i[u],s=t[c]||"";n.getAttribute(c)!==s&&n.setAttribute(c,s),-1===a.indexOf(c)&&a.push(c);var f=o.indexOf(c);-1!==f&&o.splice(f,1)}for(var h=o.length-1;h>=0;h--)n.removeAttribute(o[h]);a.length===o.length?n.removeAttribute(l.HELMET_ATTRIBUTE):n.getAttribute(l.HELMET_ATTRIBUTE)!==i.join(",")&&n.setAttribute(l.HELMET_ATTRIBUTE,i.join(","))}},T=function(e,t){var n=document.head||document.querySelector(l.TAG_NAMES.HEAD),r=n.querySelectorAll(e+"["+l.HELMET_ATTRIBUTE+"]"),a=Array.prototype.slice.call(r),o=[],i=void 0;return t&&t.length&&t.forEach((function(t){var n=document.createElement(e);for(var r in t)if(t.hasOwnProperty(r))if(r===l.TAG_PROPERTIES.INNER_HTML)n.innerHTML=t.innerHTML;else if(r===l.TAG_PROPERTIES.CSS_TEXT)n.styleSheet?n.styleSheet.cssText=t.cssText:n.appendChild(document.createTextNode(t.cssText));else{var u=void 0===t[r]?"":t[r];n.setAttribute(r,u)}n.setAttribute(l.HELMET_ATTRIBUTE,"true"),a.some((function(e,t){return i=t,n.isEqualNode(e)}))?a.splice(i,1):o.push(n)})),a.forEach((function(e){return e.parentNode.removeChild(e)})),o.forEach((function(e){return n.appendChild(e)})),{oldTags:a,newTags:o}},A=function(e){return Object.keys(e).reduce((function(t,n){var r=void 0!==e[n]?n+'="'+e[n]+'"':""+n;return t?t+" "+r:r}),"")},C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce((function(t,n){return t[l.REACT_TAG_MAP[n]||n]=e[n],t}),t)},P=function(e,t,n){switch(e){case l.TAG_NAMES.TITLE:return{toComponent:function(){return e=t.title,n=t.titleAttributes,(r={key:e})[l.HELMET_ATTRIBUTE]=!0,a=C(n,r),[o.default.createElement(l.TAG_NAMES.TITLE,a,e)];var e,n,r,a},toString:function(){return function(e,t,n,r){var a=A(n),o=k(t);return a?"<"+e+" "+l.HELMET_ATTRIBUTE+'="true" '+a+">"+s(o,r)+"</"+e+">":"<"+e+" "+l.HELMET_ATTRIBUTE+'="true">'+s(o,r)+"</"+e+">"}(e,t.title,t.titleAttributes,n)}};case l.ATTRIBUTE_NAMES.BODY:case l.ATTRIBUTE_NAMES.HTML:return{toComponent:function(){return C(t)},toString:function(){return A(t)}};default:return{toComponent:function(){return function(e,t){return t.map((function(t,n){var r,a=((r={key:n})[l.HELMET_ATTRIBUTE]=!0,r);return Object.keys(t).forEach((function(e){var n=l.REACT_TAG_MAP[e]||e;if(n===l.TAG_PROPERTIES.INNER_HTML||n===l.TAG_PROPERTIES.CSS_TEXT){var r=t.innerHTML||t.cssText;a.dangerouslySetInnerHTML={__html:r}}else a[n]=t[e]})),o.default.createElement(e,a)}))}(e,t)},toString:function(){return function(e,t,n){return t.reduce((function(t,r){var a=Object.keys(r).filter((function(e){return!(e===l.TAG_PROPERTIES.INNER_HTML||e===l.TAG_PROPERTIES.CSS_TEXT)})).reduce((function(e,t){var a=void 0===r[t]?t:t+'="'+s(r[t],n)+'"';return e?e+" "+a:a}),""),o=r.innerHTML||r.cssText||"",i=-1===l.SELF_CLOSING_TAGS.indexOf(e);return t+"<"+e+" "+l.HELMET_ATTRIBUTE+'="true" '+a+(i?"/>":">"+o+"</"+e+">")}),"")}(e,t,n)}}}};t.convertReactPropstoHtmlAttributes=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce((function(t,n){return t[l.HTML_TAG_MAP[n]||n]=e[n],t}),t)},t.handleClientStateChange=function(e){E&&w(E),e.defer?E=b((function(){x(e,(function(){E=null}))})):(x(e),E=null)},t.mapStateOnServer=function(e){var t=e.baseTag,n=e.bodyAttributes,r=e.encode,a=e.htmlAttributes,o=e.linkTags,i=e.metaTags,u=e.noscriptTags,c=e.scriptTags,s=e.styleTags,f=e.title,h=void 0===f?"":f,d=e.titleAttributes;return{base:P(l.TAG_NAMES.BASE,t,r),bodyAttributes:P(l.ATTRIBUTE_NAMES.BODY,n,r),htmlAttributes:P(l.ATTRIBUTE_NAMES.HTML,a,r),link:P(l.TAG_NAMES.LINK,o,r),meta:P(l.TAG_NAMES.META,i,r),noscript:P(l.TAG_NAMES.NOSCRIPT,u,r),script:P(l.TAG_NAMES.SCRIPT,c,r),style:P(l.TAG_NAMES.STYLE,s,r),title:P(l.TAG_NAMES.TITLE,{title:h,titleAttributes:d},r)}},t.reducePropsToState=function(e){return{baseTag:p([l.TAG_PROPERTIES.HREF],e),bodyAttributes:d(l.ATTRIBUTE_NAMES.BODY,e),defer:g(e,l.HELMET_PROPS.DEFER),encode:g(e,l.HELMET_PROPS.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:d(l.ATTRIBUTE_NAMES.HTML,e),linkTags:m(l.TAG_NAMES.LINK,[l.TAG_PROPERTIES.REL,l.TAG_PROPERTIES.HREF],e),metaTags:m(l.TAG_NAMES.META,[l.TAG_PROPERTIES.NAME,l.TAG_PROPERTIES.CHARSET,l.TAG_PROPERTIES.HTTPEQUIV,l.TAG_PROPERTIES.PROPERTY,l.TAG_PROPERTIES.ITEM_PROP],e),noscriptTags:m(l.TAG_NAMES.NOSCRIPT,[l.TAG_PROPERTIES.INNER_HTML],e),onChangeClientState:h(e),scriptTags:m(l.TAG_NAMES.SCRIPT,[l.TAG_PROPERTIES.SRC,l.TAG_PROPERTIES.INNER_HTML],e),styleTags:m(l.TAG_NAMES.STYLE,[l.TAG_PROPERTIES.CSS_TEXT],e),title:f(e),titleAttributes:d(l.ATTRIBUTE_NAMES.TITLE,e)}},t.requestAnimationFrame=b,t.warn=_},4084:function(e,t,n){"use strict";n.d(t,{k5:function(){return c}});var r=n(6540),a={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},o=r.createContext&&r.createContext(a),i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},i.apply(this,arguments)},l=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&(n[r[a]]=e[r[a]])}return n};function u(e){return e&&e.map((function(e,t){return r.createElement(e.tag,i({key:t},e.attr),u(e.child))}))}function c(e){return function(t){return r.createElement(s,i({attr:i({},e.attr)},t),u(e.child))}}function s(e){var t=function(t){var n,a=e.size||t.size||"1em";t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className);var o=e.attr,u=e.title,c=l(e,["attr","title"]);return r.createElement("svg",i({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,o,c,{className:n,style:i({color:e.color||t.color},t.style,e.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),u&&r.createElement("title",null,u),e.children)};return void 0!==o?r.createElement(o.Consumer,null,(function(e){return t(e)})):t(a)}},2098:function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var a=n(6540),o=r(a),i=r(n(2833));function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=!("undefined"==typeof window||!window.document||!window.document.createElement);e.exports=function(e,t,n){if("function"!=typeof e)throw new Error("Expected reducePropsToState to be a function.");if("function"!=typeof t)throw new Error("Expected handleStateChangeOnClient to be a function.");if(void 0!==n&&"function"!=typeof n)throw new Error("Expected mapStateOnServer to either be undefined or a function.");return function(r){if("function"!=typeof r)throw new Error("Expected WrappedComponent to be a React component.");var c,s=[];function f(){c=e(s.map((function(e){return e.props}))),h.canUseDOM?t(c):n&&(c=n(c))}var h=function(e){var t,n;function a(){return e.apply(this,arguments)||this}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,a.peek=function(){return c},a.rewind=function(){if(a.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var e=c;return c=void 0,s=[],e};var l=a.prototype;return l.shouldComponentUpdate=function(e){return!i(e,this.props)},l.componentWillMount=function(){s.push(this),f()},l.componentDidUpdate=function(){f()},l.componentWillUnmount=function(){var e=s.indexOf(this);s.splice(e,1),f()},l.render=function(){return o.createElement(r,this.props)},a}(a.Component);return l(h,"displayName","SideEffect("+function(e){return e.displayName||e.name||"Component"}(r)+")"),l(h,"canUseDOM",u),h}}},3470:function(e,t,n){"use strict";function r(e,t){for(var n in e)if(!(n in t))return!0;for(var r in t)if(e[r]!==t[r])return!0;return!1}n.r(t),t.default=function(e,t,n){return r(e.props,t)||r(e.state,n)}},2833:function(e){e.exports=function(e,t,n,r){var a=n?n.call(r,e,t):void 0;if(void 0!==a)return!!a;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var o=Object.keys(e),i=Object.keys(t);if(o.length!==i.length)return!1;for(var l=Object.prototype.hasOwnProperty.bind(t),u=0;u<o.length;u++){var c=o[u];if(!l(c))return!1;var s=e[c],f=t[c];if(!1===(a=n?n.call(r,s,f,c):void 0)||void 0===a&&s!==f)return!1}return!0}},2475:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},3883:function(e){e.exports=function(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e},e.exports.__esModule=!0,e.exports.default=e.exports},55:function(e){var t=0;e.exports=function(e){return"__private_"+t+++"_"+e},e.exports.__esModule=!0,e.exports.default=e.exports},6221:function(e,t,n){var r=n(5636);e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},4994:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},5636:function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},4656:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SCRIPT_TYPE="text/partytown",t.partytownSnippet=e=>((e,t)=>{const{forward:n=[],...r}=e||{},a=JSON.stringify(r,((e,t)=>("function"==typeof t&&(t=String(t)).startsWith(e+"(")&&(t="function "+t),t)));return["!(function(w,p,f,c){",Object.keys(r).length>0?`c=w[p]=Object.assign(w[p]||{},${a});`:"c=w[p]=w[p]||{};","c[f]=(c[f]||[])",n.length>0?`.concat(${JSON.stringify(n)})`:"","})(window,'partytown','forward');",t].join("")})(e,'/* Partytown 0.5.4 - MIT builder.io */\n!function(t,e,n,i,r,o,a,d,s,c,p,l){function u(){l||(l=1,"/"==(a=(o.lib||"/~partytown/")+(o.debug?"debug/":""))[0]&&(s=e.querySelectorAll(\'script[type="text/partytown"]\'),i!=t?i.dispatchEvent(new CustomEvent("pt1",{detail:t})):(d=setTimeout(w,1e4),e.addEventListener("pt0",f),r?h(1):n.serviceWorker?n.serviceWorker.register(a+(o.swPath||"partytown-sw.js"),{scope:a}).then((function(t){t.active?h():t.installing&&t.installing.addEventListener("statechange",(function(t){"activated"==t.target.state&&h()}))}),console.error):w())))}function h(t){c=e.createElement(t?"script":"iframe"),t||(c.setAttribute("style","display:block;width:0;height:0;border:0;visibility:hidden"),c.setAttribute("aria-hidden",!0)),c.src=a+"partytown-"+(t?"atomics.js?v=0.5.4":"sandbox-sw.html?"+Date.now()),e.body.appendChild(c)}function w(t,n){for(f(),t=0;t<s.length;t++)(n=e.createElement("script")).innerHTML=s[t].innerHTML,e.head.appendChild(n);c&&c.parentNode.removeChild(c)}function f(){clearTimeout(d)}o=t.partytown||{},i==t&&(o.forward||[]).map((function(e){p=t,e.split(".").map((function(e,n,i){p=p[i[n]]=n+1<i.length?"push"==i[n+1]?[]:p[i[n]]||{}:function(){(t._ptf=t._ptf||[]).push(i,arguments)}}))})),"complete"==e.readyState?u():(t.addEventListener("DOMContentLoaded",u),t.addEventListener("load",u))}(window,document,navigator,top,window.crossOriginIsolated);')},2793:function(e,t,n){"use strict";n.r(t),n.d(t,{MDXContext:function(){return a},MDXProvider:function(){return u},useMDXComponents:function(){return i},withMDXComponents:function(){return o}});var r=n(6540);const a=r.createContext({});function o(e){return function(t){const n=i(t.components);return r.createElement(e,{...t,allComponents:n})}}function i(e){const t=r.useContext(a);return r.useMemo((()=>"function"==typeof e?e(t):{...t,...e}),[t,e])}const l={};function u({components:e,children:t,disableParentContext:n}){let o;return o=n?"function"==typeof e?e({}):e||l:i(e),r.createElement(a.Provider,{value:o},t)}},7078:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b},navigate:function(){return w},parsePath:function(){return l},withAssetPrefix:function(){return m},withPrefix:function(){return f}});var r=n(5556),a=n(6540),o=n(1693);n(6395);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}function l(e){let t=e||"/",n="",r="";const a=t.indexOf("#");-1!==a&&(r=t.slice(a),t=t.slice(0,a));const o=t.indexOf("?");return-1!==o&&(n=t.slice(o),t=t.slice(0,o)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}const u=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,c=e=>{if("string"==typeof e)return!(e=>u.test(e))(e)},s=()=>"";function f(e,t=""){var n;if(!c(e))return e;if(e.startsWith("./")||e.startsWith("../"))return e;const r=null!=(n=null!=t?t:s())?n:"/";return`${null!=r&&r.endsWith("/")?r.slice(0,-1):r}${e.startsWith("/")?e:`/${e}`}`}const h=e=>null==e?void 0:e.startsWith("/"),d=(e,t)=>"number"==typeof e?e:c(e)?h(e)?function(e){const t=f(e);return t}(e):function(e,t){if(h(e))return e;const n=(0,o.resolve)(e,t);return n}(e,t):e,p=["to","getProps","onClick","onMouseEnter","activeClassName","activeStyle","innerRef","partiallyActive","state","replace","_location"];function m(e){return f(e,s())}const g={activeClassName:r.string,activeStyle:r.object,partiallyActive:r.bool};function v(e){return a.createElement(o.Location,null,(({location:t})=>a.createElement(y,i({},e,{_location:t}))))}class y extends a.Component{constructor(e){super(e),this.defaultGetProps=({isPartiallyCurrent:e,isCurrent:t})=>(this.props.partiallyActive?e:t)?{className:[this.props.className,this.props.activeClassName].filter(Boolean).join(" "),style:i({},this.props.style,this.props.activeStyle)}:null;let t=!1;"undefined"!=typeof window&&window.IntersectionObserver&&(t=!0),this.state={IOSupported:t},this.abortPrefetch=null,this.handleRef=this.handleRef.bind(this)}_prefetch(){let e=window.location.pathname+window.location.search;this.props._location&&this.props._location.pathname&&(e=this.props._location.pathname+this.props._location.search);const t=l(d(this.props.to,e)),n=t.pathname+t.search;if(e!==n)return ___loader.enqueue(n)}componentWillUnmount(){if(!this.io)return;const{instance:e,el:t}=this.io;this.abortPrefetch&&this.abortPrefetch.abort(),e.unobserve(t),e.disconnect()}handleRef(e){this.props.innerRef&&Object.prototype.hasOwnProperty.call(this.props.innerRef,"current")?this.props.innerRef.current=e:this.props.innerRef&&this.props.innerRef(e),this.state.IOSupported&&e&&(this.io=((e,t)=>{const n=new window.IntersectionObserver((n=>{n.forEach((n=>{e===n.target&&t(n.isIntersecting||n.intersectionRatio>0)}))}));return n.observe(e),{instance:n,el:e}})(e,(e=>{e?this.abortPrefetch=this._prefetch():this.abortPrefetch&&this.abortPrefetch.abort()})))}render(){const e=this.props,{to:t,getProps:n=this.defaultGetProps,onClick:r,onMouseEnter:u,state:s,replace:f,_location:h}=e,m=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t.indexOf(n=o[r])>=0||(a[n]=e[n]);return a}(e,p),g=d(t,h.pathname);return c(g)?a.createElement(o.Link,i({to:g,state:s,getProps:n,innerRef:this.handleRef,onMouseEnter:e=>{u&&u(e);const t=l(g);___loader.hovering(t.pathname+t.search)},onClick:e=>{if(r&&r(e),!(0!==e.button||this.props.target||e.defaultPrevented||e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)){e.preventDefault();let t=f;const n=encodeURI(g)===h.pathname;"boolean"!=typeof f&&n&&(t=!0),window.___navigate(g,{state:s,replace:t})}return!0}},m)):a.createElement("a",i({href:g},m))}}y.propTypes=i({},g,{onClick:r.func,to:r.string.isRequired,replace:r.bool,state:r.object});var b=a.forwardRef(((e,t)=>a.createElement(v,i({innerRef:t},e))));const w=(e,t)=>{window.___navigate(d(e,window.location.pathname),t)}},5535:function(e,t,n){"use strict";n.r(t),n.d(t,{Script:function(){return p},ScriptStrategy:function(){return c},collectedScriptsByPage:function(){return l},scriptCache:function(){return h},scriptCallbackCache:function(){return d}});var r=n(6540),a=n(1693);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}const i=new Map,l={get:e=>i.get(e)||[],set(e,t){const n=i.get(e)||[];n.push(t),i.set(e,n)},delete(e){i.delete(e)}},u="undefined"!=typeof self&&self.requestIdleCallback&&self.requestIdleCallback.bind(window)||function(e){const t=Date.now();return setTimeout((function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})}),1)};var c,s;(s=c||(c={})).postHydrate="post-hydrate",s.idle="idle",s.offMainThread="off-main-thread";const f=new Set(["src","strategy","dangerouslySetInnerHTML","children","onLoad","onError"]),h=new Set,d=new Map;function p(e){return r.createElement(a.Location,null,(()=>r.createElement(m,e)))}function m(e){const{src:t,strategy:n=c.postHydrate}=e||{},{pathname:i}=(0,a.useLocation)();if((0,r.useEffect)((()=>{let t;switch(n){case c.postHydrate:t=g(e);break;case c.idle:u((()=>{t=g(e)}));break;case c.offMainThread:{const t=y(e);l.set(i,t)}}return()=>{const{script:e,loadCallback:n,errorCallback:r}=t||{};n&&(null==e||e.removeEventListener("load",n)),r&&(null==e||e.removeEventListener("error",r)),null==e||e.remove()}}),[]),n===c.offMainThread){const a=v(e),u=y(e);return"undefined"==typeof window&&l.set(i,u),r.createElement("script",a?o({type:"text/partytown","data-strategy":n,crossOrigin:"anonymous"},u,{dangerouslySetInnerHTML:{__html:v(e)}}):o({type:"text/partytown",src:b(t),"data-strategy":n,crossOrigin:"anonymous"},u))}return null}function g(e){const{id:t,src:n,strategy:r=c.postHydrate,onLoad:a,onError:i}=e||{},l=t||n,u=["load","error"],s={load:a,error:i};if(l){for(const e of u)if(null!=s&&s[e]){var f;const t=d.get(l)||{},{callbacks:n=[]}=(null==t?void 0:t[e])||{};var p,m;n.push(null==s?void 0:s[e]),null!=t&&null!=(f=t[e])&&f.event?null==s||null==(p=s[e])||p.call(s,null==t||null==(m=t[e])?void 0:m.event):d.set(l,o({},t,{[e]:{callbacks:n}}))}if(h.has(l))return null}const g=v(e),b=y(e),_=document.createElement("script");t&&(_.id=t),_.dataset.strategy=r;for(const[o,c]of Object.entries(b))_.setAttribute(o,c);g&&(_.textContent=g),n&&(_.src=n);const E={};if(l){for(const e of u){const t=t=>w(t,l,e);_.addEventListener(e,t),E[`${e}Callback`]=t}h.add(l)}return document.body.appendChild(_),{script:_,loadCallback:E.loadCallback,errorCallback:E.errorCallback}}function v(e){const{dangerouslySetInnerHTML:t,children:n=""}=e||{},{__html:r=""}=t||{};return r||n}function y(e){const t={};for(const[n,r]of Object.entries(e))f.has(n)||(t[n]=r);return t}function b(e){if(e)return`/__third-party-proxy?url=${encodeURIComponent(e)}`}function w(e,t,n){const r=d.get(t)||{};for(const o of(null==r||null==(a=r[n])?void 0:a.callbacks)||[]){var a;o(e)}d.set(t,{[n]:{event:e}})}},551:function(e){"use strict";e.exports=[]},1324:function(e){"use strict";e.exports=[]}},function(e){e.O(0,[593,869,379],(function(){return t=1973,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=app-d779ae985058eabbbc5d.js.map